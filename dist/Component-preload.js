jQuery.sap.registerPreloadedModules({version:"2.0",name:"ch/portof/Component-preload",modules:{"ch/portof/Component.js":'sap.ui.define([\n\t\t"sap/ui/core/UIComponent",\n\t\t"sap/ui/Device",\n\t\t"ch/portof/model/models",\n\t\t"ch/portof/controller/ListSelector",\n\t\t"ch/portof/controller/ErrorHandler"\n\t], function (UIComponent, Device, models, ListSelector, ErrorHandler) {\n\t\t"use strict";\n\n\t\treturn UIComponent.extend("ch.portof.Component", {\n\n\t\t\tmetadata : {\n\t\t\t\tmanifest : "json"\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * The component is initialized by UI5 automatically during the startup of the app and calls the init method once.\n\t\t\t * In this method, the device models are set and the router is initialized.\n\t\t\t * @public\n\t\t\t * @override\n\t\t\t */\n\t\t\tinit : function () {\n\t\t\t\tthis.oListSelector = new ListSelector();\n\t\t\t\tthis._oErrorHandler = new ErrorHandler(this);\n\n\t\t\t\t// set the device model\n\t\t\t\tthis.setModel(models.createDeviceModel(), "device");\n\n\t\t\t\t// call the base component\'s init function and create the App view\n\t\t\t\tUIComponent.prototype.init.apply(this, arguments);\n\n\t\t\t\t// create the views based on the url/hash\n\t\t\t\tthis.getRouter().initialize();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * The component is destroyed by UI5 automatically.\n\t\t\t * In this method, the ListSelector and ErrorHandler are destroyed.\n\t\t\t * @public\n\t\t\t * @override\n\t\t\t */\n\t\t\tdestroy : function () {\n\t\t\t\tthis.oListSelector.destroy();\n\t\t\t\tthis._oErrorHandler.destroy();\n\t\t\t\t// call the base component\'s destroy function\n\t\t\t\tUIComponent.prototype.destroy.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * This method can be called to determine whether the sapUiSizeCompact or sapUiSizeCozy\n\t\t\t * design mode class should be set, which influences the size appearance of some controls.\n\t\t\t * @public\n\t\t\t * @return {string} css class, either \'sapUiSizeCompact\' or \'sapUiSizeCozy\' - or an empty string if no css class should be set\n\t\t\t */\n\t\t\tgetContentDensityClass : function() {\n\t\t\t\tif (this._sContentDensityClass === undefined) {\n\t\t\t\t\t// check whether FLP has already set the content density class; do nothing in this case\n\t\t\t\t\tif (jQuery(document.body).hasClass("sapUiSizeCozy") || jQuery(document.body).hasClass("sapUiSizeCompact")) {\n\t\t\t\t\t\tthis._sContentDensityClass = "";\n\t\t\t\t\t} else if (!Device.support.touch) { // apply "compact" mode if touch is not supported\n\t\t\t\t\t\tthis._sContentDensityClass = "sapUiSizeCompact";\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// "cozy" in case of touch support; default for most sap.m controls, but needed for desktop-first controls like sap.ui.table.Table\n\t\t\t\t\t\tthis._sContentDensityClass = "sapUiSizeCozy";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this._sContentDensityClass;\n\t\t\t}\n\n\t\t});\n\n\t}\n);',"ch/portof/controller/App.controller.js":'sap.ui.define([\n\t\t"ch/portof/controller/BaseController",\n\t\t"sap/ui/model/json/JSONModel"\n\t], function (BaseController, JSONModel) {\n\t\t"use strict";\n\t\treturn BaseController.extend("ch.portof.controller.App", {\n\n\t\t\tonInit : function () {\n\t\t\t\tvar oViewModel,\n\t\t\t\t\tfnSetAppNotBusy,\n\t\t\t\t\toListSelector = this.getOwnerComponent().oListSelector,\n\t\t\t\t\tiOriginalBusyDelay = this.getView().getBusyIndicatorDelay();\n\n\t\t\t\toViewModel = new JSONModel({\n\t\t\t\t\tbusy : true,\n\t\t\t\t\tdelay : 0\n\t\t\t\t});\n\t\t\t\tthis.setModel(oViewModel, "appView");\n\n\t\t\t\tfnSetAppNotBusy = function() {\n\t\t\t\t\toViewModel.setProperty("/busy", false);\n\t\t\t\t\toViewModel.setProperty("/delay", iOriginalBusyDelay);\n\t\t\t\t};\n\n\t\t\t\tthis.getOwnerComponent().getModel().metadataLoaded()\n\t\t\t\t\t\t.then(fnSetAppNotBusy);\n\n\t\t\t\t// Makes sure that master view is hidden in split app\n\t\t\t\t// after a new list entry has been selected.\n\t\t\t\toListSelector.attachListSelectionChange(function () {\n\t\t\t\t\tthis.byId("idAppControl").hideMaster();\n\t\t\t\t}, this);\n\n\t\t\t\t// apply content density mode to root view\n\t\t\t\tthis.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());\n\t\t\t}\n\t\t});\n\t}\n);',"ch/portof/controller/BaseController.js":'/*global history */\nsap.ui.define([\n\t\t"sap/ui/core/mvc/Controller",\n\t\t"sap/ui/core/routing/History"\n\t], function (Controller, History) {\n\t\t"use strict";\n\n\t\treturn Controller.extend("ch.portof.controller.BaseController", {\n\t\t\t/**\n\t\t\t * Convenience method for accessing the router in every controller of the application.\n\t\t\t * @public\n\t\t\t * @returns {sap.ui.core.routing.Router} the router for this component\n\t\t\t */\n\t\t\tgetRouter : function () {\n\t\t\t\treturn this.getOwnerComponent().getRouter();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Convenience method for getting the view model by name in every controller of the application.\n\t\t\t * @public\n\t\t\t * @param {string} sName the model name\n\t\t\t * @returns {sap.ui.model.Model} the model instance\n\t\t\t */\n\t\t\tgetModel : function (sName) {\n\t\t\t\treturn this.getView().getModel(sName);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Convenience method for setting the view model in every controller of the application.\n\t\t\t * @public\n\t\t\t * @param {sap.ui.model.Model} oModel the model instance\n\t\t\t * @param {string} sName the model name\n\t\t\t * @returns {sap.ui.mvc.View} the view instance\n\t\t\t */\n\t\t\tsetModel : function (oModel, sName) {\n\t\t\t\treturn this.getView().setModel(oModel, sName);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Convenience method for getting the resource bundle.\n\t\t\t * @public\n\t\t\t * @returns {sap.ui.model.resource.ResourceModel} the resourceModel of the component\n\t\t\t */\n\t\t\tgetResourceBundle : function () {\n\t\t\t\treturn this.getOwnerComponent().getModel("i18n").getResourceBundle();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event handler for navigating back.\n\t\t\t * It there is a history entry we go one step back in the browser history\n\t\t\t * If not, it will replace the current entry of the browser history with the master route.\n\t\t\t * @public\n\t\t\t */\n\t\t\tonNavBack : function() {\n\t\t\t\tvar sPreviousHash = History.getInstance().getPreviousHash();\n\n\t\t\t\t\tif (sPreviousHash !== undefined) {\n\t\t\t\t\thistory.go(-1);\n\t\t\t\t} else {\n\t\t\t\t\tthis.getRouter().navTo("master", {}, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t}\n);',"ch/portof/controller/Detail.controller.js":'/*global location */\nsap.ui.define([\n\t"ch/portof/controller/BaseController",\n\t"sap/ui/model/json/JSONModel",\n\t"ch/portof/model/formatter"\n], function(BaseController, JSONModel, formatter) {\n\t"use strict";\n\treturn BaseController.extend("ch.portof.controller.Detail", {\n\t\tformatter: formatter,\n\t\t/* =========================================================== */\n\t\t/* lifecycle methods                                           */\n\t\t/* =========================================================== */\n\t\tonInit: function() {\n\t\t\t// Model used to manipulate control states. The chosen values make sure,\n\t\t\t// detail page is busy indication immediately so there is no break in\n\t\t\t// between the busy indication for loading the view\'s meta data\n\t\t\tvar oViewModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0,\n\t\t\t\tisPowerUser: false,\n\t\t\t\tlotsenRapport: false,\n\t\t\t\tssbRapport: false,\n\t\t\t\tlineItemListTitle: this.getResourceBundle().getText("detailLineItemTableHeading")\n\t\t\t});\n\n\t\t\t// Ermitteln des Lotsennamens\n\t\t\tvar oBenutzerModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\n\t\t\t//Lesen der Berechtigungen aus odata Service\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/BenutzerSet(\'1\')";\n\t\t\toBenutzerModel.loadData(URL, true, false);\n\t\t\toViewModel.setProperty("/ispoweruser", oBenutzerModel.getProperty("/d/Ispoweruser"));\n\t\t\toViewModel.setProperty("/lotsenRapport", oBenutzerModel.getProperty("/d/Lotsenrapport"));\n\t\t\toViewModel.setProperty("/ssbRapport", oBenutzerModel.getProperty("/d/Ssbrapport"));\n\n\t\t\tthis.getRouter().getRoute("object").attachPatternMatched(this._onObjectMatched, this);\n\n\t\t\tthis.setModel(oViewModel, "detailView");\n\n\t\t\tthis.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this));\n\t\t},\n\t\t/* =========================================================== */\n\t\t/* event handlers                                              */\n\t\t/* =========================================================== */\n\t\t/**\n\t\t * Event handler when the share by E-Mail button has been clicked\n\t\t * @public\n\t\t */\n\t\tonShareEmailPress: function() {\n\t\t\tvar oViewModel = this.getModel("detailView");\n\t\t\tsap.m.URLHelper.triggerEmail(null, oViewModel.getProperty("/shareSendEmailSubject"), oViewModel.getProperty(\n\t\t\t\t"/shareSendEmailMessage"));\n\t\t},\n\t\t/**\n\t\t * Updates the item count within the line item table\'s header\n\t\t * @param {object} oEvent an event containing the total number of items in the list\n\t\t * @private\n\t\t */\n\t\tonListUpdateFinished: function(oEvent) {\n\t\t\tvar sTitle, iTotalItems = oEvent.getParameter("total"),\n\t\t\t\toViewModel = this.getModel("detailView");\n\t\t\t// only update the counter if the length is final\n\t\t\tif (this.byId("lineItemsList").getBinding("items").isLengthFinal()) {\n\t\t\t\tif (iTotalItems) {\n\t\t\t\t\tsTitle = this.getResourceBundle().getText("detailLineItemTableHeadingCount", [iTotalItems]);\n\t\t\t\t} else {\n\t\t\t\t\t//Display \'Line Items\' instead of \'Line items (0)\'\n\t\t\t\t\tsTitle = this.getResourceBundle().getText("detailLineItemTableHeading");\n\t\t\t\t}\n\t\t\t\toViewModel.setProperty("/lineItemListTitle", sTitle);\n\t\t\t}\n\t\t},\n\t\t/* =========================================================== */\n\t\t/* begin: internal methods                                     */\n\t\t/* =========================================================== */\n\t\t/**\n\t\t * Binds the view to the object path and expands the aggregated line items.\n\t\t * @function\n\t\t * @param {sap.ui.base.Event} oEvent pattern match event in route \'object\'\n\t\t * @private\n\t\t */\n\t\t_onObjectMatched: function(oEvent) {\n\t\t\tvar sObjectId = oEvent.getParameter("arguments").objectId;\n\t\t\tthis.getModel().metadataLoaded().then(function() {\n\t\t\t\tvar sObjectPath = this.getModel().createKey("SchiffeSet", {\n\t\t\t\t\tSchiffsnummer: sObjectId\n\t\t\t\t});\n\t\t\t\tthis._bindView("/" + sObjectPath);\n\t\t\t}.bind(this));\n\t\t},\n\t\t/**\n\t\t * Binds the view to the object path. Makes sure that detail view displays\n\t\t * a busy indicator while data for the corresponding element binding is loaded.\n\t\t * @function\n\t\t * @param {string} sObjectPath path to the object to be bound to the view.\n\t\t * @private\n\t\t */\n\t\t_bindView: function(sObjectPath) {\n\t\t\t// Set busy indicator during view binding\n\t\t\tvar oViewModel = this.getModel("detailView");\n\t\t\t// If the view was not bound yet its not busy, only if the binding requests data it is set to busy again\n\t\t\toViewModel.setProperty("/busy", false);\n\t\t\tthis.getView().bindElement({\n\t\t\t\tpath: sObjectPath,\n\t\t\t\tevents: {\n\t\t\t\t\tchange: this._onBindingChange.bind(this),\n\t\t\t\t\tdataRequested: function() {\n\t\t\t\t\t\toViewModel.setProperty("/busy", true);\n\t\t\t\t\t},\n\t\t\t\t\tdataReceived: function() {\n\t\t\t\t\t\toViewModel.setProperty("/busy", false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t_onBindingChange: function() {\n\t\t\tvar oView = this.getView(),\n\t\t\t\toElementBinding = oView.getElementBinding();\n\t\t\t// No data for the binding\n\t\t\tif (!oElementBinding.getBoundContext()) {\n\t\t\t\tthis.getRouter().getTargets().display("detailObjectNotFound");\n\t\t\t\t// if object could not be found, the selection in the master list\n\t\t\t\t// does not make sense anymore.\n\t\t\t\tthis.getOwnerComponent().oListSelector.clearMasterListSelection();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar sPath = oElementBinding.getPath(),\n\t\t\t\toResourceBundle = this.getResourceBundle(),\n\t\t\t\toObject = oView.getModel().getObject(sPath),\n\t\t\t\tsObjectId = oObject.Schiffsnummer,\n\t\t\t\tsObjectName = oObject.Name,\n\t\t\t\toViewModel = this.getModel("detailView");\n\t\t\tthis.getOwnerComponent().oListSelector.selectAListItem(sPath);\n\t\t\toViewModel.setProperty("/shareSendEmailSubject", oResourceBundle.getText("shareSendEmailObjectSubject", [sObjectId]));\n\t\t\toViewModel.setProperty("/shareSendEmailMessage", oResourceBundle.getText("shareSendEmailObjectMessage", [\n\t\t\t\tsObjectName,\n\t\t\t\tsObjectId,\n\t\t\t\tlocation.href\n\t\t\t]));\n\t\t},\n\t\t_onMetadataLoaded: function() {\n\t\t\t// Store original busy indicator delay for the detail view\n\t\t\tvar iOriginalViewBusyDelay = this.getView().getBusyIndicatorDelay(),\n\t\t\t\toViewModel = this.getModel("detailView"),\n\t\t\t\toLineItemTable = this.byId("lineItemsList"),\n\t\t\t\tiOriginalLineItemTableBusyDelay = oLineItemTable.getBusyIndicatorDelay();\n\t\t\t// Make sure busy indicator is displayed immediately when\n\t\t\t// detail view is displayed for the first time\n\t\t\toViewModel.setProperty("/delay", 0);\n\t\t\toViewModel.setProperty("/lineItemTableDelay", 0);\n\t\t\toLineItemTable.attachEventOnce("updateFinished", function() {\n\t\t\t\t// Restore original busy indicator delay for line item table\n\t\t\t\toViewModel.setProperty("/lineItemTableDelay", iOriginalLineItemTableBusyDelay);\n\t\t\t});\n\t\t\t// Binding the view will set it to not busy - so the view is always busy if it is not bound\n\t\t\toViewModel.setProperty("/busy", true);\n\t\t\t// Restore original busy indicator delay for the detail view\n\t\t\toViewModel.setProperty("/delay", iOriginalViewBusyDelay);\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Detail\n\t\t */\n\t\ttestEvent: function() {\n\t\t\t//This code was generated by the layout editor.\n\t\t\tthis.byId("debitorHeader1").setProperty("title", "afterInit");\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Detail\n\t\t */\n\t\tnewRapport: function() {\n\t\t\t//This code was generated by the layout editor.\n\t\t\t//this.getRouter().navTo("rapport");\n\t\t\t//\t\t\t\t\t\t\tthis.getRouter().getTargets().display("detailNoObjectsAvailable");\n\t\t\t// this.getRouter().getTargets().display("rapportTarget");\n\t\t\t//var bReplace = !Device.system.phone;\n\t\t\tthis.getRouter().navTo("rapportNewRoute", {\n\t\t\t\tobjectId: this.getView().getBindingContext().getProperty("Schiffsnummer")\n\t\t\t}, true); //this.getRouter().navTo("rapport");\n\t\t},\n\t\tnewRapportSSB: function() {\n\n\t\t\tthis.getRouter().navTo("rapportNewSSBRoute", {\n\t\t\t\tobjectId: this.getView().getBindingContext().getProperty("Schiffsnummer")\n\t\t\t}, true);\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Detail\n\t\t */\n\t\t_onListItemPressed: function(oEvent) {\n\t\t\t//This code was generated by the layout editor.\n\t\t\tif (oEvent.getSource().getBindingContext().getObject().RapportArt === "S") {\n\t\t\t\tthis.getRouter().navTo("rapportSSBRoute", {\n\t\t\t\t\tobjectId: oEvent.getSource().getBindingContext().getObject().Rapportid\n\t\t\t\t}, true);\n\t\t\t} else {\n\t\t\t\tthis.getRouter().navTo("rapportRoute", {\n\t\t\t\t\tobjectId: oEvent.getSource().getBindingContext().getObject().Rapportid\n\t\t\t\t}, true);\n\t\t\t}\n\n\t\t}\n\t});\n});',"ch/portof/controller/ErrorHandler.js":'sap.ui.define([\n\t\t"sap/ui/base/Object",\n\t\t"sap/m/MessageBox"\n\t], function (UI5Object, MessageBox) {\n\t\t"use strict";\n\n\t\treturn UI5Object.extend("ch.portof.controller.ErrorHandler", {\n\n\t\t\t/**\n\t\t\t * Handles application errors by automatically attaching to the model events and displaying errors when needed.\n\t\t\t * @class\n\t\t\t * @param {sap.ui.core.UIComponent} oComponent reference to the app\'s component\n\t\t\t * @public\n\t\t\t * @alias ch.portof.controller.ErrorHandler\n\t\t\t */\n\t\t\tconstructor : function (oComponent) {\n\t\t\t\tthis._oResourceBundle = oComponent.getModel("i18n").getResourceBundle();\n\t\t\t\tthis._oComponent = oComponent;\n\t\t\t\tthis._oModel = oComponent.getModel();\n\t\t\t\tthis._bMessageOpen = false;\n\t\t\t\tthis._sErrorText = this._oResourceBundle.getText("errorText");\n\n\t\t\t\tthis._oModel.attachMetadataFailed(function (oEvent) {\n\t\t\t\t\tvar oParams = oEvent.getParameters();\n\t\t\t\t\tthis._showServiceError(oParams.response);\n\t\t\t\t}, this);\n\n\t\t\t\tthis._oModel.attachRequestFailed(function (oEvent) {\n\t\t\t\t\tvar oParams = oEvent.getParameters();\n\t\t\t\t\t// An entity that was not found in the service is also throwing a 404 error in oData.\n\t\t\t\t\t// We already cover this case with a notFound target so we skip it here.\n\t\t\t\t\t// A request that cannot be sent to the server is a technical error that we have to handle though\n\t\t\t\t\tif (oParams.response.statusCode !== "404" || (oParams.response.statusCode === 404 && oParams.response.responseText.indexOf("Cannot POST") === 0)) {\n\t\t\t\t\t\tthis._showServiceError(oParams.response);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Shows a {@link sap.m.MessageBox} when a service call has failed.\n\t\t\t * Only the first error message will be display.\n\t\t\t * @param {string} sDetails a technical error to be displayed on request\n\t\t\t * @private\n\t\t\t */\n\t\t\t_showServiceError : function (sDetails) {\n\t\t\t\tif (this._bMessageOpen) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._bMessageOpen = true;\n\t\t\t\tMessageBox.error(\n\t\t\t\t\tthis._sErrorText,\n\t\t\t\t\t{\n\t\t\t\t\t\tid : "serviceErrorMessageBox",\n\t\t\t\t\t\tdetails : sDetails,\n\t\t\t\t\t\tstyleClass : this._oComponent.getContentDensityClass(),\n\t\t\t\t\t\tactions : [MessageBox.Action.CLOSE],\n\t\t\t\t\t\tonClose : function () {\n\t\t\t\t\t\t\tthis._bMessageOpen = false;\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t\tshowError : function (oError) {\n\t\t\t\tif (this._bMessageOpen) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._bMessageOpen = true;\n\t\t\t\tMessageBox.error(\n\t\t\t\t\tthis._sErrorText,\n\t\t\t\t\t{\n\t\t\t\t\t\tid : "serviceErrorMessageBox",\n\t\t\t\t\t\tdetails : oError,\n\t\t\t\t\t\tstyleClass : this._oComponent.getContentDensityClass(),\n\t\t\t\t\t\tactions : [MessageBox.Action.CLOSE],\n\t\t\t\t\t\tonClose : function () {\n\t\t\t\t\t\t\tthis._bMessageOpen = false;\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\t\n\n\t\t});\n\n\t}\n);',"ch/portof/controller/ListSelector.js":'sap.ui.define([\n\t\t"sap/ui/base/Object"\n\t], function (BaseObject) {\n\t\t"use strict";\n\n\t\treturn BaseObject.extend("ch.portof.model.ListSelector", {\n\n\t\t\t/**\n\t\t\t * Provides a convenience API for selecting list items. All the functions will wait until the initial load of the a List passed to the instance by the setBoundMasterList\n\t\t\t * function.\n\t\t\t * @class\n\t\t\t * @public\n\t\t\t * @alias ch.portof.model.ListSelector\n\t\t\t */\n\n\t\t\tconstructor : function () {\n\t\t\t\tthis._oWhenListHasBeenSet = new Promise(function (fnResolveListHasBeenSet) {\n\t\t\t\t\tthis._fnResolveListHasBeenSet = fnResolveListHasBeenSet;\n\t\t\t\t}.bind(this));\n\t\t\t\t// This promise needs to be created in the constructor, since it is allowed to\n\t\t\t\t// invoke selectItem functions before calling setBoundMasterList\n\t\t\t\tthis.oWhenListLoadingIsDone = new Promise(function (fnResolve, fnReject) {\n\t\t\t\t\t// Used to wait until the setBound masterList function is invoked\n\t\t\t\t\tthis._oWhenListHasBeenSet\n\t\t\t\t\t\t.then(function (oList) {\n\t\t\t\t\t\t\toList.getBinding("items").attachEventOnce("dataReceived",\n\t\t\t\t\t\t\t\tfunction (oData) {\n\t\t\t\t\t\t\t\t\tif (!oData.getParameter("data")) {\n\t\t\t\t\t\t\t\t\t\tfnReject({\n\t\t\t\t\t\t\t\t\t\t\tlist : oList,\n\t\t\t\t\t\t\t\t\t\t\terror : true\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar oFirstListItem = oList.getItems()[0];\n\t\t\t\t\t\t\t\t\tif (oFirstListItem) {\n\t\t\t\t\t\t\t\t\t\t// Have to make sure that first list Item is selected\n\t\t\t\t\t\t\t\t\t\t// and a select event is triggered. Like that, the corresponding\n\t\t\t\t\t\t\t\t\t\t// detail page is loaded automatically\n\t\t\t\t\t\t\t\t\t\tfnResolve({\n\t\t\t\t\t\t\t\t\t\t\tlist : oList,\n\t\t\t\t\t\t\t\t\t\t\tfirstListitem : oFirstListItem\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// No items in the list\n\t\t\t\t\t\t\t\t\t\tfnReject({\n\t\t\t\t\t\t\t\t\t\t\tlist : oList,\n\t\t\t\t\t\t\t\t\t\t\terror : false\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t}.bind(this));\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * A bound list should be passed in here. Should be done, before the list has received its initial data from the server.\n\t\t\t * May only be invoked once per ListSelector instance.\n\t\t\t * @param {sap.m.List} oList The list all the select functions will be invoked on.\n\t\t\t * @public\n\t\t\t */\n\t\t\tsetBoundMasterList : function (oList) {\n\t\t\t\tthis._oList = oList;\n\t\t\t\tthis._fnResolveListHasBeenSet(oList);\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * Tries to select and scroll to a list item with a matching binding context. If there are no items matching the binding context or the ListMode is none,\n\t\t\t * no selection/scrolling will happen\n\t\t\t * @param {string} sBindingPath the binding path matching the binding path of a list item\n\t\t\t * @public\n\t\t\t */\n\t\t\tselectAListItem : function (sBindingPath) {\n\n\t\t\t\tthis.oWhenListLoadingIsDone.then(\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\tvar oList = this._oList,\n\t\t\t\t\t\t\toSelectedItem;\n\n\t\t\t\t\t\tif (oList.getMode() === "None") {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toSelectedItem = oList.getSelectedItem();\n\n\t\t\t\t\t\t// skip update if the current selection is already matching the object path\n\t\t\t\t\t\tif (oSelectedItem && oSelectedItem.getBindingContext().getPath() === sBindingPath) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toList.getItems().some(function (oItem) {\n\t\t\t\t\t\t\tif (oItem.getBindingContext() && oItem.getBindingContext().getPath() === sBindingPath) {\n\t\t\t\t\t\t\t\toList.setSelectedItem(oItem);\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\tjQuery.sap.log.warning("Could not select the list item with the path" + sBindingPath + " because the list encountered an error or had no items");\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\n\n\t\t\t/* =========================================================== */\n\t\t\t/* Convenience Functions for List Selection Change Event       */\n\t\t\t/* =========================================================== */\n\n\t\t\t/**\n\t\t\t * Attaches a listener and listener function to the ListSelector\'s bound master list. By using\n\t\t\t * a promise, the listener is added, even if the list is not available when \'attachListSelectionChange\'\n\t\t\t * is called.\n\t\t\t * @param {function} fnFunction the function to be executed when the list fires a selection change event\n\t\t\t * @param {function} oListener the listener object\n\t\t\t * @return {ch.portof.model.ListSelector} the list selector object for method chaining\n\t\t\t * @public\n\t\t\t */\n\t\t\tattachListSelectionChange : function (fnFunction, oListener) {\n\t\t\t\tthis._oWhenListHasBeenSet.then(function () {\n\t\t\t\t\tthis._oList.attachSelectionChange(fnFunction, oListener);\n\t\t\t\t}.bind(this));\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Detaches a listener and listener function from the ListSelector\'s bound master list. By using\n\t\t\t * a promise, the listener is removed, even if the list is not available when \'detachListSelectionChange\'\n\t\t\t * is called.\n\t\t\t * @param {function} fnFunction the function to be executed when the list fires a selection change event\n\t\t\t * @param {function} oListener the listener object\n\t\t\t * @return {ch.portof.model.ListSelector} the list selector object for method chaining\n\t\t\t * @public\n\t\t\t */\n\t\t\tdetachListSelectionChange : function (fnFunction, oListener) {\n\t\t\t\tthis._oWhenListHasBeenSet.then(function () {\n\t\t\t\t\tthis._oList.detachSelectionChange(fnFunction, oListener);\n\t\t\t\t}.bind(this));\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Removes all selections from master list.\n\t\t\t * Does not trigger \'selectionChange\' event on master list, though.\n\t\t\t * @public\n\t\t\t */\n\t\t\tclearMasterListSelection : function () {\n\t\t\t\t//use promise to make sure that \'this._oList\' is available\n\t\t\t\tthis._oWhenListHasBeenSet.then(function () {\n\t\t\t\t\tthis._oList.removeSelections(true);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\n\t\t});\n\n\t}\n);',
"ch/portof/controller/Master.controller.js":'/*global history */\nsap.ui.define([\n\t"ch/portof/controller/BaseController",\n\t"sap/ui/model/json/JSONModel",\n\t"sap/ui/model/Filter",\n\t"sap/ui/model/FilterOperator",\n\t"sap/m/GroupHeaderListItem",\n\t"sap/ui/Device",\n\t"ch/portof/model/formatter"\n], function(BaseController, JSONModel, Filter, FilterOperator, GroupHeaderListItem, Device, formatter) {\n\t"use strict";\n\n\treturn BaseController.extend("ch.portof.controller.Master", {\n\n\t\tformatter: formatter,\n\n\t\t/* =========================================================== */\n\t\t/* lifecycle methods                                           */\n\t\t/* =========================================================== */\n\n\t\t/**\n\t\t * Called when the master list controller is instantiated. It sets up the event handling for the master/detail communication and other lifecycle tasks.\n\t\t * @public\n\t\t */\n\t\tonInit: function() {\n\t\t\t// Control state model\n\t\t\tvar oList = this.byId("list"),\n\t\t\t\toViewModel = this._createViewModel(),\n\t\t\t\t// Put down master list\'s original value for busy indicator delay,\n\t\t\t\t// so it can be restored later on. Busy handling on the master list is\n\t\t\t\t// taken care of by the master list itself.\n\t\t\t\tiOriginalBusyDelay = oList.getBusyIndicatorDelay();\n\n\t\t\tthis._oList = oList;\n\t\t\t// keeps the filter and search state\n\t\t\tthis._oListFilterState = {\n\t\t\t\taFilter: [],\n\t\t\t\taSearch: []\n\t\t\t};\n\n\t\t\tthis.setModel(oViewModel, "masterView");\n\t\t\t// Make sure, busy indication is showing immediately so there is no\n\t\t\t// break after the busy indication for loading the view\'s meta data is\n\t\t\t// ended (see promise \'oWhenMetadataIsLoaded\' in AppController)\n\t\t\toList.attachEventOnce("updateFinished", function() {\n\t\t\t\t// Restore original busy indicator delay for the list\n\t\t\t\toViewModel.setProperty("/delay", iOriginalBusyDelay);\n\t\t\t});\n\n\t\t\tthis.getView().addEventDelegate({\n\t\t\t\tonBeforeFirstShow: function() {\n\t\t\t\t\tthis.getOwnerComponent().oListSelector.setBoundMasterList(oList);\n\t\t\t\t}.bind(this)\n\t\t\t});\n\n\t\t\tthis.getRouter().getRoute("master").attachPatternMatched(this._onMasterMatched, this);\n\t\t\tthis.getRouter().attachBypassed(this.onBypassed, this);\n\t\t},\n\n\t\t/* =========================================================== */\n\t\t/* event handlers                                              */\n\t\t/* =========================================================== */\n\n\t\t/**\n\t\t * After list data is available, this handler method updates the\n\t\t * master list counter and hides the pull to refresh control, if\n\t\t * necessary.\n\t\t * @param {sap.ui.base.Event} oEvent the update finished event\n\t\t * @public\n\t\t */\n\t\tonUpdateFinished: function(oEvent) {\n\t\t\t// update the master list object counter after new data is loaded\n\t\t\tthis._updateListItemCount(oEvent.getParameter("total"));\n\t\t\t// hide pull to refresh if necessary\n\t\t\tthis.byId("pullToRefresh").hide();\n\t\t},\n\n\t\t/**\n\t\t * Event handler for the master search field. Applies current\n\t\t * filter value and triggers a new search. If the search field\'s\n\t\t * \'refresh\' button has been pressed, no new search is triggered\n\t\t * and the list binding is refresh instead.\n\t\t * @param {sap.ui.base.Event} oEvent the search event\n\t\t * @public\n\t\t */\n\t\tonSearch: function(oEvent) {\n\t\t\tif (oEvent.getParameters().refreshButtonPressed) {\n\t\t\t\t// Search field\'s \'refresh\' button has been pressed.\n\t\t\t\t// This is visible if you select any master list item.\n\t\t\t\t// In this case no new search is triggered, we only\n\t\t\t\t// refresh the list binding.\n\t\t\t\tthis.onRefresh();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar sQuery = oEvent.getParameter("query");\n\n\t\t\tif (sQuery) {\n\t\t\t\tif (/^[0-9]+$/.test(sQuery)) {\n\t\t\t\t\tthis._oListFilterState.aSearch = [new Filter("Schiffsnummer", FilterOperator.StartsWith, sQuery)];\n\t\t\t\t} else {\n\t\t\t\t\tsQuery = sQuery.toUpperCase();\n\t\t\t\t\tthis._oListFilterState.aSearch = [new Filter("Name", FilterOperator.Contains, sQuery)];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._oListFilterState.aSearch = [];\n\t\t\t}\n\t\t\tthis._applyFilterSearch();\n\n\t\t},\n\n\t\t/**\n\t\t * Event handler for refresh event. Keeps filter, sortAnpassung schiffe\n\t\t * and group settings and refreshes the list binding.\n\t\t * @public\n\t\t */\n\t\tonRefresh: function() {\n\t\t\tthis._oList.getBinding("items").refresh();\n\t\t},\n\n\t\t/**\n\t\t * Event handler for the list selection event\n\t\t * @param {sap.ui.base.Event} oEvent the list selectionChange event\n\t\t * @public\n\t\t */\n\t\tonSelectionChange: function(oEvent) {\n\t\t\t// get the list item, either from the listItem parameter or from the event\'s source itself (will depend on the device-dependent mode).\n\t\t\tthis._showDetail(oEvent.getParameter("listItem") || oEvent.getSource());\n\t\t},\n\n\t\t/**\n\t\t * Event handler for the bypassed event, which is fired when no routing pattern matched.\n\t\t * If there was an object selected in the master list, that selection is removed.\n\t\t * @public\n\t\t */\n\t\tonBypassed: function() {\n\t\t\tthis._oList.removeSelections(true);\n\t\t},\n\n\t\t/**\n\t\t * Used to create GroupHeaders with non-capitalized caption.\n\t\t * These headers are inserted into the master list to\n\t\t * group the master list\'s items.\n\t\t * @param {Object} oGroup group whose text is to be displayed\n\t\t * @public\n\t\t * @returns {sap.m.GroupHeaderListItem} group header with non-capitalized caption.\n\t\t */\n\t\tcreateGroupHeader: function(oGroup) {\n\t\t\treturn new GroupHeaderListItem({\n\t\t\t\ttitle: oGroup.text,\n\t\t\t\tupperCase: false\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Event handler for navigating back.\n\t\t * We navigate back in the browser historz\n\t\t * @public\n\t\t */\n\t\tonNavBack: function() {\n\t\t\thistory.go(-1);\n\t\t},\n\n\t\t/* =========================================================== */\n\t\t/* begin: internal methods                                     */\n\t\t/* =========================================================== */\n\n\t\t_createViewModel: function() {\n\t\t\treturn new JSONModel({\n\t\t\t\tisFilterBarVisible: false,\n\t\t\t\tfilterBarLabel: "",\n\t\t\t\tdelay: 0,\n\t\t\t\ttitle: this.getResourceBundle().getText("masterTitleCount", [0]),\n\t\t\t\tnoDataText: this.getResourceBundle().getText("masterListNoDataText"),\n\t\t\t\tsortBy: "Name",\n\t\t\t\tgroupBy: "None"\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * If the master route was hit (empty hash) we have to set\n\t\t * the hash to to the first item in the list as soon as the\n\t\t * listLoading is done and the first item in the list is known\n\t\t * @private\n\t\t */\n\t\t_onMasterMatched: function() {\n\t\t\tthis.getOwnerComponent().oListSelector.oWhenListLoadingIsDone.then(\n\t\t\t\tfunction(mParams) {\n\t\t\t\t\tif (mParams.list.getMode() === "None") {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar sObjectId = mParams.firstListitem.getBindingContext().getProperty("Schiffsnummer");\n\t\t\t\t\tthis.getRouter().navTo("object", {\n\t\t\t\t\t\tobjectId: sObjectId\n\t\t\t\t\t}, true);\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction(mParams) {\n\t\t\t\t\tif (mParams.error) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.getRouter().getTargets().display("detailNoObjectsAvailable");\n\t\t\t\t}.bind(this)\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Shows the selected item on the detail page\n\t\t * On phones a additional history entry is created\n\t\t * @param {sap.m.ObjectListItem} oItem selected Item\n\t\t * @private\n\t\t */\n\t\t_showDetail: function(oItem) {\n\t\t\tvar bReplace = !Device.system.phone;\n\t\t\tthis.getRouter().navTo("object", {\n\t\t\t\tobjectId: oItem.getBindingContext().getProperty("Schiffsnummer")\n\t\t\t}, bReplace);\n\t\t},\n\n\t\t/**\n\t\t * Sets the item count on the master list header\n\t\t * @param {integer} iTotalItems the total number of items in the list\n\t\t * @private\n\t\t */\n\t\t_updateListItemCount: function(iTotalItems) {\n\t\t\tvar sTitle;\n\t\t\t// only update the counter if the length is final\n\t\t\tif (this._oList.getBinding("items").isLengthFinal()) {\n\t\t\t\tsTitle = this.getResourceBundle().getText("masterTitleCount", [iTotalItems]);\n\t\t\t\tthis.getModel("masterView").setProperty("/title", sTitle);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Internal helper method to apply both filter and search state together on the list binding\n\t\t * @private\n\t\t */\n\t\t_applyFilterSearch: function() {\n\t\t\tvar aFilters = this._oListFilterState.aSearch.concat(this._oListFilterState.aFilter),\n\t\t\t\toViewModel = this.getModel("masterView");\n\t\t\tthis._oList.getBinding("items").filter(aFilters, "Application");\n\t\t\t// changes the noDataText of the list in case there are no filter results\n\t\t\tif (aFilters.length !== 0) {\n\t\t\t\toViewModel.setProperty("/noDataText", this.getResourceBundle().getText("masterListNoDataWithFilterOrSearchText"));\n\t\t\t} else if (this._oListFilterState.aSearch.length > 0) {\n\t\t\t\t// only reset the no data text to default when no new search was triggered\n\t\t\t\toViewModel.setProperty("/noDataText", this.getResourceBundle().getText("masterListNoDataText"));\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Internal helper method to apply both group and sort state together on the list binding\n\t\t * @param {sap.ui.model.Sorter[]} aSorters an array of sorters\n\t\t * @private\n\t\t */\n\t\t_applyGroupSort: function(aSorters) {\n\t\t\tthis._oList.getBinding("items").sort(aSorters);\n\t\t},\n\n\t\t/**\n\t\t * Internal helper method that sets the filter bar visibility property and the label\'s caption to be shown\n\t\t * @param {string} sFilterBarText the selected filter value\n\t\t * @private\n\t\t */\n\t\t_updateFilterBar: function(sFilterBarText) {\n\t\t\tvar oViewModel = this.getModel("masterView");\n\t\t\toViewModel.setProperty("/isFilterBarVisible", (this._oListFilterState.aFilter.length > 0));\n\t\t\toViewModel.setProperty("/filterBarLabel", this.getResourceBundle().getText("masterFilterBarText", [sFilterBarText]));\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Master\n\t\t */\n\t\tshowReporting: function( ) {\n\t\t\tthis.getRouter().navTo("showReportingRoute", {\n\t\t\t\t//objectId: "04803200" //this.getView().getBindingContext().getProperty("Schiffsnummer")""\n\t\t\t}, true); //this.getRouter().navTo("rapport");\n\t\t}\n\n\t});\n\n});',
"ch/portof/controller/Rapport.controller.js":'sap.ui.define([\n\t//\t"sap/ui/core/mvc/Controller"\n\t"ch/portof/controller/BaseController",\n\t"sap/ui/model/json/JSONModel",\n\t"ch/portof/model/formatter",\n\t"ch/portof/controller/ErrorHandler",\n\t"sap/ui/core/routing/History"\n], function (BaseController, JSONModel, formatter, ErrorHandler, History) {\n\t"use strict";\n\treturn BaseController.extend("ch.portof.controller.Rapport", {\n\t\t/**\n\t\t * Called when a controller is instantiated and its View controls (if available) are already created.\n\t\t * Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.\n\t\t * @memberOf ch.portof.view.Rapport\n\t\t */\n\t\tformatter: formatter,\n\t\tonInit: function () {\n\t\t\tvar oViewModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0,\n\t\t\t\tinitSignature: false,\n\t\t\t\tnewRapport: false,\n\t\t\t\tchangeMode: false,\n\t\t\t\tannullierenVisible: false,\n\t\t\t\tconfirmed: false, // bestätigungsflag schiffsführer\n\t\t\t\tconfirmed_ul: false, //bestätigungsflag für überlängen\n\t\t\t\tdisplay_ul: false,\n\t\t\t\tfahrtrichtung: "",\n\t\t\t\treporting: false, // Navigation kommt aus Rapportübersicht und muss wieder dahin zurück\n\t\t\t\ttotal: 0,\n\t\t\t\tpoweruser: false, //Kann rapporte ohne Unterschrift und in die Vergangenheit erfassen\n\t\t\t\tlotsenname: "",\n\t\t\t\tkl_2000t: false,\n\t\t\t\tgr_2000t_100m: false,\n\t\t\t\tgr_2000t_110m: false,\n\t\t\t\tkl_2000t_110m: false,\n\t\t\t\trapportart: "L" // Lotsenrapport\n\t\t\t});\n\t\t\tthis.setModel(oViewModel, "rapportView");\n\t\t\tthis._getBenutzer();\n\t\t\tthis.getRouter().getRoute("rapportNewRoute").attachMatched(this._onRouteMatchedNew, this);\n\t\t\tthis.getRouter().getRoute("rapportRoute").attachMatched(this._onRouteMatchedOld, this);\n\t\t\tthis.getRouter().getRoute("rapportRouteReport").attachMatched(this._onRouteMatchedReport, this);\n\t\t\tthis.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this));\n\t\t},\n\t\t/**\n\t\t * If the master route was hit (empty hash) we have to set\n\t\t * the hash to to the first item in the list as soon as the\n\t\t * listLoading is done and the first item in the list is known\n\t\t * @private\n\t\t */\n\t\t_onRouteMatchedNew: function (oEvent) {\n\t\t\t//this._resetModel();\n\t\t\tthis.getView().getModel("rapportView").setProperty("/newRapport", true);\n\t\t\tthis.getView().getModel("rapportView").setProperty("/changeMode", true);\n\t\t\tthis.getView().getModel("rapportView").setProperty("/annullierenVisible", false);\n\t\t\tthis.getView().getModel("rapportView").setProperty("/confirmed", false);\n\t\t\tthis.getView().getModel("rapportView").setProperty("/confirmed_ul", false);\n\t\t\tthis.getView().getModel("rapportView").setProperty("/reporting", false);\n\t\t\t// Annullieren von neuen Rapporten nicht möglich\n\t\t\tvar sObjectId = oEvent.getParameter("arguments").objectId;\n\t\t\tthis.getModel().resetChanges();\n\t\t\t//var dateTime = new Date();\n\n\t\t\tthis.getModel().metadataLoaded().then(function () {\n\t\t\t\tvar oRapporteModel = this.getView().getModel();\n\t\t\t\tvar onewRapport = oRapporteModel.createEntry("/RapporteSet");\n\t\t\t\toRapporteModel.setProperty("Datum", new Date(), onewRapport);\n\t\t\t\toRapporteModel.setProperty("Zeit", {\n\t\t\t\t\t//\tms:\t( dateTime.getTime() - dateTime.getTimezoneOffset() * 60000 ), // UTC Time in Locale umrechnen\n\t\t\t\t\tms: formatter.UTCTimeToLocale(new Date()).getTime(),\n\t\t\t\t\t//\tms: new Date().getTime(),\n\t\t\t\t\t__edmtype: "Edm.Time"\n\t\t\t\t}, onewRapport);\n\t\t\t\toRapporteModel.setProperty("EniNr", sObjectId, onewRapport);\n\t\t\t\t//oRapporteModel.setProperty("Lotsenname", this._getBenutzername(), onewRapport);\n\t\t\t\toRapporteModel.setProperty("Lotsenname", this.getModel("rapportView").getProperty("/lotsenname"), onewRapport);\n\t\t\t\toRapporteModel.setProperty("RapportArt", this.getModel("rapportView").getProperty("/rapportart"), onewRapport);\n\t\t\t\t//oRapporteModel.setProperty("Talfahrt", true, onewRapport);\n\t\t\t\t// oRapporteModel.setProperty("MrbUe2000t", true, onewRapport);\n\t\t\t\t//oRapporteModel.setProperty("Bemerkung", "", onewRapport);\n\t\t\t\tvar sObjectPath = onewRapport.getPath();\n\t\t\t\tthis._bindView(sObjectPath);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_onRouteMatchedOld: function (oEvent) {\n\t\t\t//this._resetModel();\n\t\t\tthis.getView().getModel("rapportView").setProperty("/newRapport", false);\n\t\t\tthis.getView().getModel("rapportView").setProperty("/changeMode", false);\n\t\t\tthis.getView().getModel("rapportView").setProperty("/confirmed", true); // Rapport kann nur gespeichert werden wenn Flag gesetzt\n\t\t\tthis.getView().getModel("rapportView").setProperty("/confirmed_ul", true); // Rapport kann nur gespeichert werden wenn Flag gesetzt\n\n\t\t\tthis.getView().getModel("rapportView").setProperty("/reporting", false);\n\t\t\t// zum Editeren von bestehenden rapporten hier aktivieren.\n\t\t\tthis.getView().getModel("rapportView").setProperty("/annullierenVisible", true);\n\t\t\t// Annullieren von gespeicherten Rapporten möglich\n\t\t\tvar sObjectId = oEvent.getParameter("arguments").objectId;\n\t\t\tthis.getModel().metadataLoaded().then(function () {\n\t\t\t\tvar sObjectPath = this.getModel().createKey("RapporteSet", {\n\t\t\t\t\tRapportid: sObjectId\n\t\t\t\t});\n\t\t\t\tthis._bindView("/" + sObjectPath);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_onRouteMatchedReport: function (oEvent) {\n\t\t\t//property reporting setzen und dann normale route für bestehenden Rapport aufrufen\n\n\t\t\tthis._onRouteMatchedOld(oEvent);\n\t\t\tthis.getView().getModel("rapportView").setProperty("/reporting", true);\n\t\t},\n\t\t/**\n\t\t * Called when the Controller is destroyed. Use this one to free resources and finalize activities.\n\t\t * @memberOf ch.portof.view.Rapport\n\t\t */\n\t\t//\tonExit: function() {\n\t\t//\n\t\t//\t}\t,\n\t\t/**\n\t\t * Binds the view to the object path. Makes sure that detail view displays\n\t\t * a busy indicator while data for the corresponding element binding is loaded.\n\t\t * @function\n\t\t * @param {string} sObjectPath path to the object to be bound to the view.\n\t\t * @private\n\t\t */\n\t\t_bindView: function (sObjectPath) {\n\t\t\t// Set busy indicator during view binding\n\t\t\tvar oViewModel = this.getModel("rapportView");\n\t\t\t// If the view was not bound yet its not busy, only if the binding requests data it is set to busy again\n\t\t\toViewModel.setProperty("/busy", false);\n\t\t\tthis.getView().bindElement({\n\t\t\t\tpath: sObjectPath,\n\t\t\t\tevents: {\n\t\t\t\t\tchange: this._onBindingChange.bind(this),\n\t\t\t\t\tdataRequested: function () {\n\t\t\t\t\t\toViewModel.setProperty("/busy", true);\n\t\t\t\t\t},\n\t\t\t\t\tdataReceived: function () {\n\t\t\t\t\t\toViewModel.setProperty("/busy", false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t_onBindingChange: function () {\n\t\t\tvar oView = this.getView(),\n\t\t\t\toElementBinding = oView.getElementBinding();\n\t\t\t// No data for the binding\n\t\t\t/*\t\t\tif (!oElementBinding.getBoundContext()) {\n\t\t\t\t\t\t\tthis.getRouter().getTargets().display("detailObjectNotFound");\n\t\t\t\t\t\t\t// if object could not be found, the selection in the master list\n\t\t\t\t\t\t\t// does not make sense anymore.\n\t\t\t\t\t\t\tthis.getOwnerComponent().oListSelector.clearMasterListSelection();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}*/\n\t\t\tvar sPath = oElementBinding.getPath(),\n\t\t\t\toResourceBundle = this.getResourceBundle(),\n\t\t\t\toObject = oView.getModel().getObject(sPath),\n\t\t\t\tsObjectId = oObject.Schiffsnummer,\n\t\t\t\tsObjectName = oObject.Name,\n\t\t\t\toViewModel = this.getModel("rapportView");\n\t\t\t//this.getOwnerComponent().oListSelector.selectAListItem(sPath);\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\tvar oSignature = oContext.getProperty("Signatur");\n\t\t\tthis._createSignatureModel(oSignature);\n\t\t\tthis._createTarifModel();\n\t\t\tthis._createSchiffsModel();\n\t\t\tthis._createDebitorModel();\n\t\t\t/*if(this.getView().getModel().hasPendingChanges() && !this.getView().getModel("rapportView").getProperty("/newRapport")){\n\t\t\t\tthis.getView().getModel().resetChanges();\n\t\t\t}*/\n\t\t\tthis._updateTarife(); //oViewModel.setProperty("/shareSendEmailSubject", oResourceBundle.getText("shareSendEmailObjectSubject", [sObjectId]));\n\t\t\t/*oViewModel.setProperty("/shareSendEmailMessage", oResourceBundle.getText("shareSendEmailObjectMessage", [\n\t\t\t\tsObjectName,\n\t\t\t\tsObjectId,\n\t\t\t\tlocation.href\n\t\t\t]\n\t\t\t));*/\n\t\t\tthis._setFahrtrichtung();\n\t\t\t// Bei annullierten Rapporten löschvermerk ausblenden\n\t\t\tif (oContext.getProperty("Loevm") === true) {\n\t\t\t\tthis.getView().getModel("rapportView").setProperty("/annullierenVisible", false);\n\n\t\t\t}\n\t\t\t//if \n\t\t},\n\t\t_onMetadataLoaded: function () {\n\t\t\t// Store original busy indicator delay for the detail view\n\t\t\tvar iOriginalViewBusyDelay = this.getView().getBusyIndicatorDelay(),\n\t\t\t\toViewModel = this.getModel("rapportView");\n\t\t\t// Make sure busy indicator is displayed immediately when\n\t\t\t// detail view is displayed for the first time\n\t\t\toViewModel.setProperty("/delay", 0);\n\t\t\t// Binding the view will set it to not busy - so the view is always busy if it is not bound\n\t\t\toViewModel.setProperty("/busy", true);\n\t\t\t// Restore original busy indicator delay for the detail view\n\t\t\toViewModel.setProperty("/delay", iOriginalViewBusyDelay);\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\tonCancel: function () {\n\t\t\tvar oViewModel = this.getModel("rapportView");\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\tvar schiffsnr = oContext.getProperty("EniNr");\n\t\t\tthis.onSignatureReset();\n\t\t\tthis._destory(false);\n\n\t\t\tif (oViewModel.getProperty("/reporting") === true) {\n\t\t\t\tthis.getRouter().navTo("showReportingRoute", {}, true);\n\t\t\t} else {\n\t\t\t\tthis.getRouter().navTo("object", {\n\t\t\t\t\tobjectId: schiffsnr\n\t\t\t\t}, true);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\tonSave: function () {\n\t\t\tvar error = false;\n\t\t\tvar oRapportModel = this.getModel();\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\tvar oSignature = $("#signature");\n\t\t\tif (oSignature) {\n\t\t\t\tvar oSignatureBase30 = oSignature.jSignature("getData", "base30");\n\t\t\t\tif (oSignatureBase30) {\n\t\t\t\t\tvar isSignatureProvided = oSignatureBase30[1].length > 1 ? true : false;\n\t\t\t\t\tif (isSignatureProvided) {\n\t\t\t\t\t\toRapportModel.setProperty("Signatur", oSignatureBase30[1], oContext);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toRapportModel.setProperty("Signatur", null, oContext);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar oSignaturImage = oSignature.jSignature("getData", "image");\n\t\t\t\t// var oSignaturImage = oSignature.jSignature("getData", "image");\n\t\t\t\tif (oSignaturImage) {\n\t\t\t\t\tvar isSignatureProvidedImage = oSignaturImage[1].length > 1 ? true : false;\n\t\t\t\t\tif (isSignatureProvidedImage) {\n\t\t\t\t\t\toRapportModel.setProperty("Signaturimage", oSignaturImage[1], oContext);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toRapportModel.setProperty("Signaturimage", null, oContext);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar minDate = new Date();\n\t\t\tminDate.setDate(minDate.getDate() - 2); //Lotsenrapporte nur bis und mit Vortag erfassbar\n\t\t\tif (oContext.getProperty("Datum") >= new Date() || (oContext.getProperty("Datum").toDateString() === new Date().toDateString() &&\n\t\t\t\t\tthis.formatter.time(new Date(oContext.getProperty("Zeit/ms"))) >= this.formatter.time(this.formatter.UTCTimeToLocale(new Date()))\n\t\t\t\t) // Datum in der Zukunft \n\t\t\t\t//this.formatter.time(new Date(oContext.getProperty("Zeit/ms"))) >= this.formatter.time(new Date())) // Datum in der Zukunft  \n\n\t\t\t) {\n\n\t\t\t\tsap.m.MessageBox.show("Der Lotsenrapport darf nicht in die Zukunft erfasst werden! \\ Bitte das Datum anpassen", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\ttitle: "Fehler" //,\n\t\t\t\t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t});\n\t\t\t} else if (oContext.getProperty("Datum") < minDate && //Lotsenrapporte nur bis und mit Vortag erfassbar\n\t\t\t\t!this.getModel("rapportView").getProperty("/poweruser") // Ausnahme für \n\t\t\t) {\n\t\t\t\tsap.m.MessageBox.show("Der Lotsenrapport nicht mehr als 1 Tag in die Vergangeheit erfasst werden! \\ Bitte das Datum anpassen", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\ttitle: "Fehler" //,\n\t\t\t\t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tif ((!oContext.getProperty("Signatur") // Muss unterschrieben sein \n\t\t\t\t\t\t&& !this.getModel("rapportView").getProperty("/poweruser") // oder Poweruser \n\t\t\t\t\t) || !this.getModel("rapportView").getProperty("/confirmed")) { // \n\t\t\t\t\t//!this.getView().byId("__boxCheckConfirm0").getSelected()) { // \n\n\t\t\t\t\tsap.m.MessageBox.show("Der Lotsenrapport muss vor dem Speichern bestätigt und unterschrieben werden!", {\n\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\t\ttitle: "Fehler" //,\n\t\t\t\t\t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t\t});\n\t\t\t\t} else {\n\n\t\t\t\t\tif (!oContext.getProperty("Bemerkung") && !this.getModel("Debitor").getProperty("/d/Kunnr")) { // \n\t\t\t\t\t\t//!this.getView().byId("__boxCheckConfirm0").getSelected()) { // \n\n\t\t\t\t\t\tsap.m.MessageBox.show("Rechnungsadresse unbekannt. Bitte Rechnungsadresse ins Bemerkungsfeld schreiben!", {\n\t\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\t\t\ttitle: "Fehler" //,\n\t\t\t\t\t\t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t\t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this.getModel("rapportView").getProperty("/total") === 0) { // \n\t\t\t\t\t\t\t//!this.getView().byId("__boxCheckConfirm0").getSelected()) { // \n\n\t\t\t\t\t\t\tsap.m.MessageBox.show("Bitte eine Leistung auswählen!", {\n\t\t\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\t\t\t\ttitle: "Fehler" //,\n\t\t\t\t\t\t\t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t\t\t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// // \t\t\t\t\tvar dateTime = new Date();\n\t\t\t\t\t\t\t// // ( dateTime.getTime() - dateTime.getTimezoneOffset() * 60000 )\n\n\t\t\t\t\t\t\t// // die Zeit wird beim Lesen des Models in MS umgewandelt und muss aber beim speichern manuell in EdmTime umgewandelt werden, da das nicht wieder automatisch gemacht wird\n\t\t\t\t\t\t\t// //oRapportModel.setProperty("Zeit", this.formatter.time(new Date( oContext.getProperty("Zeit/ms") - new Date().getTimezoneOffset() * 60000 )), oContext);\n\t\t\t\t\t\t\t// oRapportModel.setProperty("Zeit", this.formatter.time(new Date(oContext.getProperty("Zeit/ms"))), oContext);\n\t\t\t\t\t\t\t// //\t\t\toRapportModel.attachEventOnce("batchRequestCompleted", jQuery.proxy(this._submitSuccess, this));\n\t\t\t\t\t\t\t// //\t\t\toRapportModel.attachEventOnce("batchRequestFailed", jQuery.proxy(this._submitError, this));\n\t\t\t\t\t\t\t// oRapportModel.submitChanges({\n\t\t\t\t\t\t\t// \tsuccess: jQuery.proxy(this._submitSuccess, this),\n\t\t\t\t\t\t\t// \terror: jQuery.proxy(this._submitError, this)\n\t\t\t\t\t\t\t// });\n\n\t\t\t\t\t\t\tif (this.getModel("rapportView").getProperty("/display_ul") === true &&\n\t\t\t\t\t\t\t\t!this.getModel("rapportView").getProperty("/confirmed_ul")) {\n\n\t\t\t\t\t\t\t\tsap.m.MessageBox.show("Bitte technischen Zustand für Überlänge bestätigen!", {\n\t\t\t\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\t\t\t\t\ttitle: "Fehler" //,\n\t\t\t\t\t\t\t\t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t\t\t\t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// \t\t\t\t\tvar dateTime = new Date();\n\t\t\t\t\t\t\t\t// ( dateTime.getTime() - dateTime.getTimezoneOffset() * 60000 )\n\n\t\t\t\t\t\t\t\t// die Zeit wird beim Lesen des Models in MS umgewandelt und muss aber beim speichern manuell in EdmTime umgewandelt werden, da das nicht wieder automatisch gemacht wird\n\t\t\t\t\t\t\t\t//oRapportModel.setProperty("Zeit", this.formatter.time(new Date( oContext.getProperty("Zeit/ms") - new Date().getTimezoneOffset() * 60000 )), oContext);\n\t\t\t\t\t\t\t\toRapportModel.setProperty("Zeit", this.formatter.time(new Date(oContext.getProperty("Zeit/ms"))), oContext);\n\t\t\t\t\t\t\t\t//\t\t\toRapportModel.attachEventOnce("batchRequestCompleted", jQuery.proxy(this._submitSuccess, this));\n\t\t\t\t\t\t\t\t//\t\t\toRapportModel.attachEventOnce("batchRequestFailed", jQuery.proxy(this._submitError, this));\n\t\t\t\t\t\t\t\toRapportModel.submitChanges({\n\t\t\t\t\t\t\t\t\tsuccess: jQuery.proxy(this._submitSuccess, this),\n\t\t\t\t\t\t\t\t\terror: jQuery.proxy(this._submitError, this)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonSignatureReset: function () {\n\t\t\tvar oViewModel = this.getModel("rapportView");\n\t\t\t// Model Korrigieren\n\t\t\tvar initSignature = oViewModel.getProperty("/initSignature");\n\t\t\tif (initSignature === true) {\n\t\t\t\t$("#signature").jSignature("clear");\n\t\t\t}\n\t\t},\n\t\t_initSignature: function () {\n\t\t\tvar oViewModel = this.getModel("rapportView");\n\t\t\tvar initSignature = oViewModel.getProperty("/initSignature");\n\t\t\tif (initSignature === false) {\n\t\t\t\tvar oSignaturePanel = this.getView().byId("signaturePanel");\n\t\t\t\tvar oSignatureDiv = new sap.ui.core.HTML("signature", {\n\t\t\t\t\t// the static content as a long string literal\n\t\t\t\t\t// content: "<div style=\'width: 340px; height: 128px; border: 1px solid black\'></div>",\n\t\t\t\t\t//content: "<div style=\'width: 340px; height: 100%; border: 1px solid black\'></div>",\n\t\t\t\t\t// content: "<div id="parentofsignature style=\'width: 340px; height: 85px; border: 1px solid black\'></div>",\n\t\t\t\t\tcontent: "<div id=\'signatureparent\' class=\'signature\' ><div id=\'signature\' ></div> </div>",\n\n\t\t\t\t\t//preferDOM : true,\n\t\t\t\t\tafterRendering: function (e) {\n\t\t\t\t\t\t// Init darf nur einmal aufgerufen\n\t\t\t\t\t\tif (this.init === true) {\n\t\t\t\t\t\t\t$("#signature").jSignature("init");\n\t\t\t\t\t\t\tthis.init = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$("#signature").jSignature("clear");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//var canvas = $(\'.jSignature\')[0];\n\t\t\t\t\t\t//var ctx = canvas.getContext(\'2d\');\n\n\t\t\t\t\t\t//ctx.fillStyle = \'#FFFFFF\'; /// set white fill style\n\t\t\t\t\t\t//ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\t\t\tif (this.getBindingContext()) {\n\t\t\t\t\t\t\tvar oSignature = this.getBindingContext().getProperty("Signatur");\n\t\t\t\t\t\t\tif (oSignature) {\n\t\t\t\t\t\t\t\tvar signatureArray = [\n\t\t\t\t\t\t\t\t\t"image/jsignature;base30",\n\t\t\t\t\t\t\t\t\toSignature\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t$("#signature").jSignature("setData", "data:" + signatureArray.join(","));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\toSignatureDiv.init = true;\n\t\t\t\tif (oSignaturePanel !== null) {\n\t\t\t\t\toSignatureDiv.placeAt(oSignaturePanel);\n\t\t\t\t}\n\t\t\t\toViewModel.setProperty("/initSignature", true);\n\t\t\t}\n\t\t},\n\t\t_updateTarife: function () {\n\t\t\t// Ermitteln der Tarife \n\n\t\t\tvar oRapporteModel = this.getView().getBindingContext();\n\t\t\tvar date = oRapporteModel.getProperty("Datum").toISOString().slice(0, -1);\n\t\t\tvar time = this.formatter.time(new Date(oRapporteModel.getProperty("Zeit/ms")));\n\t\t\t//var URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSet(Datum=datetime\'" + date + "\',Tarifart=\'\',Zeit=time\'" + time + "\')";\n\n\t\t\tvar oTarifModel = this.getView().getModel("tarifeSet");\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSet";\n\t\t\t/*\t\tif (oRapporteModel.getProperty("Feiertagszuschlag")) {\n\t\t\t\t\t\tURL = URL + "(\'FR\')";\n\t\t\t\t\t} else if (oRapporteModel.getProperty("Samstagszuschlag")) {\n\t\t\t\t\t\tURL = URL + "(\'SA\')";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tURL = URL + "(\'NO\')";\n\t\t\t\t\t}*/\n\n\t\t\tvar tarifArt;\n\t\t\tif (oRapporteModel.getProperty("Feiertagszuschlag")) {\n\t\t\t\t//URL = URL + "(Datum=datetime\'" + date + "\',Tarifart=\'FR\',Zeit=time\'" + time + "\')";\n\t\t\t\ttarifArt = "FR";\n\t\t\t} else if (oRapporteModel.getProperty("Samstagszuschlag")) {\n\t\t\t\t//URL = URL + "(Datum=datetime\'" + date + "\',Tarifart=\'SA\',Zeit=time\'" + time + "\')";\n\t\t\t\ttarifArt = "SA";\n\t\t\t} else {\n\t\t\t\t//URL = URL + "(Datum=datetime\'" + date + "\',Tarifart=\'NO\',Zeit=time\'" + time + "\')";\n\t\t\t\ttarifArt = "NO";\n\t\t\t}\n\t\t\tvar URL = URL + "(Datum=datetime\'" + date + "\',Tarifart=\'" + tarifArt + "\',Zeit=time\'" + time + "\')";\n\n\t\t\toTarifModel.loadData(URL, true, false);\n\t\t\tthis.setModel(oTarifModel, "tarifeSet");\n\t\t\tthis._calc();\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\t_calc: function () {\n\t\t\tvar oRapporteContext = this.getView().getBindingContext();\n\t\t\tvar oRapporteModel = this.getView().getModel();\n\t\t\tvar oTarifModel = this.getView().getModel("tarifeSet");\n\t\t\t// Löschen der Radiobuttons wenn Stunden bei Allgemeine Dienstleistung mitgegeben werden\n\t\t\t// Gemäss meeting von 27.04. darf jetzt doch eine Strecke + Allgemeine Dienstleistung zusammen in einem Rapport verrechnet werden.\n\n\t\t\t// rechnen des Totalbetrags\n\t\t\tvar total = 0;\n\t\t\tthis.getView().getModel("rapportView").setProperty("/total", total);\n\t\t\tthis.getView().getModel("rapportView").setProperty("/display_ul", false); // standardmässig ausblenden\n\t\t\tif (oRapporteContext.getProperty("MrbU2000t")) {\n\t\t\t\ttotal = parseFloat(oTarifModel.getProperty("/d/MrbU2000t"));\n\t\t\t}\n\t\t\tif (oRapporteContext.getProperty("MrbUe2000t")) {\n\t\t\t\ttotal = parseFloat(total) + parseFloat(oTarifModel.getProperty("/d/MrbUe2000t"));\n\t\t\t}\n\t\t\tif (oRapporteContext.getProperty("BRU125m")) {\n\t\t\t\ttotal = total + parseFloat(oTarifModel.getProperty("/d/BRU125m"));\n\t\t\t\tthis.getView().getModel("rapportView").setProperty("/display_ul", true); // bei Schiffen über 125 m anzeigen\n\t\t\t}\n\t\t\tif (oRapporteContext.getProperty("BRSchubverband")) {\n\t\t\t\ttotal = parseFloat(total) + parseFloat(oTarifModel.getProperty("/d/BRSchubverband"));\n\t\t\t\tthis.getView().getModel("rapportView").setProperty("/display_ul", true); // bei koppelverbänden anzeigen\n\t\t\t}\n\t\t\tif (oRapporteContext.getProperty("BaAug")) {\n\t\t\t\ttotal = parseFloat(total) + parseFloat(oTarifModel.getProperty("/d/BaAug"));\n\t\t\t}\n\t\t\tif (oRapporteContext.getProperty("BirAug")) {\n\t\t\t\ttotal = parseFloat(total) + parseFloat(oTarifModel.getProperty("/d/BirAug"));\n\t\t\t}\n\t\t\tif (parseFloat(oRapporteContext.getProperty("AllgemeineDienstleistung"), 10) !== 0 && oRapporteContext.getProperty(\n\t\t\t\t\t"AllgemeineDienstleistung") !== "" && oRapporteContext.getProperty("AllgemeineDienstleistung") != null) {\n\t\t\t\ttotal = parseFloat(total) + parseFloat(oTarifModel.getProperty("/d/AllgemeineDienstleistung")) * parseFloat(oRapporteContext.getProperty(\n\t\t\t\t\t"AllgemeineDienstleistung"));\n\t\t\t}\n\t\t\tif (oRapporteContext.getProperty("NoBill")) {\n\t\t\t\ttotal = "keine Fakturierung";\n\t\t\t}\n\t\t\t//this.getView().byId("__Total").setProperty("text", total + " CHF");\n\t\t\tthis.getView().getModel("rapportView").setProperty("/total", total);\n\t\t},\n\t\t_createSignatureModel: function (oSignature) {\n\t\t\t// Model zum handling der Signatur erzeugen\n\t\t\tvar oSignatureModel = new JSONModel({\n\t\t\t\tisFilterBarVisible: false,\n\t\t\t\tfilterBarLabel: "",\n\t\t\t\tdelay: 0,\n\t\t\t\ttitle: this.getResourceBundle().getText("confirmationsTitleCount ", [0]),\n\t\t\t\tnoDataText: this.getResourceBundle().getText("confirmationsListNoDataText ")\n\t\t\t});\n\t\t\tthis.setModel(oSignatureModel, "Signature");\n\t\t\tthis._initSignature();\n\t\t},\n\t\t_createTarifModel: function () {\n\t\t\t// Model zum Lesen der Tarife erzeugen\n\t\t\tvar oTarifModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\t// var URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSet(\'NO\')";\n\t\t\tthis.setModel(oTarifModel, "tarifeSet");\n\t\t\tthis._updateTarifeNewDate();\n\t\t\t/*\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\t\t\t\tvar date = oContext.getProperty("Datum").toISOString().slice(0, -1);\n\t\t\t\t\t\tvar time = this.formatter.time(new Date(oContext.getProperty("Zeit/ms")));\n\t\t\t\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSet(Datum=datetime\'" + date + "\',Tarifart=\'\',Zeit=time\'" + time + "\')";\n\t\t\t\t\t\t\n\t\t\t\t\t\toTarifModel.loadData(URL, true, false);\n\t\t\t\t\t\tthis.setModel(oTarifModel, "tarifeSet");*/\n\t\t},\n\t\t_getPegel: function (atype) {\n\t\t\t// Model zum Lesen der Tarife erzeugen\n\t\t\tvar oPegelModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\tif (atype === "Pegel") {\n\t\t\t\tvar date = this.formatter.UTCTimeToLocale(oContext.getProperty("Datum")).toJSON().slice(0, -1);\n\t\t\t\tvar time = this.formatter.time(new Date(oContext.getProperty("Zeit/ms")));\n\t\t\t} else if (atype === "PegelTo") {\n\t\t\t\t//\t\t\t\tdate = this.formatter.UTCTimeToLocale(oContext.getProperty("DatumTo")).toJSON().slice(0, -1);\n\t\t\t\t//\t\t\t\ttime = this.formatter.time(new Date(oContext.getProperty("ZeitTo/ms")));\n\t\t\t}\n\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/PegelSet(Pegeldatum=datetime\'" + date + "\',Pegelzeit=time\'" + time + "\')";\n\t\t\toPegelModel.loadData(URL, true, false);\n\t\t\tvar pegelstand = oPegelModel.getProperty("/d/Pegelstand");\n\t\t\tvar oRapporteModel = this.getView().getModel();\n\n\t\t\toRapporteModel.setProperty(atype, pegelstand, oContext);\n\t\t\t// oRapporteModel.setProperty("Samstagszuschlag", false, oContext);\n\n\t\t},\n\t\t_updateTarifeNewDate: function () {\n\t\t\tvar oTarifModel = this.getView().getModel("tarifeSet");\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\t//var date = oContext.getProperty("Datum").toISOString().slice(0, -1);\n\t\t\tvar date = this.formatter.UTCTimeToLocale(oContext.getProperty("Datum")).toJSON().slice(0, -1);\n\n\t\t\tvar time = this.formatter.time(new Date(oContext.getProperty("Zeit/ms")));\n\t\t\t//var tzoffset = (new Date()).getTimezoneOffset() * 60000; //offset in milliseconds\n\t\t\t//var localISOTime = (new Date(Date.now() - tzoffset)).toISOString().slice(0,-1);\n\t\t\t//var time = this.formatter.time(new Date(oContext.getProperty("Zeit/ms")) + tzoffset );\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSet(Datum=datetime\'" + date + "\',Tarifart=\'\',Zeit=time\'" + time + "\')";\n\t\t\t//var URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSet(Datum=\'" + date + "\',Tarifart=\'\',Zeit=\'" + time + "\')";\n\t\t\t//var URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSet(Datum=datetime\'2017-07-01T00:00:00\',Tarifart=\'\',Zeit=time\'PT07H28M45S\')";\n\n\t\t\toTarifModel.loadData(URL, true, false);\n\n\t\t\tvar tarifart = oTarifModel.getProperty("/d/Tarifart");\n\t\t\tvar oRapporteModel = this.getView().getModel();\n\t\t\tswitch (tarifart) {\n\t\t\tcase \'FR\':\n\t\t\t\toRapporteModel.setProperty("Feiertagszuschlag", true, oContext);\n\t\t\t\toRapporteModel.setProperty("Samstagszuschlag", false, oContext);\n\t\t\t\tbreak;\n\t\t\tcase \'SA\':\n\t\t\t\toRapporteModel.setProperty("Samstagszuschlag", true, oContext);\n\t\t\t\toRapporteModel.setProperty("Feiertagszuschlag", false, oContext);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\toRapporteModel.setProperty("Samstagszuschlag", false, oContext);\n\t\t\t\toRapporteModel.setProperty("Feiertagszuschlag", false, oContext);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.setModel(oTarifModel, "tarifeSet");\n\t\t\tthis._getPegel("Pegel");\n\t\t},\n\t\t_createSchiffsModel: function () {\n\t\t\t// Lesen der Schiffsdaten\n\t\t\tvar oSchiff = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\tvar sSchiffsNummer = this.getView().getBindingContext().getProperty("EniNr");\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/SchiffeSet(\'" + sSchiffsNummer + "\')";\n\t\t\toSchiff.loadData(URL, true, false);\n\n\t\t\tvar laenge = oSchiff.getProperty("/d/Laenge");\n\t\t\tvar tragfaehigkeit = oSchiff.getProperty("/d/Tragfaehigkeit");\n\t\t\tif (laenge == 0 || tragfaehigkeit == 0) {\n\t\t\t\tthis.getView().getModel("rapportView").setProperty("/gr_2000t_110m", true);\n\t\t\t\tthis.getView().getModel("rapportView").setProperty("/gr_2000t_100m", true);\n\t\t\t\tthis.getView().getModel("rapportView").setProperty("/kl_2000t", true);\n\t\t\t} else {\n\t\t\t\tif (laenge > 110 || (laenge > 110 && tragfaehigkeit >= 2000)) {\n\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/gr_2000t_110m", true);\n\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/gr_2000t_100m", false);\n\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/kl_2000t", false);\n\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/kl_2000t_110m", false);\n\t\t\t\t} else {\n\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/kl_2000t_110m", true);\n\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/gr_2000t_110m", false);\n\t\t\t\t\t// in else verschoben \n\t\t\t\t\tif (laenge > 100 || tragfaehigkeit > 2000) {\n\t\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/gr_2000t_100m", true);\n\t\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/kl_2000t", false);\n\t\t\t\t\t} else if (tragfaehigkeit <= 2000) {\n\t\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/kl_2000t", true);\n\t\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/gr_2000t_110m", false);\n\t\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/gr_2000t_100m", false);\n\t\t\t\t\t\t// \t\t\t\tkl_2000t: false,\n\t\t\t\t\t\t// gr_2000t_100m: false,\n\t\t\t\t\t\t// gr_2000t_110m: false,\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/gr_2000t_110m", true);\n\t\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/gr_2000t_100m", true);\n\t\t\t\t\t\tthis.getView().getModel("rapportView").setProperty("/kl_2000t", true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.setModel(oSchiff, "Schiff");\n\t\t},\n\t\t_createDebitorModel: function () {\n\t\t\t// Lesen der Debiorendaten zum Schiff\n\t\t\tvar oDebitor = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\tvar sSchiffsNummer = this.getView().getBindingContext().getProperty("EniNr");\n\t\t\tvar sUrlDebi = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/SchiffeSet(\'" + sSchiffsNummer + "\')/Debitoren";\n\t\t\toDebitor.loadData(sUrlDebi, true, false);\n\t\t\tthis.setModel(oDebitor, "Debitor");\n\t\t},\n\t\t_getBenutzer: function () {\n\t\t\t// Ermitteln des Lotsennamens\n\t\t\tvar oBenutzerModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/BenutzerSet(\'1\')";\n\t\t\toBenutzerModel.loadData(URL, true, false);\n\t\t\tthis.getView().getModel("rapportView").setProperty("/lotsenname", oBenutzerModel.getProperty("/d/Firstname") + " " + oBenutzerModel\n\t\t\t\t.getProperty("/d/Lastname"));\n\t\t\tthis.getView().getModel("rapportView").setProperty("/poweruser", oBenutzerModel.getProperty("/d/Ispoweruser"));\n\t\t\treturn oBenutzerModel.getProperty("/d/Firstname") + " " + oBenutzerModel.getProperty("/d/Lastname");\n\t\t},\n\t\t_destory: function (bSave) {\n\t\t\t// Aufräumen\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\tvar oRapportModel = this.getView().getModel();\n\t\t\tif (bSave === false && this.getView().getModel("rapportView").getProperty("/newRapport")) {\n\t\t\t\toRapportModel.deleteCreatedEntry(oContext);\n\t\t\t}\n\t\t\toRapportModel.resetChanges();\n\t\t\toRapportModel.updateBindings();\n\t\t\tthis.getView().setModel(oRapportModel);\n\t\t\tthis.getView().getModel("tarifeSet").destroy();\n\t\t\tthis.getView().getModel("Schiff").destroy();\n\t\t\t//this.getView().getModel("rapportView").destroy();\n\t\t\tthis.getView().unbindElement();\n\t\t},\n\t\t_resetModel: function (oData) {\n\t\t\tif (this.getView().getModel().hasPendingChanges()) {\n\t\t\t\tthis.getView().getModel().resetChanges();\n\t\t\t}\n\t\t},\n\t\t_submitSuccess: function (oData) {\n\t\t\tvar oViewModel = this.getModel("rapportView");\n\t\t\tsap.m.MessageToast.show("Rapport wurde erfolgreich gespeichert");\n\t\t\toViewModel.setProperty("/newRapport", false);\n\t\t\tvar schiffsnr = this.getView().getBindingContext().getProperty("EniNr");\n\t\t\tthis._destory(true);\n\n\t\t\t// alte navigation\n\t\t\t// this.getRouter().navTo("object", {\n\t\t\t// \tobjectId: schiffsnr\n\t\t\t// }, true);\n\n\t\t\tif (oViewModel.getProperty("/reporting") === true) {\n\t\t\t\tthis.getRouter().navTo("showReportingRoute", {}, true);\n\t\t\t} else {\n\t\t\t\tthis.getRouter().navTo("object", {\n\t\t\t\t\tobjectId: schiffsnr\n\t\t\t\t}, true);\n\t\t\t}\n\t\t},\n\t\t_submitError: function () {\n\t\t\tsap.m.MessageToast.show("Fehler beim speichern des Rapports");\n\t\t\t// \t\t sap.m.MessageBox.show("Fehler beim speichern des Rapports!", {\n\t\t\t//     icon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t//     title: "Fehler"//,\n\t\t\t//     //actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t//     //onClose: function(oAction) { error = true; } \n\t\t\t//}\t\n\t\t\t//);\n\t\t},\n\t\t_logChange: function (sMethod) {\n\t\t\tif (this.getView().getModel().hasPendingChanges() || this.getView().getModel().hasPendingRequests()) {\n\t\t\t\tjQuery.sap.log.error(sMethod + " " + "Rapport: " + this.getView().getBindingContext().getProperty("Rapportid") + "SchiffNr" + this\n\t\t\t\t\t.getView().getBindingContext().getProperty("EniNr"));\n\t\t\t};\n\t\t},\n\t\t_resetRadioButtons: function (oRapporteModel, oRapporteContext) {\n\t\t\toRapporteModel.setProperty("MrbU2000t", false, oRapporteContext);\n\t\t\toRapporteModel.setProperty("MrbUe2000t", false, oRapporteContext);\n\t\t\toRapporteModel.setProperty("BRU125m", false, oRapporteContext);\n\t\t\toRapporteModel.setProperty("BRSchubverband", false, oRapporteContext);\n\t\t\toRapporteModel.setProperty("BaAug", false, oRapporteContext);\n\t\t\toRapporteModel.setProperty("BirAug", false, oRapporteContext);\n\t\t\toRapporteModel.setProperty("AllgemeineDienstleistung", 0, oRapporteContext);\n\t\t\tthis._calc();\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\tonAnnullieren: function () {\n\t\t\t/*\t\t\tvar bCompact = !!this.getView().$().closest(".sapUiSizeCompact").length;\n\t\t\t\t\t\tsap.m.MessageBox.confirm(\n\t\t\t\t\t\t\t"Wollen Sie den Lotsenrapport wirklich annullieren?", {\n\t\t\t\t\t\t\t\tstyleClass: bCompact ? "sapUiSizeCompact" : ""\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);*/\n\n\t\t\tsap.m.MessageBox.confirm(\n\t\t\t\t"Wollen Sie den Lotsenrapport wirklich annullieren?.", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.QUESTION,\n\t\t\t\t\ttitle: "Annullation",\n\t\t\t\t\tactions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\tonClose: jQuery.proxy(function (oAction) {\n\t\t\t\t\t\tif (oAction === sap.m.MessageBox.Action.YES) {\n\n\t\t\t\t\t\t\t//This code was generated by the layout editor.\n\t\t\t\t\t\t\tvar oRapportModel = this.getModel();\n\t\t\t\t\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\t\t\t\t\t//oRapportModel.setProperty("Zeit", this.formatter.time(new Date(oContext.getProperty("Zeit/ms"))), oContext);\n\t\t\t\t\t\t\toRapportModel.setProperty("Loevm", true, oContext);\n\t\t\t\t\t\t\toRapportModel.setProperty("Zeit", this.formatter.time(new Date(oContext.getProperty("Zeit/ms"))), oContext);\n\t\t\t\t\t\t\t//\t\t\toRapportModel.attachEventOnce("batchRequestCompleted", jQuery.proxy(this._submitSuccess, this));\n\t\t\t\t\t\t\t//\t\t\toRapportModel.attachEventOnce("batchRequestFailed", jQuery.proxy(this._submitError, this));\n\t\t\t\t\t\t\toRapportModel.submitChanges({\n\t\t\t\t\t\t\t\tsuccess: jQuery.proxy(this._submitSuccess, this),\n\t\t\t\t\t\t\t\terror: jQuery.proxy(this._submitError, this)\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this)\n\t\t\t\t}\n\t\t\t);\n\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\tonResetSelection: function () {\n\t\t\t//This code was generated by the layout editor.\n\t\t\tvar oRapporteContext = this.getView().getBindingContext();\n\t\t\tvar oRapporteModel = this.getView().getModel();\n\t\t\tvar oTarifModel = this.getView().getModel("tarifeSet");\n\n\t\t\tthis._resetRadioButtons(oRapporteModel, oRapporteContext);\n\t\t\toRapporteModel.setProperty("AllgemeineDienstleistung", null, oRapporteContext);\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\t_setFahrtrichtung: function () {\n\t\t\tvar oRapporteContext = this.getView().getBindingContext();\n\t\t\tif (oRapporteContext.getProperty("Talfahrt") === true) {\n\t\t\t\tthis.getView().getModel("rapportView").setProperty("/fahrtrichtung", \'Talfahrt\');\n\t\t\t} else {\n\t\t\t\tthis.getView().getModel("rapportView").setProperty("/fahrtrichtung", \'Bergfahrt\');\n\t\t\t}\n\t\t}\n\n\t});\n});',
"ch/portof/controller/RapportSSB.controller.js":'sap.ui.define([\n\t//\t"sap/ui/core/mvc/Controller"\n\t"ch/portof/controller/BaseController",\n\t"sap/ui/model/json/JSONModel",\n\t"ch/portof/model/formatter",\n\t"ch/portof/controller/ErrorHandler",\n\t"sap/ui/core/routing/History"\n], function (BaseController, JSONModel, formatter, ErrorHandler, History) {\n\t"use strict";\n\treturn BaseController.extend("ch.portof.controller.RapportSSB", {\n\t\t/**\n\t\t * Called when a controller is instantiated and its View controls (if available) are already created.\n\t\t * Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.\n\t\t * @memberOf ch.portof.view.Rapport\n\t\t */\n\t\tformatter: formatter,\n\t\tonInit: function () {\n\t\t\tvar oViewModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0,\n\t\t\t\tinitSignature: false,\n\t\t\t\tpoweruser: false,\n\t\t\t\treporting: false,\n\t\t\t\tnewRapport: false,\n\t\t\t\tchangeMode: false,\n\t\t\t\tannullierenVisible: false,\n\t\t\t\tconfirmed: false,\n\t\t\t\tfahrtrichtung: "",\n\t\t\t\ttotal: 0,\n\t\t\t\tlotsenname: "",\n\t\t\t\teffektiveEinsatzZeit: 0,\n\t\t\t\trapportart: "S", //Schlepp und Schubboot Rapport\n\t\t\t\tpauschalPreis: false, //pauschalpreis bei Material Pauschal\n\t\t\t\tmengenPreis: false\n\t\t\t});\n\t\t\tthis.setModel(oViewModel, "rapportSSBView");\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/changeMode", true);\n\t\t\tthis._getBenutzer();\n\t\t\tthis.getRouter().getRoute("rapportNewSSBRoute").attachMatched(this._onRouteMatchedNew, this);\n\t\t\tthis.getRouter().getRoute("rapportSSBRoute").attachMatched(this._onRouteMatchedOld, this);\n\t\t\tthis.getRouter().getRoute("rapportRouteReport").attachMatched(this._onRouteMatchedReport, this);\n\t\t\tthis.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this));\n\t\t},\n\t\t/**\n\t\t * If the master route was hit (empty hash) we have to set\n\t\t * the hash to to the first item in the list as soon as the\n\t\t * listLoading is done and the first item in the list is known\n\t\t * @private\n\t\t */\n\t\t_onRouteMatchedNew: function (oEvent) {\n\t\t\t//this._resetModel();\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/newRapport", true);\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/changeMode", true);\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/annullierenVisible", false);\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/confirmed", false);\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/reporting", false);\n\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/fahrtrichtung", "");\n\t\t\t//this.getView().getModel("rapportSSBView").setProperty("/poweruser", false);\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/total", 0);\n\t\t\t//this.getView().getModel("rapportSSBView").setProperty("/lotsenname", "");\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/effektiveEinsatzZeit", 0);\n\n\t\t\tvar dateForTime = new Date();\n\t\t\tdateForTime.setYear(1970);\n\t\t\tdateForTime.setMonth(1);\n\t\t\tdateForTime.setDate(1);\n\t\t\t// Annullieren von neuen Rapporten nicht möglich\n\t\t\tvar sObjectId = oEvent.getParameter("arguments").objectId;\n\t\t\tthis.getModel().resetChanges();\n\t\t\t//var dateTime = new Date();\n\t\t\tthis.getModel().metadataLoaded().then(function () {\n\t\t\t\tvar oRapporteModel = this.getView().getModel();\n\t\t\t\tvar onewRapport = oRapporteModel.createEntry("/RapporteSet");\n\t\t\t\toRapporteModel.setProperty("Datum", new Date(), onewRapport);\n\t\t\t\toRapporteModel.setProperty("DatumTo", new Date(), onewRapport);\n\t\t\t\t//keine Zeiten vorschlagen\n\t\t\t\t/*\t\t\t\toRapporteModel.setProperty("ZeitTo", {\n\t\t\t\t\t\t\t\t\t// ms: formatter.UTCTimeToLocale(new Date()).getTime(),\n\t\t\t\t\t\t\t\t\tms: formatter.UTCTimeToLocale(dateForTime).getTime(),\n\t\t\t\t\t\t\t\t\t__edmtype: "Edm.Time"\n\t\t\t\t\t\t\t\t}, onewRapport);*/\n\t\t\t\t// statdessen leer \n\t\t\t\t//RapporteModel.setProperty("ZeitTo", null, onewRapport);\n\t\t\t\toRapporteModel.setProperty("ZeitTo", {\n\t\t\t\t\t\tms: (new Date(0)).getTime(),\n\t\t\t\t\t\t__edmtype: "Edm.Time"\n\t\t\t\t\t},\n\t\t\t\t\tonewRapport);\n\n\t\t\t\t//dateForTime.setHours( dateForTime.getHours() + 1 );\n\n\t\t\t\t//keine Zeiten vorschlagen\n\t\t\t\tdateForTime.setMinutes(dateForTime.getMinutes() - 30);\n\t\t\t\t/*\t\t\t\toRapporteModel.setProperty("Zeit", {\n\t\t\t\t\t\t\t\t\t//ms: formatter.UTCTimeToLocale(new Date()).getTime(),\n\t\t\t\t\t\t\t\t\tms: formatter.UTCTimeToLocale(dateForTime).getTime(),\n\t\t\t\t\t\t\t\t\t__edmtype: "Edm.Time"\n\t\t\t\t\t\t\t\t}, onewRapport);*/\n\t\t\t\t// statdessen leer \n\t\t\t\t// oRapporteModel.setProperty("Zeit", null, onewRapport);\n\t\t\t\toRapporteModel.setProperty("Zeit", {\n\t\t\t\t\t\tms: (new Date(0)).getTime(),\n\t\t\t\t\t\t__edmtype: "Edm.Time"\n\t\t\t\t\t},\n\t\t\t\t\tonewRapport);\n\n\t\t\t\toRapporteModel.setProperty("EniNr", sObjectId, onewRapport);\n\t\t\t\toRapporteModel.setProperty("Lotsenname", this.getModel("rapportSSBView").getProperty("/lotsenname"), onewRapport);\n\t\t\t\toRapporteModel.setProperty("RapportArt", this.getModel("rapportSSBView").getProperty("/rapportart"), onewRapport);\n\t\t\t\toRapporteModel.setProperty("Talfahrt", true, onewRapport);\n\t\t\t\t//oRapporteModel.setProperty("OrtVon", "TNKLP", onewRapport);\n\n\t\t\t\tvar sObjectPath = onewRapport.getPath();\n\t\t\t\tthis._bindView(sObjectPath);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_onRouteMatchedOld: function (oEvent) {\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/newRapport", false);\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/changeMode", false);\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/confirmed", true);\n\t\t\t// Rapport kann nur gespeichert werden wenn Flag gesetzt\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/reporting", false);\n\t\t\t// zum Editeren von bestehenden rapporten hier aktivieren.\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/annullierenVisible", true);\n\t\t\t// Annullieren von gespeicherten Rapporten möglich\n\t\t\tvar sObjectId = oEvent.getParameter("arguments").objectId;\n\t\t\tthis.getModel().metadataLoaded().then(function () {\n\t\t\t\tvar sObjectPath = this.getModel().createKey("RapporteSet", {\n\t\t\t\t\tRapportid: sObjectId\n\t\t\t\t});\n\t\t\t\tthis._bindView("/" + sObjectPath);\n\t\t\t}.bind(this));\n\t\t},\n\t\t_onRouteMatchedReport: function (oEvent) {\n\t\t\t//property reporting setzen und dann normale route für bestehenden Rapport aufrufen\n\t\t\tthis._onRouteMatchedOld(oEvent);\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/reporting", true);\n\t\t},\n\t\t/**\n\t\t * Called when the Controller is destroyed. Use this one to free resources and finalize activities.\n\t\t * @memberOf ch.portof.view.Rapport\n\t\t */\n\t\t//\tonExit: function() {\n\t\t//\n\t\t//\t}\t,\n\t\t/**\n\t\t * Binds the view to the object path. Makes sure that detail view displays\n\t\t * a busy indicator while data for the corresponding element binding is loaded.\n\t\t * @function\n\t\t * @param {string} sObjectPath path to the object to be bound to the view.\n\t\t * @private\n\t\t */\n\t\t_bindView: function (sObjectPath) {\n\t\t\t// Set busy indicator during view binding\n\t\t\tvar oViewModel = this.getModel("rapportSSBView");\n\t\t\t// If the view was not bound yet its not busy, only if the binding requests data it is set to busy again\n\t\t\toViewModel.setProperty("/busy", false);\n\t\t\tthis.getView().bindElement({\n\t\t\t\tpath: sObjectPath,\n\t\t\t\tevents: {\n\t\t\t\t\tchange: this._onBindingChange.bind(this),\n\t\t\t\t\tdataRequested: function () {\n\t\t\t\t\t\toViewModel.setProperty("/busy", true);\n\t\t\t\t\t},\n\t\t\t\t\tdataReceived: function () {\n\t\t\t\t\t\toViewModel.setProperty("/busy", false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t_onBindingChange: function () {\n\t\t\tvar oView = this.getView(),\n\t\t\t\toElementBinding = oView.getElementBinding();\n\t\t\t// No data for the binding\n\t\t\t/*\t\t\tif (!oElementBinding.getBoundContext()) {\n\t\t\t\t\t\t\tthis.getRouter().getTargets().display("detailObjectNotFound");\n\t\t\t\t\t\t\t// if object could not be found, the selection in the master list\n\t\t\t\t\t\t\t// does not make sense anymore.\n\t\t\t\t\t\t\tthis.getOwnerComponent().oListSelector.clearMasterListSelection();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}*/\n\t\t\tvar sPath = oElementBinding.getPath(),\n\t\t\t\toResourceBundle = this.getResourceBundle(),\n\t\t\t\toObject = oView.getModel().getObject(sPath),\n\t\t\t\tsObjectId = oObject.Schiffsnummer,\n\t\t\t\tsObjectName = oObject.Name,\n\t\t\t\toViewModel = this.getModel("rapportSSBView");\n\t\t\t//this.getOwnerComponent().oListSelector.selectAListItem(sPath);\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\t//* Signatur auskommentiert* var oSignature = oContext.getProperty("Signatur");\n\t\t\t//* Signatur auskommentiert* this._createSignatureModel(oSignature);\n\t\t\tthis._createTarifModel();\n\t\t\tthis._createSelTarifModel();\n\t\t\tthis._createOrteModel();\n\t\t\tthis._createSchiffsModel();\n\t\t\tthis._createDebitorModel();\n\t\t\tthis._updateTarife();\n\t\t\t//this._updateTarifeNewDate();\n\t\t\t//this._updateSelTarife();\n\t\t\tthis._setFahrtrichtung();\n\t\t\t// Bei annullierten Rapporten löschvermerk ausblenden\n\t\t\tif (oContext.getProperty("Loevm") === true) {\n\t\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/annullierenVisible", false);\n\t\t\t}\n\t\t},\n\t\t_onMetadataLoaded: function () {\n\t\t\t// Store original busy indicator delay for the detail view\n\t\t\tvar iOriginalViewBusyDelay = this.getView().getBusyIndicatorDelay(),\n\t\t\t\toViewModel = this.getModel("rapportSSBView");\n\t\t\t// Make sure busy indicator is displayed immediately when\n\t\t\t// detail view is displayed for the first time\n\t\t\toViewModel.setProperty("/delay", 0);\n\t\t\t// Binding the view will set it to not busy - so the view is always busy if it is not bound\n\t\t\toViewModel.setProperty("/busy", true);\n\t\t\t// Restore original busy indicator delay for the detail view\n\t\t\toViewModel.setProperty("/delay", iOriginalViewBusyDelay);\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\tonCancel: function () {\n\t\t\tvar oViewModel = this.getModel("rapportSSBView");\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\tvar schiffsnr = oContext.getProperty("EniNr");\n\t\t\t//* Signatur auskommentiert* this.onSignatureReset();\n\t\t\tthis._destory(false);\n\t\t\tif (oViewModel.getProperty("/reporting") === true) {\n\t\t\t\tthis.getRouter().navTo("showReportingRoute", {}, true);\n\t\t\t} else {\n\t\t\t\tthis.getRouter().navTo("object", {\n\t\t\t\t\tobjectId: schiffsnr\n\t\t\t\t}, true);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\tonSave: function () {\n\t\t\tvar error = false;\n\t\t\tvar oRapportModel = this.getModel();\n\t\t\tvar oContext = this.getView().getBindingContext();\n\n\t\t\t/* Signatur auskommentiert*\n\t\t\tvar oSignature = $("#signature");\n\t\t\tif (oSignature) {\n\t\t\t\tvar oSignatureBase30 = oSignature.jSignature("getData", "base30");\n\t\t\t\tif (oSignatureBase30) {\n\t\t\t\t\tvar isSignatureProvided = oSignatureBase30[1].length > 1 ? true : false;\n\t\t\t\t\tif (isSignatureProvided) {\n\t\t\t\t\t\toRapportModel.setProperty("Signatur", oSignatureBase30[1], oContext);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toRapportModel.setProperty("Signatur", null, oContext);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar oSignaturImage = oSignature.jSignature("getData", "image");\n\t\t\t\t// var oSignaturImage = oSignature.jSignature("getData", "image");\n\t\t\t\tif (oSignaturImage) {\n\t\t\t\t\tvar isSignatureProvidedImage = oSignaturImage[1].length > 1 ? true : false;\n\t\t\t\t\tif (isSignatureProvidedImage) {\n\t\t\t\t\t\toRapportModel.setProperty("Signaturimage", oSignaturImage[1], oContext);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toRapportModel.setProperty("Signaturimage", null, oContext);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n*/\n\t\t\tif (!oContext.getProperty("OrtVon")) {\n\t\t\t\tsap.m.MessageBox.show("Bitte Ort von auswählen!", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\ttitle: "Fehler"\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!oContext.getProperty("OrtBis")) {\n\t\t\t\tsap.m.MessageBox.show("Bitte Ort bis auswählen!", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\ttitle: "Fehler"\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!oContext.getProperty("SsbTarif")) {\n\t\t\t\tsap.m.MessageBox.show("Bitte Tarif auswählen!", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\ttitle: "Fehler"\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//if (!oContext.getProperty("SsbMenge") && this.getView().getModel("rapportSSBView").getProperty("/mengenPreis") === true) {\n\t\t\tif ((parseFloat(oContext.getProperty("SsbMenge"), 10) <= 0 || !oContext.getProperty("SsbMenge")) && this.getView().getModel(\n\t\t\t\t\t"rapportSSBView").getProperty("/mengenPreis") === true) {\n\t\t\t\tsap.m.MessageBox.show("Bitte Menge erfassen!", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\ttitle: "Fehler"\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// if ((parseFloat(oContext.getProperty("SsbMenge"), 10) >= 100 && oContext.getProperty("SsbMenge")) && this.getView().getModel(\n\t\t\t// \t\t"rapportSSBView").getProperty("/mengenPreis") === true) {\n\t\t\t// \tsap.m.MessageBox.show("Nur Mengen < 100 zulässig!", {\n\t\t\t// \t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t// \t\ttitle: "Fehler"\n\t\t\t// \t});\n\t\t\t// \treturn;\n\t\t\t// }\n\t\t\t//if (!oContext.getProperty("SsbPauschal") && this.getView().getModel("rapportSSBView").getProperty("/pauschalPreis") === true) {\n\t\t\tif ((parseFloat(oContext.getProperty("SsbPauschal"), 10) <= 0 || !oContext.getProperty("SsbPauschal")) && this.getView().getModel(\n\t\t\t\t\t"rapportSSBView").getProperty(\n\t\t\t\t\t"/pauschalPreis") === true) {\n\t\t\t\tsap.m.MessageBox.show("Bitte Pauschalpreis erfassen!", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\ttitle: "Fehler"\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar minDate = new Date();\n\t\t\tminDate.setDate(minDate.getDate() - 4);\n\t\t\t//Lotsenrapporte nur bis und mit Vortag erfassbar\n\t\t\tif (oContext.getProperty("Datum") >= new Date() || oContext.getProperty("Datum").toDateString() === new Date().toDateString() &&\n\t\t\t\tthis.formatter.time(new Date(oContext.getProperty("Zeit/ms"))) >= this.formatter.time(this.formatter.UTCTimeToLocale(new Date())) // Datum in der Zukunft \n\t\t\t) {\n\t\t\t\tsap.m.MessageBox.show("Der Lotsenrapport darf nicht in die Zukunft erfasst werden!  Bitte das Datum anpassen", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\ttitle: "Fehler" //,\n\t\t\t\t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t});\n\t\t\t} else if (oContext.getProperty("Datum") < minDate && //Lotsenrapporte nur bis und mit Vortag erfassbar\n\t\t\t\t!this.getModel("rapportSSBView").getProperty("/poweruser") // Ausnahme für \n\t\t\t) {\n\t\t\t\tsap.m.MessageBox.show("Der Lotsenrapport darf nicht mehr als 3 Tag in die Vergangeheit erfasst werden!  Bitte das Datum anpassen", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\ttitle: "Fehler" //,\n\t\t\t\t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t});\n\t\t\t} else if (oContext.getProperty("Datum").toDateString() === oContext.getProperty("DatumTo").toDateString() && oContext.getProperty(\n\t\t\t\t\t"Zeit/ms") === oContext.getProperty(\n\t\t\t\t\t"ZeitTo/ms")) {\n\t\t\t\tsap.m.MessageBox.show("Die Start und Endzeit darf nicht identisch sein!", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\ttitle: "Fehler" //,\n\t\t\t\t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t});\n\t\t\t} else if (oContext.getProperty("Datum").toDateString() === oContext.getProperty("DatumTo").toDateString() && oContext.getProperty(\n\t\t\t\t\t"Zeit/ms") >= oContext.getProperty(\n\t\t\t\t\t"ZeitTo/ms")) {\n\t\t\t\tsap.m.MessageBox.show("Die Endzeit darf nicht vor der Startzeit liegen!", {\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\ttitle: "Fehler" //,\n\t\t\t\t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// if (!oContext.getProperty("Signatur") // Muss unterschrieben sein \n\t\t\t\t// \t&& !this.getModel("rapportSSBView").getProperty("/poweruser") // oder Poweruser \n\t\t\t\t// \t|| !this.getModel("rapportSSBView").getProperty("/confirmed")) {\n\t\t\t\t// \t// \n\t\t\t\t// \t//!this.getView().byId("__boxCheckConfirm0").getSelected()) { // \n\t\t\t\t// \tsap.m.MessageBox.show("Der Lotsenrapport muss vor dem Speichern best\\xE4tigt und unterschrieben werden!", {\n\t\t\t\t// \t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t// \t\ttitle: "Fehler" //,\n\t\t\t\t// \t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t// \t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t// \t});\n\t\t\t\t// } else {\n\t\t\t\tif (!oContext.getProperty("Bemerkung") && !this.getModel("Debitor").getProperty("/d/Kunnr")) {\n\t\t\t\t\t// \n\t\t\t\t\t//!this.getView().byId("__boxCheckConfirm0").getSelected()) { // \n\t\t\t\t\tsap.m.MessageBox.show("Rechnungsadresse unbekannt. Bitte Rechnungsadresse ins Bemerkungsfeld schreiben!", {\n\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\t\ttitle: "Fehler" //,\n\t\t\t\t\t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// if (this.getModel("rapportSSBView").getProperty("/total") === 0) {\n\t\t\t\t\t// \t// \n\t\t\t\t\t// \t//!this.getView().byId("__boxCheckConfirm0").getSelected()) { // \n\t\t\t\t\t// \tsap.m.MessageBox.show("Bitte eine Leistung ausw\\xE4hlen!", {\n\t\t\t\t\t// \t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\t// \t\ttitle: "Fehler" //,\n\t\t\t\t\t// \t\t\t//actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\n\t\t\t\t\t// \t\t\t//onClose: function(oAction) { error = true; } \n\t\t\t\t\t// \t});\n\t\t\t\t\t// } else {\n\n\t\t\t\t\t// OData service akzeptiert die daten nicht in im Format edm.time, wie er sie liefert, er akzeptiert und xsd duration \n\t\t\t\t\toRapportModel.setProperty("Zeit", this.formatter.time(new Date(oContext.getProperty("Zeit/ms"))), oContext);\n\t\t\t\t\toRapportModel.setProperty("ZeitTo", this.formatter.time(new Date(oContext.getProperty("ZeitTo/ms"))), oContext);\n\t\t\t\t\toRapportModel.submitChanges({\n\t\t\t\t\t\tsuccess: jQuery.proxy(this._submitSuccess, this),\n\t\t\t\t\t\terror: jQuery.proxy(this._submitError, this)\n\t\t\t\t\t});\n\t\t\t\t\t//}\n\t\t\t\t}\n\t\t\t\t// }\n\t\t\t}\n\t\t},\n\t\tonSignatureReset: function () {\n\t\t\tvar oViewModel = this.getModel("rapportSSBView");\n\t\t\t// Model Korrigieren\n\t\t\tvar initSignature = oViewModel.getProperty("/initSignature");\n\t\t\tif (initSignature === true) {\n\t\t\t\t$("#signature").jSignature("clear");\n\t\t\t}\n\t\t},\n\t\t_initSignature: function () {\n\t\t\tvar oViewModel = this.getModel("rapportSSBView");\n\t\t\tvar initSignature = oViewModel.getProperty("/initSignature");\n\t\t\tif (initSignature === false) {\n\t\t\t\tvar oSignaturePanel = this.getView().byId("signaturePanel");\n\t\t\t\tvar oSignatureDiv = new sap.ui.core.HTML("signature", {\n\t\t\t\t\t// the static content as a long string literal\n\t\t\t\t\tcontent: "<div id=\'signatureparent\' class=\'signature\' ><div id=\'signature\' ></div> </div>",\n\t\t\t\t\tafterRendering: function (e) {\n\t\t\t\t\t\t// Init darf nur einmal aufgerufen\n\t\t\t\t\t\tif (this.init === true) {\n\t\t\t\t\t\t\t$("#signature").jSignature("init");\n\t\t\t\t\t\t\tthis.init = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$("#signature").jSignature("clear");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.getBindingContext()) {\n\t\t\t\t\t\t\tvar oSignature = this.getBindingContext().getProperty("Signatur");\n\t\t\t\t\t\t\tif (oSignature) {\n\t\t\t\t\t\t\t\tvar signatureArray = [\n\t\t\t\t\t\t\t\t\t"image/jsignature;base30",\n\t\t\t\t\t\t\t\t\toSignature\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t$("#signature").jSignature("setData", "data:" + signatureArray.join(","));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\toSignatureDiv.init = true;\n\t\t\t\tif (oSignaturePanel !== null) {\n\t\t\t\t\toSignatureDiv.placeAt(oSignaturePanel);\n\t\t\t\t}\n\t\t\t\toViewModel.setProperty("/initSignature", true);\n\t\t\t}\n\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\t_calc: function () {\n\t\t\tvar oRapporteContext = this.getView().getBindingContext();\n\t\t\tvar oRapporteModel = this.getView().getModel();\n\t\t\tvar oTarifModel = this.getView().getModel("sel_tarifeSet");\n\t\t\tvar lowest_value = oTarifModel.getProperty("/d/KleinsteEinheit");\n\n\t\t\t// rechnen des Totalbetrags\n\t\t\tvar total = 0;\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/total", total);\n\t\t\t// in updateseltarif verschoben da nur bei änderung der art umgestellt werden soll \n\t\t\tif ((this.getView().getModel("rapportSSBView").getProperty("/pauschalPreis") !== true) && (parseFloat(oRapporteContext.getProperty(\n\t\t\t\t\t\t"SsbMenge"), 10) === 0 ||\n\t\t\t\t\toRapporteContext.getProperty("SsbMenge") === "")) {\n\t\t\t\t//this._calcDateDifference_sub();\n\t\t\t\tthis._updateSsbMenge();\n\n\t\t\t}\n\n\t\t\tif (parseFloat(oRapporteContext.getProperty("SsbMenge"), 10) < parseFloat(lowest_value, 10) &&\n\t\t\t\tthis.getView().getModel("rapportSSBView").getProperty("/mengenPreis") === true) {\n\t\t\t\t// Falls die erfasste zeit kleiner als die Mindestzeit ist \n\t\t\t\toRapporteModel.setProperty("SsbMenge", lowest_value, oRapporteContext);\n\t\t\t}\n\n\t\t\t//var SsbTarif = oRapporteContext.getProperty("SsbTarif");\n\t\t\t//if (SsbTarif === "PAUSCHAL") {\n\t\t\tif (this.getView().getModel("rapportSSBView").getProperty("/pauschalPreis") === true) {\n\n\t\t\t\t// if (parseFloat(oRapporteContext.getProperty("SsbPauschal"), 10) !== 0 && oRapporteContext.getProperty(\n\t\t\t\t//  \t\t"SsbMenge") !== "" && oRapporteContext.getProperty("SsbMenge") != null) {\n\t\t\t\ttotal = parseFloat(oRapporteContext.getProperty("SsbPauschal"));\n\t\t\t\t//} else {\n\t\t\t\t// \ttotal = 0;\n\t\t\t\t// }\n\t\t\t} else {\n\t\t\t\tif (parseFloat(oRapporteContext.getProperty("SsbMenge"), 10) !== 0 && oRapporteContext.getProperty(\n\t\t\t\t\t\t"SsbMenge") !== "" && oRapporteContext.getProperty("SsbMenge") != null) {\n\t\t\t\t\ttotal = parseFloat(total) + parseFloat(oTarifModel.getProperty("/d/Preis")) *\n\t\t\t\t\t\tparseFloat(oRapporteContext.getProperty("SsbMenge"));\n\t\t\t\t} else {\n\t\t\t\t\ttotal = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/total", total);\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\t_calcDateDifference: function () {\n\n\t\t\tthis._calcDateDifference_sub();\n\t\t\tvar oTarifModel = this.getView().getModel("sel_tarifeSet");\n\t\t\tif (oTarifModel != null) {\n\t\t\t\tthis._calc();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\t_calcDateDifference_sub: function () {\n\t\t\tvar oRapporteContext = this.getView().getBindingContext();\n\t\t\tvar oRapporteModel = this.getView().getModel();\n\t\t\tvar oTarifModel = this.getView().getModel("sel_tarifeSet");\n\t\t\t// var lowest_value = parseFloat( this.getView().getModel("sel_tarifeSet").getProperty("/d/KleinsteEinheit"), 10);\n\n\t\t\t//var date_from = this.formatter.UTCTimeToLocale(oRapporteContext.getProperty("Datum")).toJSON().slice(0, -1);\n\t\t\tvar date_from = this.formatter.UTCTimeToLocale(oRapporteContext.getProperty("Datum"));\n\t\t\t// var time_from = this.formatter.UTCTimeToLocale(new Date(oRapporteContext.getProperty("Zeit/ms")));\n\t\t\tvar time_from = this.formatter.LocaleTimeToUTC(new Date(oRapporteContext.getProperty("Zeit/ms")));\n\n\t\t\t//var date_to = this.formatter.UTCTimeToLocale(oContext.getProperty("DatumTo")).toJSON().slice(0, -1);\n\t\t\tvar date_to = this.formatter.UTCTimeToLocale(oRapporteContext.getProperty("DatumTo"));\n\t\t\t// var time_to = this.formatter.UTCTimeToLocale(new Date(oRapporteContext.getProperty("ZeitTo/ms")));\n\t\t\tvar time_to = this.formatter.LocaleTimeToUTC(new Date(oRapporteContext.getProperty("ZeitTo/ms")));\n\n\t\t\tvar dateTimeFrom = new Date(date_from.getFullYear(), date_from.getMonth(), date_from.getDate(), time_from.getHours(), time_from.getMinutes(),\n\t\t\t\ttime_from.getSeconds(), time_from.getMilliseconds());\n\t\t\tvar dateTimeTo = new Date(date_to.getFullYear(), date_to.getMonth(), date_to.getDate(), time_to.getHours(), time_to.getMinutes(),\n\t\t\t\ttime_to.getSeconds(), time_to.getMilliseconds());\n\n\t\t\t//var diff = dateTimeTo - dateTimeFrom;\n\t\t\t//\t\t\tvar diff = new Date( Math.abs(dateTimeTo - dateTimeFrom) / 36e5 );\n\n\t\t\tvar oDateFormat = sap.ui.core.format.DateFormat.getTimeInstance({\n\t\t\t\tpattern: "HH:mm",\n\t\t\t\tUTC: true\n\t\t\t});\n\n\t\t\tvar diff_ms = Math.floor(((Math.floor(dateTimeTo / 60000) * 60000) - (Math.floor(dateTimeFrom / 60000) * 60000)) / (36e5 / 100)) *\n\t\t\t\t(36e5 / 100);\n\t\t\t//var diff = oDateFormat.format(new Date( diff_minutes ));\n\t\t\tvar diff = diff_ms / 36e5;\n\t\t\tvar diff_round = Math.ceil(diff_ms / 36e5);\n\n\t\t\tvar old_effective_time = this.getView().getModel("rapportSSBView").getProperty("/effektiveEinsatzZeit");\n\t\t\tif (old_effective_time != diff) {\n\t\t\t\tvar lowest_value;\n\t\t\t\tif (oTarifModel === null) {\n\t\t\t\t\tlowest_value = oTarifModel.getProperty("/d/KleinsteEinheit");\n\t\t\t\t}\n\t\t\t\tif (this.getView().getModel("rapportSSBView").getProperty("/mengenPreis") === true) {\n\t\t\t\t\tif (parseFloat(diff_round, 10) < parseFloat(lowest_value, 10)) {\n\t\t\t\t\t\t// Falls die erfasste zeit kleiner als die Mindestzeit ist \n\t\t\t\t\t\toRapporteModel.setProperty("SsbMenge", lowest_value, oRapporteContext);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toRapporteModel.setProperty("SsbMenge", (diff_round).toString(), oRapporteContext);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/effektiveEinsatzZeit", diff);\n\t\t},\n\t\t_createSignatureModel: function (oSignature) {\n\t\t\t// Model zum handling der Signatur erzeugen\n\t\t\tvar oSignatureModel = new JSONModel({\n\t\t\t\tisFilterBarVisible: false,\n\t\t\t\tfilterBarLabel: "",\n\t\t\t\tdelay: 0,\n\t\t\t\ttitle: this.getResourceBundle().getText("confirmationsTitleCount ", [0]),\n\t\t\t\tnoDataText: this.getResourceBundle().getText("confirmationsListNoDataText ")\n\t\t\t});\n\t\t\tthis.setModel(oSignatureModel, "Signature");\n\t\t\tthis._initSignature();\n\t\t},\n\n\t\t_createOrteModel: function () {\n\t\t\t// Model zum Lesen der Orte erzeugen\n\t\t\tvar oOrteModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\tthis.setModel(oOrteModel, "orteSet");\n\t\t\tthis._updateOrte();\n\t\t},\n\t\t_createTarifModel: function () {\n\t\t\t// Model zum Lesen der Tarife erzeugen\n\t\t\tvar oTarifModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\tthis.setModel(oTarifModel, "tarifeSet");\n\t\t\tthis._updateTarifeNewDate();\n\t\t},\n\t\t_getPegel: function (atype) {\n\t\t\t// Model zum Lesen der Tarife erzeugen\n\t\t\tvar oPegelModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\tif (atype === "Pegel") {\n\t\t\t\tvar date = this.formatter.UTCTimeToLocale(oContext.getProperty("Datum")).toJSON().slice(0, -1);\n\t\t\t\tvar time = this.formatter.time(new Date(oContext.getProperty("Zeit/ms")));\n\t\t\t} else if (atype === "PegelTo") {\n\t\t\t\tdate = this.formatter.UTCTimeToLocale(oContext.getProperty("DatumTo")).toJSON().slice(0, -1);\n\t\t\t\ttime = this.formatter.time(new Date(oContext.getProperty("ZeitTo/ms")));\n\t\t\t}\n\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/PegelSet(Pegeldatum=datetime\'" + date + "\',Pegelzeit=time\'" + time + "\')";\n\t\t\toPegelModel.loadData(URL, true, false);\n\t\t\tvar pegelstand = oPegelModel.getProperty("/d/Pegelstand");\n\t\t\tvar oRapporteModel = this.getView().getModel();\n\n\t\t\toRapporteModel.setProperty(atype, pegelstand, oContext);\n\t\t\t// oRapporteModel.setProperty("Samstagszuschlag", false, oContext);\n\n\t\t},\n\t\t_updateTarife: function () {\n\t\t\t// Ermitteln der Tarife \n\t\t\tvar oRapporteModel = this.getView().getBindingContext();\n\n\t\t\tvar date_from = this.formatter.UTCTimeToLocale(oRapporteModel.getProperty("Datum")).toJSON().slice(0, -1);\n\t\t\tvar time_from = this.formatter.time(new Date(oRapporteModel.getProperty("Zeit/ms")));\n\t\t\tvar date_to = this.formatter.UTCTimeToLocale(oRapporteModel.getProperty("DatumTo")).toJSON().slice(0, -1);\n\t\t\tvar time_to = this.formatter.time(new Date(oRapporteModel.getProperty("ZeitTo/ms")));\n\t\t\t//var URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSet(Datum=datetime\'" + date + "\',Tarifart=\'\',Zeit=time\'" + time + "\')";\n\t\t\tvar oTarifModel = this.getView().getModel("tarifeSet");\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSSBSet";\n\t\t\tvar tarifArt;\n\t\t\tif (oRapporteModel.getProperty("Feiertagszuschlag")) {\n\t\t\t\ttarifArt = "FR";\n\t\t\t} else if (oRapporteModel.getProperty("Samstagszuschlag")) {\n\t\t\t\ttarifArt = "SA";\n\t\t\t} else {\n\t\t\t\ttarifArt = "NO";\n\t\t\t}\n\n\t\t\tvar URL = URL + "?$filter=Tarifart eq \'" + tarifArt + "\' and DatumVon eq datetime\'" + date_from + "\' and ZeitVon eq time\'" +\n\t\t\t\ttime_from +\n\t\t\t\t"\' and DatumBis eq datetime\'" + date_to + "\' and ZeitBis eq time\'" + time_to + "\'";\n\t\t\t// var URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSSBSet?$filter=DatumVon eq datetime\'" + date_from + "\' and ZeitVon eq time\'" +\n\t\t\t// \ttime_from + "\' and DatumBis eq datetime\'" + date_to + "\' and ZeitBis eq time\'" + time_to + "\'";\n\n\t\t\toTarifModel.loadData(URL, true, false);\n\t\t\tthis.setModel(oTarifModel, "tarifeSet");\n\t\t\tthis._updateSelTarife(); //???\n\t\t\tthis._calc();\n\t\t},\n\t\t_updateTarifeNewDate: function () {\n\t\t\tvar oTarifModel = this.getView().getModel("tarifeSet");\n\t\t\tvar oContext = this.getView().getBindingContext();\n\n\t\t\tvar date_from = this.formatter.UTCTimeToLocale(oContext.getProperty("Datum")).toJSON().slice(0, -1);\n\t\t\tvar time_from = this.formatter.time(new Date(oContext.getProperty("Zeit/ms")));\n\t\t\tvar date_to = this.formatter.UTCTimeToLocale(oContext.getProperty("DatumTo")).toJSON().slice(0, -1);\n\t\t\tvar time_to = this.formatter.time(new Date(oContext.getProperty("ZeitTo/ms")));\n\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSSBSet?$filter=DatumVon eq datetime\'" + date_from + "\' and ZeitVon eq time\'" +\n\t\t\t\ttime_from + "\' and DatumBis eq datetime\'" + date_to + "\' and ZeitBis eq time\'" + time_to + "\'";\n\n\t\t\toTarifModel.loadData(URL, true, false);\n\t\t\tvar tarifart = oTarifModel.getProperty("/d/results/0/Tarifart");\n\t\t\tvar oRapporteModel = this.getView().getModel();\n\t\t\tswitch (tarifart) {\n\t\t\tcase \'FR\':\n\t\t\t\toRapporteModel.setProperty("Feiertagszuschlag", true, oContext);\n\t\t\t\toRapporteModel.setProperty("Samstagszuschlag", false, oContext);\n\t\t\t\tbreak;\n\t\t\tcase \'SA\':\n\t\t\t\toRapporteModel.setProperty("Samstagszuschlag", true, oContext);\n\t\t\t\toRapporteModel.setProperty("Feiertagszuschlag", false, oContext);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\toRapporteModel.setProperty("Samstagszuschlag", false, oContext);\n\t\t\t\toRapporteModel.setProperty("Feiertagszuschlag", false, oContext);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis._calcDateDifference();\n\t\t\tthis.setModel(oTarifModel, "tarifeSet");\n\t\t\tthis._getPegel("Pegel");\n\t\t\tthis._getPegel("PegelTo");\n\t\t},\n\t\t_createSelTarifModel: function () {\n\t\t\t// Model zum Lesen der Tarife erzeugen\n\t\t\tvar oSelTarifModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\tthis.setModel(oSelTarifModel, "sel_tarifeSet");\n\t\t\tthis._updateSelTarife();\n\t\t},\n\t\t_updateSelTarife: function () {\n\t\t\t// Ermitteln der Tarife \n\t\t\tvar oRapporteContext = this.getView().getBindingContext();\n\t\t\tvar oRapporteModel = this.getView().getModel();\n\n\t\t\tvar date_from = this.formatter.UTCTimeToLocale(oRapporteContext.getProperty("Datum")).toJSON().slice(0, -1);\n\t\t\tvar time_from = this.formatter.time(new Date(oRapporteContext.getProperty("Zeit/ms")));\n\t\t\tvar date_to = this.formatter.UTCTimeToLocale(oRapporteContext.getProperty("DatumTo")).toJSON().slice(0, -1);\n\t\t\tvar time_to = this.formatter.time(new Date(oRapporteContext.getProperty("ZeitTo/ms")));\n\t\t\t//var URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSet(Datum=datetime\'" + date + "\',Tarifart=\'\',Zeit=time\'" + time + "\')";\n\t\t\tvar oSelTarifModel = this.getView().getModel("sel_tarifeSet");\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSSBSet";\n\t\t\tvar tarifArt;\n\t\t\tif (oRapporteContext.getProperty("Feiertagszuschlag")) {\n\t\t\t\ttarifArt = "FR";\n\t\t\t} else if (oRapporteContext.getProperty("Samstagszuschlag")) {\n\t\t\t\ttarifArt = "SA";\n\t\t\t} else {\n\t\t\t\ttarifArt = "NO";\n\t\t\t}\n\n\t\t\tvar SsbTarif = oRapporteContext.getProperty("SsbTarif");\n\n\t\t\tvar URL = URL + "(Tarifart=\'" + tarifArt + "\',SsbTarif=\'" + SsbTarif + "\')";\n\t\t\t// var URL = URL + "?$filter=Tarifart eq \'" + tarifArt + "\' and DatumVon eq datetime\'" + date_from + "\' and ZeitVon eq time\'" + time_from +\n\t\t\t// \t"\' and DatumBis eq datetime\'" + date_to + "\' and ZeitBis eq time\'" + time_to + "\'";\n\t\t\t// var URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/TarifeSSBSet?$filter=DatumVon eq datetime\'" + date_from + "\' and ZeitVon eq time\'" +\n\t\t\t// \ttime_from + "\' and DatumBis eq datetime\'" + date_to + "\' and ZeitBis eq time\'" + time_to + "\'";\n\n\t\t\toSelTarifModel.loadData(URL, true, false);\n\t\t\tthis.setModel(oSelTarifModel, "sel_tarifeSet");\n\t\t\tif (SsbTarif === "PAUSCHAL") {\n\t\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/pauschalPreis", true);\n\t\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/mengenPreis", false);\n\t\t\t\t//oRapporteModel.setProperty("SsbMenge", null, oRapporteContext);\n\t\t\t\toRapporteModel.setProperty("SsbMenge", "0", oRapporteContext);\n\n\t\t\t} else {\n\t\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/pauschalPreis", false);\n\t\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/mengenPreis", true);\n\t\t\t\toRapporteModel.setProperty("SsbPauschal", "0", oRapporteContext);\n\t\t\t}\n\n\t\t\tthis._calc();\n\t\t},\n\t\t_updateSsbMenge: function () {\n\t\t\tvar oSelTarifModel = this.getView().getModel("sel_tarifeSet");\n\t\t\tvar oRapporteModel = this.getView().getModel();\n\t\t\tvar oRapporteContext = this.getView().getBindingContext();\n\n\t\t\tvar lowest_value = oSelTarifModel.getProperty("/d/KleinsteEinheit");\n\t\t\tvar diff_ms = this.getView().getModel("rapportSSBView").getProperty("/effektiveEinsatzZeit") * 36e5;\n\t\t\tvar diff_round = Math.ceil(diff_ms / 36e5);\n\n\t\t\tif (this.getView().getModel("rapportSSBView").getProperty("/mengenPreis") === true) {\n\t\t\t\tif (parseFloat(diff_round, 10) < parseFloat(lowest_value, 10)) {\n\t\t\t\t\t// Falls die erfasste zeit kleiner als die Mindestzeit ist \n\t\t\t\t\toRapporteModel.setProperty("SsbMenge", lowest_value, oRapporteContext);\n\t\t\t\t} else {\n\t\t\t\t\toRapporteModel.setProperty("SsbMenge", (diff_round).toString(), oRapporteContext);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_updateOrte: function () {\n\t\t\tvar oOrteModel = this.getView().getModel("orteSet");\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\tvar oRapporteContext = this.getView().getBindingContext();\n\t\t\tvar talfahrt = oRapporteContext.getProperty("Talfahrt");\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/OrteSet?$filter=Talfahrt eq " + talfahrt;\n\t\t\toOrteModel.loadData(URL, true, false);\n\t\t\tthis.setModel(oOrteModel, "orteSet");\n\t\t},\n\t\t_createSchiffsModel: function () {\n\t\t\t// Lesen der Schiffsdaten\n\t\t\tvar oSchiff = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\tvar sSchiffsNummer = this.getView().getBindingContext().getProperty("EniNr");\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/SchiffeSet(\'" + sSchiffsNummer + "\')";\n\t\t\toSchiff.loadData(URL, true, false);\n\t\t\tthis.setModel(oSchiff, "Schiff");\n\t\t},\n\t\t_createDebitorModel: function () {\n\t\t\t// Lesen der Debiorendaten zum Schiff\n\t\t\tvar oDebitor = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\tvar sSchiffsNummer = this.getView().getBindingContext().getProperty("EniNr");\n\t\t\tvar sUrlDebi = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/SchiffeSet(\'" + sSchiffsNummer + "\')/Debitoren";\n\t\t\toDebitor.loadData(sUrlDebi, true, false);\n\t\t\tthis.setModel(oDebitor, "Debitor");\n\t\t},\n\t\t_getBenutzer: function () {\n\t\t\t// Ermitteln des Lotsennamens\n\t\t\tvar oBenutzerModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\tvar URL = "/sap/opu/odata/sap/ZLOTSENAPP2_SRV/BenutzerSet(\'1\')";\n\t\t\toBenutzerModel.loadData(URL, true, false);\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/lotsenname", oBenutzerModel.getProperty("/d/Firstname") + " " +\n\t\t\t\toBenutzerModel\n\t\t\t\t.getProperty("/d/Lastname"));\n\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/poweruser", oBenutzerModel.getProperty("/d/Ispoweruser"));\n\t\t\treturn oBenutzerModel.getProperty("/d/Firstname") + " " + oBenutzerModel.getProperty("/d/Lastname");\n\t\t},\n\t\t_destory: function (bSave) {\n\t\t\t// Aufräumen\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\tvar oRapportModel = this.getView().getModel();\n\t\t\tif (bSave === false && this.getView().getModel("rapportSSBView").getProperty("/newRapport")) {\n\t\t\t\toRapportModel.deleteCreatedEntry(oContext);\n\t\t\t}\n\t\t\toRapportModel.resetChanges();\n\t\t\toRapportModel.updateBindings();\n\t\t\tthis.getView().setModel(oRapportModel);\n\t\t\tthis.getView().getModel("tarifeSet").destroy();\n\t\t\tthis.getView().getModel("Schiff").destroy();\n\t\t\tthis.getView().getModel("sel_tarifeSet").destroy();\n\t\t\tthis.getView().getModel("orteSet").destroy();\n\t\t\t//\t\t\tthis.getView().getModel("rapportSSBView").destroy();\n\n\t\t\tthis.getView().unbindElement();\n\t\t},\n\t\t_resetModel: function (oData) {\n\t\t\tif (this.getView().getModel().hasPendingChanges()) {\n\t\t\t\tthis.getView().getModel().resetChanges();\n\t\t\t}\n\t\t},\n\t\t_submitSuccess: function (oData, oReponse) {\n\t\t\tvar oViewModel = this.getModel("rapportSSBView");\n\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\tvar oRapportModel = this.getModel();\n\t\t\tvar error = true;\n\t\t\t//\tif (oData.__batchResponses[0].response.statusText === "Ok") {\n\t\t\tif (oData.__batchResponses[0].response) {\n\t\t\t\tif (oData.__batchResponses[0].response.statusText === "Ok") {\n\t\t\t\t\terror = false;\n\t\t\t\t}\n\t\t\t} else if (oData.__batchResponses[0].__changeResponses[0]) {\n\t\t\t\tif (oData.__batchResponses[0].__changeResponses[0].statusText === "Created" || oData.__batchResponses[0].__changeResponses[0].statusText ===\n\t\t\t\t\t"No Content") {\n\t\t\t\t\terror = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (error) {\n\t\t\t\t// sap.m.MessageBox.show("Fehler beim speichern des Rapports!", {\n\t\t\t\t// \ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t// \ttitle: "Fehler"\n\t\t\t\t// });\n\t\t\t\t//oRapportModel.setProperty("Zeit", oContext.getProperty("Zeit"), oContext);\n\t\t\t\t// var oDateFormat = sap.ui.core.format.DateFormat.getTimeInstance({\n\t\t\t\t// \tpattern: "\'PT\'HH\'H\'mm\'M\'ss\'S\'"\n\t\t\t\t// });\n\n\t\t\t\t// oRapportModel.setProperty("Zeit", {\n\t\t\t\t// \t\tms: oDateFormat.parse(oContext.getProperty("Zeit"), true).getTime(),\n\t\t\t\t// \t\t__edmtype: "Edm.Time"\n\t\t\t\t// \t},\n\t\t\t\t// \toContext);\n\n\t\t\t\t// oRapportModel.setProperty("ZeitTo", {\n\t\t\t\t// \t\tms: oDateFormat.parse(oContext.getProperty("ZeitTo"), true).getTime(),\n\t\t\t\t// \t\t__edmtype: "Edm.Time"\n\t\t\t\t// \t},\n\t\t\t\t// \toContext);\n\n\t\t\t\t// Zeit von XSD Duration auf EDM Time zurückwandeln \n\t\t\t\toRapportModel.setProperty("Zeit", {\n\t\t\t\t\t\tms: this.formatter.durationToTimestamp(oContext.getProperty("Zeit")),\n\t\t\t\t\t\t__edmtype: "Edm.Time"\n\t\t\t\t\t},\n\t\t\t\t\toContext);\n\n\t\t\t\toRapportModel.setProperty("ZeitTo", {\n\t\t\t\t\t\tms: this.formatter.durationToTimestamp(oContext.getProperty("ZeitTo")),\n\t\t\t\t\t\t__edmtype: "Edm.Time"\n\t\t\t\t\t},\n\t\t\t\t\toContext);\n\n\t\t\t\t//oRapportModel.setProperty("ZeitTo", oContext.getProperty("ZeitTo"), oContext);\n\t\t\t} else {\n\t\t\t\toViewModel.setProperty("/newRapport", false);\n\t\t\t\tvar schiffsnr = this.getView().getBindingContext().getProperty("EniNr");\n\t\t\t\tthis._destory(true);\n\t\t\t\t// alte navigation\n\t\t\t\t// this.getRouter().navTo("object", {\n\t\t\t\t// \tobjectId: schiffsnr\n\t\t\t\t// }, true);\n\t\t\t\tif (oViewModel.getProperty("/reporting") === true) {\n\t\t\t\t\tthis.getRouter().navTo("showReportingRoute", {}, true);\n\t\t\t\t} else {\n\t\t\t\t\tthis.getRouter().navTo("object", {\n\t\t\t\t\t\tobjectId: schiffsnr\n\t\t\t\t\t}, true);\n\t\t\t\t}\n\t\t\t\tsap.m.MessageToast.show("Rapport wurde erfolgreich gespeichert", {\n\t\t\t\t\tduration: 30000,\n\t\t\t\t\tautoClose: false\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t_submitError: function () {\n\t\t\tsap.m.MessageToast.show("Fehler beim speichern des Rapports", {\n\t\t\t\tduration: 30000,\n\t\t\t\tautoClose: false\n\t\t\t});\n\t\t\t/*\t\t\tsap.m.MessageBox.show("Fehler beim speichern des Rapports!", {\n\t\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\n\t\t\t\t\t\t\ttitle: "Fehler"\n\t\t\t\t\t\t});*/\n\t\t\tthis._destory(true);\n\t\t},\n\t\t_logChange: function (sMethod) {\n\t\t\tif (this.getView().getModel().hasPendingChanges() || this.getView().getModel().hasPendingRequests()) {\n\t\t\t\tjQuery.sap.log.error(sMethod + " " + "Rapport: " + this.getView().getBindingContext().getProperty("Rapportid") + "SchiffNr" +\n\t\t\t\t\tthis\n\t\t\t\t\t.getView().getBindingContext().getProperty("EniNr"));\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\tonAnnullieren: function () {\n\t\t\tsap.m.MessageBox.confirm("Wollen Sie den Lotsenrapport wirklich annullieren?.", {\n\t\t\t\ticon: sap.m.MessageBox.Icon.QUESTION,\n\t\t\t\ttitle: "Annullation",\n\t\t\t\tactions: [\n\t\t\t\t\tsap.m.MessageBox.Action.YES,\n\t\t\t\t\tsap.m.MessageBox.Action.NO\n\t\t\t\t],\n\t\t\t\tonClose: jQuery.proxy(function (oAction) {\n\t\t\t\t\tif (oAction === sap.m.MessageBox.Action.YES) {\n\t\t\t\t\t\t//This code was generated by the layout editor.\n\t\t\t\t\t\tvar oRapportModel = this.getModel();\n\t\t\t\t\t\tvar oContext = this.getView().getBindingContext();\n\t\t\t\t\t\toRapportModel.setProperty("Loevm", true, oContext);\n\t\t\t\t\t\t//oRapportModel.setProperty("Zeit", this.formatter.time(new Date(oContext.getProperty("Zeit/ms"))), oContext);\n\t\t\t\t\t\toRapportModel.setProperty("Zeit", this.formatter.time(new Date(oContext.getProperty("Zeit/ms"))), oContext);\n\t\t\t\t\t\toRapportModel.setProperty("ZeitTo", this.formatter.time(new Date(oContext.getProperty("ZeitTo/ms"))), oContext);\n\t\t\t\t\t\toRapportModel.submitChanges({\n\t\t\t\t\t\t\tsuccess: jQuery.proxy(this._submitSuccess, this),\n\t\t\t\t\t\t\terror: jQuery.proxy(this._submitError, this)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\tonResetSelection: function () {\n\t\t\t//This code was generated by the layout editor.\n\t\t\tvar oRapporteContext = this.getView().getBindingContext();\n\t\t\tvar oRapporteModel = this.getView().getModel();\n\t\t\tvar oTarifModel = this.getView().getModel("tarifeSet");\n\t\t\t//this._resetRadioButtons(oRapporteModel, oRapporteContext);\n\t\t\toRapporteModel.setProperty("SsbTarif", "0", oRapporteContext);\n\n\t\t\toRapporteModel.setProperty("SsbMenge", "0", oRapporteContext);\n\t\t\t//var oSelTarifModel = this.getView().getModel("sel_tarifeSet");\n\t\t\t//oSelTarifModel.destroy();\n\t\t\t//this.setModel(null, "sel_tarifeSet");\n\t\t\tthis._updateSelTarife();\n\t\t\tthis._updateSsbMenge();\n\t\t\tthis._calc();\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\t_setFahrtrichtung: function () {\n\t\t\tvar oRapporteContext = this.getView().getBindingContext();\n\t\t\tif (oRapporteContext.getProperty("Talfahrt") === true) {\n\t\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/fahrtrichtung", "Talfahrt");\n\t\t\t} else {\n\t\t\t\tthis.getView().getModel("rapportSSBView").setProperty("/fahrtrichtung", "Bergfahrt");\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.RapportSSB\n\t\t */\n\t\tonChangeTarif: function () {\n\t\t\tthis._updateSelTarife();\n\t\t\tthis._updateSsbMenge();\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.RapportSSB\n\t\t */\n\t\tonChangeOrt: function () {\n\t\t\t//This code was generated by the layout editor.\n\t\t}\n\t});\n});',
"ch/portof/controller/Reporting.controller.js":'sap.ui.define([\n\t"ch/portof/controller/BaseController",\n\t"sap/ui/model/json/JSONModel",\n\t"ch/portof/model/formatter",\n\t"ch/portof/controller/ErrorHandler"\n], function(BaseController, JSONModel, formatter, ErrorHandler) {\n\t"use strict";\n\treturn BaseController.extend("ch.portof.controller.Reporting", {\n\n\t\t/**\n\t\t * Called when a controller is instantiated and its View controls (if available) are already created.\n\t\t * Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.\n\t\t * @memberOf ch.portof.view.Reporting\n\t\t */\n\t\tonInit: function() {\n\t\t\tvar oViewModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0,\n\t\t\t\tusername: "XYLAN",\n\t\t\t\tlineItemListTitle: this.getResourceBundle().getText("detailLineItemTableHeading")\n\t\t\t});\n\t\t\tif (typeof sap.ushell.Container !== \'undefined\') {\n\t\t\t\t// the variable is defined\n\t\t\t\toViewModel.setProperty("/username", sap.ushell.Container.getUser().getId());\n\t\t\t}\n\n\t\t\tthis.setModel(oViewModel, "reportView");\n\t\t\tthis.getRouter().getRoute("showReportingRoute").attachMatched(this._onRouteMatched, this);\n\t\t\tthis.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this));\n\t\t},\n\t\t_onRouteMatched: function(oEvent) {\n\t\t\t// var sObjectId = oEvent.getParameter("arguments").objectId;\n\t\t\tthis.getModel().metadataLoaded().then(function() {\n\t\t\t\tvar sObjectPath = "RapporteSet";\n\t\t\t\tthis._bindView("/" + sObjectPath);\n\t\t\t}.bind(this));\n\t\t},\n\n\t\t_bindView: function(sObjectPath) {\n\t\t\t// Set busy indicator during view binding\n\t\t\tvar oViewModel = this.getModel("reportView");\n\n\t\t\t// If the view was not bound yet its not busy, only if the binding requests data it is set to busy again\n\t\t\toViewModel.setProperty("/busy", false);\n\t\t\tvar oSelect, oBinding, aFilters;\n\n\t\t\tvar sFilterValue = oViewModel.getProperty("/username"); // I assume you can get the filter value from somewhere...\n\t\t\toSelect = this.getView().byId("lineItemsList"); //get the reference to your Select control\n\t\t\toBinding = oSelect.getBinding("items");\n\t\t\taFilters = [];\n\n\t\t\tif (sFilterValue) {\n\t\t\t\taFilters.push(new sap.ui.model.Filter("Ernam", sap.ui.model.FilterOperator.EQ, sFilterValue));\n\t\t\t}\n\t\t\toBinding.filter(aFilters, sap.ui.model.FilterType.Control); //apply the filter sap.ui.model.FilterType.Application\n\t\t\t/*\t\t\tthis.getView().bindElement({\n\t\t\t\t\t\t\tpath: sObjectPath,\n\t\t\t\t\t\t\tfilters: aFilters,\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tchange: this._onBindingChange.bind(this),\n\t\t\t\t\t\t\t\tdataRequested: function() {\n\t\t\t\t\t\t\t\t\toViewModel.setProperty("/busy", true);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdataReceived: function() {\n\n\t\t\t\t\t\t\t\t\toViewModel.setProperty("/busy", false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t});*/\n\t\t},\n\t\t_onBindingChange: function() {\n\n\t\t\t/*\t\t\tvar oView = this.getView(),\n\t\t\t\t\t\t\toElementBinding = oView.getElementBinding();*/\n\t\t\t// No data for the binding\n\t\t\t/*if (!oElementBinding.getBoundContext()) {\n\t\t\t\tthis.getRouter().getTargets().display("detailObjectNotFound");\n\t\t\t\t// if object could not be found, the selection in the master list\n\t\t\t\t// does not make sense anymore.\n\t\t\t\tthis.getOwnerComponent().oListSelector.clearMasterListSelection();\n\t\t\t\treturn;\n\t\t\t}*/\n\t\t\t/*\t\t\tvar sPath = oElementBinding.getPath(),\n\t\t\t\t\t\t\toResourceBundle = this.getResourceBundle(),\n\t\t\t\t\t\t\toObject = oView.getModel().getObject(sPath),\n\t\t\t\t\t\t\t//\tsObjectId = oObject.Schiffsnummer,\n\t\t\t\t\t\t\t//\tsObjectName = oObject.Name,\n\t\t\t\t\t\t\toViewModel = this.getModel("reportView");\n\t\t\t\t\t\tthis.getOwnerComponent().oListSelector.selectAListItem(sPath);*/\n\t\t\t// oViewModel.setProperty("/shareSendEmailSubject", oResourceBundle.getText("shareSendEmailObjectSubject", [sObjectId]));\n\n\t\t\t// oViewModel.setProperty("/shareSendEmailMessage", oResourceBundle.getText("shareSendEmailObjectMessage", [\n\t\t\t// \tsObjectName,\n\t\t\t// \tsObjectId,\n\t\t\t// \tlocation.href\n\t\t\t// ]));\n\t\t\t/*\t\t\tvar oSelect, oBinding, aFilters;\n\n\t\t\t\t\t\tvar sFilterValue = oViewModel.getProperty("/username"); // I assume you can get the filter value from somewhere...\n\t\t\t\t\t\toSelect = this.getView().byId("lineItemsList"); //get the reference to your Select control\n\t\t\t\t\t\toBinding = oSelect.getBinding("items");\n\t\t\t\t\t\taFilters = [];\n\n\t\t\t\t\t\tif (sFilterValue) {\n\t\t\t\t\t\t\taFilters.push(new sap.ui.model.Filter("Ernam", sap.ui.model.FilterOperator.EQ, sFilterValue));\n\t\t\t\t\t\t}\n\t\t\t\t\t\toBinding.filter(aFilters, sap.ui.model.FilterType.Control); //apply the filter sap.ui.model.FilterType.Application*/\n\t\t},\n\t\t_onMetadataLoaded: function() {\n\t\t\t// Store original busy indicator delay for the detail view\n\t\t\tvar iOriginalViewBusyDelay = this.getView().getBusyIndicatorDelay(),\n\t\t\t\toViewModel = this.getModel("reportView");\n\t\t\t// Make sure busy indicator is displayed immediately when\n\t\t\t// detail view is displayed for the first time\n\t\t\toViewModel.setProperty("/delay", 0);\n\t\t\t// Binding the view will set it to not busy - so the view is always busy if it is not bound\n\t\t\toViewModel.setProperty("/busy", true);\n\t\t\t// Restore original busy indicator delay for the detail view\n\t\t\toViewModel.setProperty("/delay", iOriginalViewBusyDelay);\n\t\t},\n\t\t/**\n\t\t * Updates the item count within the line item table\'s header\n\t\t * @param {object} oEvent an event containing the total number of items in the list\n\t\t * @private\n\t\t */\n\t\tonListUpdateFinished: function(oEvent) {\n\t\t\tvar sTitle, iTotalItems = oEvent.getParameter("total"),\n\t\t\t\toViewModel = this.getModel("reportView");\n\t\t\t// only update the counter if the length is final\n\t\t\tif (this.byId("lineItemsList").getBinding("items").isLengthFinal()) {\n\t\t\t\tif (iTotalItems) {\n\t\t\t\t\tsTitle = this.getResourceBundle().getText("detailLineItemTableHeadingCount", [iTotalItems]);\n\t\t\t\t} else {\n\t\t\t\t\t//Display \'Line Items\' instead of \'Line items (0)\'\n\t\t\t\t\tsTitle = this.getResourceBundle().getText("detailLineItemTableHeading");\n\t\t\t\t}\n\t\t\t\toViewModel.setProperty("/lineItemListTitle", sTitle);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Detail\n\t\t */\n\t\t_onListItemPressed: function(oEvent) {\n\t\t\t//This code was generated by the layout editor.\n\t\t\t//oEvent.getSource().getBindingContext().getObject();\n\t\t\t/*this.getRouter().navTo("rapportRouteReport", {\n\t\t\t\tobjectId: oEvent.getSource().getBindingContext().getObject().Rapportid\n\t\t\t}, true); //this.getRouter().navTo("rapport");*/\n\n\t\t\tif (oEvent.getSource().getBindingContext().getObject().RapportArt === "S") {\n\t\t\t\tthis.getRouter().navTo("rapportSSBRoute", {\n\t\t\t\t\tobjectId: oEvent.getSource().getBindingContext().getObject().Rapportid\n\t\t\t\t}, true); //this.getRouter().navTo("rapport");\n\t\t\t} else {\n\t\t\t\tthis.getRouter().navTo("rapportRouteReport", {\n\t\t\t\t\tobjectId: oEvent.getSource().getBindingContext().getObject().Rapportid\n\t\t\t\t}, true); //this.getRouter().navTo("rapport");\t\t\t\t\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Similar to onAfterRendering, but this hook is invoked before the controller\'s View is re-rendered\n\t\t * (NOT before the first rendering! onInit() is used for that one!).\n\t\t * @memberOf ch.portof.view.Reporting\n\t\t */\n\t\t//\tonBeforeRendering: function() {\n\t\t//\n\t\t//\t},\n\n\t\t/**\n\t\t * Called when the View has been rendered (so its HTML is part of the document). Post-rendering manipulations of the HTML could be done here.\n\t\t * This hook is the same one that SAPUI5 controls get after being rendered.\n\t\t * @memberOf ch.portof.view.Reporting\n\t\t */\n\t\t//\tonAfterRendering: function() {\n\t\t//\n\t\t//\t},\n\n\t\t/**\n\t\t * Called when the Controller is destroyed. Use this one to free resources and finalize activities.\n\t\t * @memberOf ch.portof.view.Reporting\n\t\t */\n\t\t//\tonExit: function() {\n\t\t//\n\t\t//\t}\n\t});\n});',"ch/portof/libs/jSignature.CompressorBase30.js":"/** @preserve\njSignature v2 jSignature's custom \"base30\" format export and import plugins.\n\n*/\n/**\nCopyright (c) 2011 Willow Systems Corp http://willow-systems.com\nMIT License <http://www.opensource.org/licenses/mit-license.php>\n*/\n\n;(function(){\n\n\tvar chunkSeparator = '_' \n\t, charmap = {} // {'1':'g','2':'h','3':'i','4':'j','5':'k','6':'l','7':'m','8':'n','9':'o','a':'p','b':'q','c':'r','d':'s','e':'t','f':'u','0':'v'}\n\t, charmap_reverse = {} // will be filled by 'uncompress*\" function\n\t// need to split below for IE7 (possibly others), which does not understand string[position] it seems (returns undefined)\n\t, allchars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX'.split('') \n\t, bitness = allchars.length / 2\n\t, minus = 'Z'\n\t, plus = 'Y'\n\t\n\tfor(var i = bitness-1; i > -1; i--){\n\t\tcharmap[allchars[i]] = allchars[i+bitness]\n\t\tcharmap_reverse[allchars[i+bitness]] = allchars[i]\n\t} \n\tvar remapTailChars = function(number){\n\t\t// for any given number as string, returning string with trailing chars remapped something like so:\n\t\t// '345' -> '3de'\n\t\tvar chars = number.split('') \n\t\t, l = chars.length\n\t\t// we are skipping first char. standard hex number char = delimiter\n\t\tfor (var i = 1; i < l; i++ ){\n\t\t\tchars[i] = charmap[chars[i]]\n\t\t}\n\t\treturn chars.join('')\n\t}\n\t, compressstrokeleg = function(data){\n\t\t// we convert half-stroke (only 'x' series or only 'y' series of numbers)\n\t\t// data is like this:\n\t\t// [517,516,514,513,513,513,514,516,519,524,529,537,541,543,544,544,539,536]\n\t\t// that is converted into this:\n\t\t// \"5agm12100p1235584210m53\"\n\t\t// each number in the chain is converted such:\n\t\t// - find diff from previous number\n\t\t// - first significant digit is kept as digit char. digit char = start of new number.\n\t\t// - consecutive numbers are mapped to letters, where 1 to 9 are A to I, 0 is O\n\t\t// Sign changes are denoted by \"P\" - plus, \"M\" for minus.\n\t\tvar answer = []\n\t\t, lastwhole = 0\n\t\t, last = 0\n\t\t, lastpolarity = 1\n\t\t, l = data.length\n\t\t, nwhole, n, absn\n\t\t\n\t\tfor(var i = 0; i < l; i++){\n\t\t\t// we start with whole coordinates for each point\n\t\t\t// coords are converted into series of vectors:\n\t\t\t// [512, 514, 520]\n\t\t\t// [512, +2, +6]\n\t\t\tnwhole = Math.round(data[i])\n\t\t\tn = nwhole - lastwhole\t\t\t\n\t\t\tlastwhole = nwhole\n\n\t\t\t// inserting sign change when needed.\n\t\t\tif (n < 0 && lastpolarity > 0) {\n\t\t\t\tlastpolarity = -1\n\t\t\t\tanswer.push(minus)\n\t\t\t}\n\t\t\telse if (n > 0 && lastpolarity < 0) {\n\t\t\t\tlastpolarity = 1\n\t\t\t\tanswer.push(plus)\n\t\t\t}\n\t\t\t\n\t\t\t// since we have dealt with sign. let's absolute the value.\n\t\t\tabsn = Math.abs(n)\n\t\t\t// adding number to list  We convert these to Hex before storing on the string.\n\t\t\tif (absn >= bitness) {\n\t\t\t\tanswer.push(remapTailChars(absn.toString(bitness)))\n\t\t\t} else {\n\t\t\t\tanswer.push(absn.toString(bitness))\n\t\t\t}\n\t\t}\n\t\treturn answer.join('')\n\t}\n\t, uncompressstrokeleg = function(datastring){\n\t\t// we convert half-stroke (only 'x' series or only 'y' series of numbers)\n\t\t// datastring like this:\n\t\t// \"5agm12100p1235584210m53\"\n\t\t// is converted into this:\n\t\t// [517,516,514,513,513,513,514,516,519,524,529,537,541,543,544,544,539,536]\n\t\t// each number in the chain is converted such:\n\t\t// - digit char = start of new whole number. Alpha chars except \"p\",\"m\" are numbers in hiding.\n\t\t//   These consecutive digist expressed as alphas mapped back to digit char.\n\t\t//   resurrected number is the diff between this point and prior coord.\n\t\t// - running polaritiy is attached to the number.\n\t\t// - we undiff (signed number + prior coord) the number.\n\t\t// - if char 'm','p', flip running polarity \n\t\tvar answer = []\n\t\t, chars = datastring.split('')\n\t\t, l = chars.length\n\t\t, ch\n\t\t, polarity = 1\n\t\t, partial = []\n\t\t, preprewhole = 0\n\t\t, prewhole\n\t\tfor(var i = 0; i < l; i++){\n\t\t\tch = chars[i]\n\t\t\tif (ch in charmap || ch === minus || ch === plus){\n\t\t\t\t// this is new number - start of a new whole number.\n\t\t\t\t// before we can deal with it, we need to flush out what we already \n\t\t\t\t// parsed out from string, but keep in limbo, waiting for this sign\n\t\t\t\t// that prior number is done.\n\t\t\t\t// we deal with 3 numbers here:\n\t\t\t\t// 1. start of this number - a diff from previous number to \n\t\t\t\t//    whole, new number, which we cannot do anything with cause\n\t\t\t\t//    we don't know its ending yet.\n\t\t\t\t// 2. number that we now realize have just finished parsing = prewhole\n\t\t\t\t// 3. number we keep around that came before prewhole = preprewhole\n\n\t\t\t\tif (partial.length !== 0) {\n\t\t\t\t\t// yep, we have some number parts in there.\n\t\t\t\t\tprewhole = parseInt( partial.join(''), bitness) * polarity + preprewhole\n\t\t\t\t\tanswer.push( prewhole )\n\t\t\t\t\tpreprewhole = prewhole\n\t\t\t\t}\n\n\t\t\t\tif (ch === minus){\n\t\t\t\t\tpolarity = -1\n\t\t\t\t\tpartial = []\n\t\t\t\t} else if (ch === plus){\n\t\t\t\t\tpolarity = 1\n\t\t\t\t\tpartial = []\n\t\t\t\t} else {\n\t\t\t\t\t// now, let's start collecting parts for the new number:\n\t\t\t\t\tpartial = [ch]\t\t\t\t\t\n\t\t\t\t}\n\t\t\t} else /* alphas replacing digits */ {\n\t\t\t\t// more parts for the new number\n\t\t\t\tpartial.push(charmap_reverse[ch])\n\t\t\t}\n\t\t}\n\t\t// we always will have something stuck in partial\n\t\t// because we don't have closing delimiter\n\t\tanswer.push( parseInt( partial.join(''), bitness ) * polarity + preprewhole )\n\t\t\n\t\treturn answer\n\t}\n\t, compressstrokes = function(data){\n\t\tvar answer = []\n\t\t, l = data.length\n\t\t, stroke\n\t\tfor(var i = 0; i < l; i++){\n\t\t\tstroke = data[i] \n\t\t\tanswer.push(compressstrokeleg(stroke.x))\n\t\t\tanswer.push(compressstrokeleg(stroke.y))\n\t\t}\n\t\treturn answer.join(chunkSeparator)\n\t}\n\t, uncompressstrokes = function(datastring){\n\t\tvar data = []\n\t\t, chunks = datastring.split(chunkSeparator)\n\t\t, l = chunks.length / 2\n\t\tfor (var i = 0; i < l; i++){\n\t\t\tdata.push({\n\t\t\t\t'x':uncompressstrokeleg(chunks[i*2])\n\t\t\t\t, 'y':uncompressstrokeleg(chunks[i*2+1])\n\t\t\t})\n\t\t}\n\t\treturn data\n\t}\n\t, acceptedformat = 'image/jsignature;base30'\n\t, pluginCompressor = function(data){\n\t\treturn [acceptedformat , compressstrokes(data)]\n\t}\n\t, pluginDecompressor = function(data, formattype, importcallable){\n\t\tif (typeof data !== 'string') return\n\t\tif (data.substring(0, acceptedformat.length).toLowerCase() === acceptedformat) {\n\t\t\tdata = data.substring(acceptedformat.length + 1) // chopping off \",\" there\n\t\t}\n\t\timportcallable( uncompressstrokes(data) )\n\t}\n\t, Initializer = function($){\n\t\tvar mothership = $.fn['jSignature']\n\t\tmothership(\n\t\t\t'addPlugin'\n\t\t\t,'export'\n\t\t\t,'base30' // alias\n\t\t\t,pluginCompressor\n\t\t)\n\t\tmothership(\n\t\t\t'addPlugin'\n\t\t\t,'export'\n\t\t\t,acceptedformat // full name\n\t\t\t,pluginCompressor\n\t\t)\n\t\tmothership(\n\t\t\t'addPlugin'\n\t\t\t,'import'\n\t\t\t,'base30' // alias\n\t\t\t,pluginDecompressor\n\t\t)\n\t\tmothership(\n\t\t\t'addPlugin'\n\t\t\t,'import'\n\t\t\t,acceptedformat // full name\n\t\t\t,pluginDecompressor\n\t\t)\n\t}\n\t\n\n//  //Because plugins are minified together with jSignature, multiple defines per (minified) file blow up and dont make sense\n//\t//Need to revisit this later.\n\t\n//\tif ( typeof define === \"function\" && define.amd != null) {\n//\t\t// AMD-loader compatible resource declaration\n//\t\t// you need to call this one with jQuery as argument.\n//\t\tdefine(function(){return Initializer} )\n//\t} else {\n\t\t// global-polluting outcome.\n\t\tif(this.jQuery == null) {throw new Error(\"We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...\")}\n\t\tInitializer(this.jQuery)\n//\t}\n\n\tif (this.jSignatureDebug) {\n\t\tthis.jSignatureDebug['base30'] = {\n\t\t\t'remapTailChars':remapTailChars\n\t\t\t, 'compressstrokeleg':compressstrokeleg\n\t\t\t, 'uncompressstrokeleg':uncompressstrokeleg\n\t\t\t, 'compressstrokes':compressstrokes\n\t\t\t, 'uncompressstrokes':uncompressstrokes\n\t\t\t, 'charmap': charmap\n\t\t}\n\t}\n\n}).call(typeof window !== 'undefined'? window : this);",
"ch/portof/libs/jSignature.min.js":"//Vorsicht Zeile 971 spezialanpassung damit unterschribtsbild für ausdruck nicht schwarz wird.. -> hintergrundfarbe aus css wird sonst nicht übernommen\n\n/** @preserve\njSignature v2 \"${buildDate}\" \"${commitID}\"\nCopyright (c) 2012 Willow Systems Corp http://willow-systems.com\nCopyright (c) 2010 Brinley Ang http://www.unbolt.net\nMIT License <http://www.opensource.org/licenses/mit-license.php>\n\n*/\n;(function() {\n\nvar apinamespace = 'jSignature'\n\n/**\nAllows one to delay certain eventual action by setting up a timer for it and allowing one to delay it\nby \"kick\"ing it. Sorta like \"kick the can down the road\"\n\n@public\n@class\n@param\n@returns {Type}\n*/\nvar KickTimerClass = function(time, callback) {\n\tvar timer;\n\tthis.kick = function() {\n\t\tclearTimeout(timer);\n\t\ttimer = setTimeout(\n\t\t\tcallback\n\t\t\t, time\n\t\t);\n\t}\n\tthis.clear = function() {\n\t\tclearTimeout(timer);\n\t}\n\treturn this;\n}\n\nvar PubSubClass = function(context){\n\t'use strict'\n\t/*  @preserve\n\t-----------------------------------------------------------------------------------------------\n\tJavaScript PubSub library\n\t2012 (c) Willow Systems Corp (www.willow-systems.com)\n\tbased on Peter Higgins (dante@dojotoolkit.org)\n\tLoosely based on Dojo publish/subscribe API, limited in scope. Rewritten blindly.\n\tOriginal is (c) Dojo Foundation 2004-2010. Released under either AFL or new BSD, see:\n\thttp://dojofoundation.org/license for more information.\n\t-----------------------------------------------------------------------------------------------\n\t*/\n\tthis.topics = {};\n\t// here we choose what will be \"this\" for the called events.\n\t// if context is defined, it's context. Else, 'this' is this instance of PubSub\n\tthis.context = context ? context : this;\n\t/**\n\t * Allows caller to emit an event and pass arguments to event listeners.\n\t * @public\n\t * @function\n\t * @param topic {String} Name of the channel on which to voice this event\n\t * @param **arguments Any number of arguments you want to pass to the listeners of this event.\n\t */\n\tthis.publish = function(topic, arg1, arg2, etc) {\n\t\t'use strict'\n\t\tif (this.topics[topic]) {\n\t\t\tvar currentTopic = this.topics[topic]\n\t\t\t, args = Array.prototype.slice.call(arguments, 1)\n\t\t\t, toremove = []\n\t\t\t, torun = []\n\t\t\t, fn\n\t\t\t, i, l\n\t\t\t, pair;\n\n\t\t\tfor (i = 0, l = currentTopic.length; i < l; i++) {\n\t\t\t\tpair = currentTopic[i]; // this is a [function, once_flag] array\n\t\t\t\tfn = pair[0];\n\t\t\t\tif (pair[1] /* 'run once' flag set */){\n\t\t\t\t  pair[0] = function(){};\n\t\t\t\t  toremove.push(i);\n\t\t\t\t}\n\t\t\t\t/* don't call the callback right now, it might decide to add or\n\t\t\t\t * remove subscribers which will wreak havoc on our index-based\n\t\t\t\t * iteration */\n\t\t\t\ttorun.push(fn);\n\t\t\t}\n\t\t\tfor (i = 0, l = toremove.length; i < l; i++) {\n\t\t\t  currentTopic.splice(toremove[i], 1);\n\t\t\t}\n\t\t\tfor (i = 0, l = torun.length; i < l; i++) {\n\t\t\t  torun[i].apply(this.context, args);\n\t\t\t}\n\t\t}\n\t}\n\t/**\n\t * Allows listener code to subscribe to channel and be called when data is available\n\t * @public\n\t * @function\n\t * @param topic {String} Name of the channel on which to voice this event\n\t * @param callback {Function} Executable (function pointer) that will be ran when event is voiced on this channel.\n\t * @param once {Boolean} (optional. False by default) Flag indicating if the function is to be triggered only once.\n\t * @returns {Object} A token object that cen be used for unsubscribing.\n\t */\n\tthis.subscribe = function(topic, callback, once) {\n\t\t'use strict'\n\t\tif (!this.topics[topic]) {\n\t\t\tthis.topics[topic] = [[callback, once]];\n\t\t} else {\n\t\t\tthis.topics[topic].push([callback,once]);\n\t\t}\n\t\treturn {\n\t\t\t\"topic\": topic,\n\t\t\t\"callback\": callback\n\t\t};\n\t};\n\t/**\n\t * Allows listener code to unsubscribe from a channel\n\t * @public\n\t * @function\n\t * @param token {Object} A token object that was returned by `subscribe` method\n\t */\n\tthis.unsubscribe = function(token) {\n\t\tif (this.topics[token.topic]) {\n\t\t\tvar currentTopic = this.topics[token.topic];\n\n\t\t\tfor (var i = 0, l = currentTopic.length; i < l; i++) {\n\t\t\t\tif (currentTopic[i] && currentTopic[i][0] === token.callback) {\n\t\t\t\t\tcurrentTopic.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/// Returns front, back and \"decor\" colors derived from element (as jQuery obj)\nfunction getColors($e){\n\tvar tmp\n\t, undef\n\t, frontcolor = $e.css('color')\n\t, backcolor\n\t, e = $e[0];\n\n\tvar toOfDOM = false;\n\twhile(e && !backcolor && !toOfDOM){\n\t\ttry{\n\t\t\ttmp = $(e).css('background-color');\n\t\t} catch (ex) {\n\t\t\ttmp = 'transparent';\n\t\t}\n\t\tif (tmp !== 'transparent' && tmp !== 'rgba(0, 0, 0, 0)'){\n\t\t\tbackcolor = tmp;\n\t\t}\n\t\ttoOfDOM = e.body;\n\t\te = e.parentNode;\n\t}\n\n\tvar rgbaregex = /rgb[a]*\\((\\d+),\\s*(\\d+),\\s*(\\d+)/ // modern browsers\n\t, hexregex = /#([AaBbCcDdEeFf\\d]{2})([AaBbCcDdEeFf\\d]{2})([AaBbCcDdEeFf\\d]{2})/ // IE 8 and less.\n\t, frontcolorcomponents;\n\n\t// Decomposing Front color into R, G, B ints\n\ttmp = undef;\n\ttmp = frontcolor.match(rgbaregex);\n\tif (tmp){\n\t\tfrontcolorcomponents = {'r':parseInt(tmp[1],10),'g':parseInt(tmp[2],10),'b':parseInt(tmp[3],10)};\n\t} else {\n\t\ttmp = frontcolor.match(hexregex);\n\t\tif (tmp) {\n\t\t\tfrontcolorcomponents = {'r':parseInt(tmp[1],16),'g':parseInt(tmp[2],16),'b':parseInt(tmp[3],16)};\n\t\t}\n\t}\n//\t\tif(!frontcolorcomponents){\n//\t\t\tfrontcolorcomponents = {'r':255,'g':255,'b':255}\n//\t\t}\n\n\tvar backcolorcomponents\n\t// Decomposing back color into R, G, B ints\n\tif(!backcolor){\n\t\t// HIghly unlikely since this means that no background styling was applied to any element from here to top of dom.\n\t\t// we'll pick up back color from front color\n\t\tif(frontcolorcomponents){\n\t\t\tif (Math.max.apply(null, [frontcolorcomponents.r, frontcolorcomponents.g, frontcolorcomponents.b]) > 127){\n\t\t\t\tbackcolorcomponents = {'r':0,'g':0,'b':0};\n\t\t\t} else {\n\t\t\t\tbackcolorcomponents = {'r':255,'g':255,'b':255};\n\t\t\t}\n\t\t} else {\n\t\t\t// arg!!! front color is in format we don't understand (hsl, named colors)\n\t\t\t// Let's just go with white background.\n\t\t\tbackcolorcomponents = {'r':255,'g':255,'b':255};\n\t\t}\n\t} else {\n\t\ttmp = undef;\n\t\ttmp = backcolor.match(rgbaregex);\n\t\tif (tmp){\n\t\t\tbackcolorcomponents = {'r':parseInt(tmp[1],10),'g':parseInt(tmp[2],10),'b':parseInt(tmp[3],10)};\n\t\t} else {\n\t\t\ttmp = backcolor.match(hexregex);\n\t\t\tif (tmp) {\n\t\t\t\tbackcolorcomponents = {'r':parseInt(tmp[1],16),'g':parseInt(tmp[2],16),'b':parseInt(tmp[3],16)};\n\t\t\t}\n\t\t}\n//\t\t\tif(!backcolorcomponents){\n//\t\t\t\tbackcolorcomponents = {'r':0,'g':0,'b':0}\n//\t\t\t}\n\t}\n\n\t// Deriving Decor color\n\t// THis is LAZY!!!! Better way would be to use HSL and adjust luminocity. However, that could be an overkill.\n\n\tvar toRGBfn = function(o){return 'rgb(' + [o.r, o.g, o.b].join(', ') + ')'}\n\t, decorcolorcomponents\n\t, frontcolorbrightness\n\t, adjusted;\n\n\tif (frontcolorcomponents && backcolorcomponents){\n\t\tvar backcolorbrightness = Math.max.apply(null, [frontcolorcomponents.r, frontcolorcomponents.g, frontcolorcomponents.b]);\n\n\t\tfrontcolorbrightness = Math.max.apply(null, [backcolorcomponents.r, backcolorcomponents.g, backcolorcomponents.b]);\n\t\tadjusted = Math.round(frontcolorbrightness + (-1 * (frontcolorbrightness - backcolorbrightness) * 0.75)); // \"dimming\" the difference between pen and back.\n\t\tdecorcolorcomponents = {'r':adjusted,'g':adjusted,'b':adjusted}; // always shade of gray\n\t} else if (frontcolorcomponents) {\n\t\tfrontcolorbrightness = Math.max.apply(null, [frontcolorcomponents.r, frontcolorcomponents.g, frontcolorcomponents.b]);\n\t\tvar polarity = +1;\n\t\tif (frontcolorbrightness > 127){\n\t\t\tpolarity = -1;\n\t\t}\n\t\t// shifting by 25% (64 points on RGB scale)\n\t\tadjusted = Math.round(frontcolorbrightness + (polarity * 96)); // \"dimming\" the pen's color by 75% to get decor color.\n\t\tdecorcolorcomponents = {'r':adjusted,'g':adjusted,'b':adjusted}; // always shade of gray\n\t} else {\n\t\tdecorcolorcomponents = {'r':191,'g':191,'b':191}; // always shade of gray\n\t}\n\n\treturn {\n\t\t'color': frontcolor\n\t\t, 'background-color': backcolorcomponents? toRGBfn(backcolorcomponents) : backcolor\n\t\t, 'decor-color': toRGBfn(decorcolorcomponents)\n\t};\n}\n\nfunction Vector(x,y){\n\tthis.x = x;\n\tthis.y = y;\n\tthis.reverse = function(){\n\t\treturn new this.constructor(\n\t\t\tthis.x * -1\n\t\t\t, this.y * -1\n\t\t);\n\t};\n\tthis._length = null;\n\tthis.getLength = function(){\n\t\tif (!this._length){\n\t\t\tthis._length = Math.sqrt( Math.pow(this.x, 2) + Math.pow(this.y, 2) );\n\t\t}\n\t\treturn this._length;\n\t};\n\n\tvar polarity = function (e){\n\t\treturn Math.round(e / Math.abs(e));\n\t};\n\tthis.resizeTo = function(length){\n\t\t// proportionally changes x,y such that the hypotenuse (vector length) is = new length\n\t\tif (this.x === 0 && this.y === 0){\n\t\t\tthis._length = 0;\n\t\t} else if (this.x === 0){\n\t\t\tthis._length = length;\n\t\t\tthis.y = length * polarity(this.y);\n\t\t} else if(this.y === 0){\n\t\t\tthis._length = length;\n\t\t\tthis.x = length * polarity(this.x);\n\t\t} else {\n\t\t\tvar proportion = Math.abs(this.y / this.x)\n\t\t\t\t, x = Math.sqrt(Math.pow(length, 2) / (1 + Math.pow(proportion, 2)))\n\t\t\t\t, y = proportion * x;\n\t\t\tthis._length = length;\n\t\t\tthis.x = x * polarity(this.x);\n\t\t\tthis.y = y * polarity(this.y);\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Calculates the angle between 'this' vector and another.\n\t * @public\n\t * @function\n\t * @returns {Number} The angle between the two vectors as measured in PI.\n\t */\n\tthis.angleTo = function(vectorB) {\n\t\tvar divisor = this.getLength() * vectorB.getLength();\n\t\tif (divisor === 0) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\t// JavaScript floating point math is screwed up.\n\t\t\t// because of it, the core of the formula can, on occasion, have values\n\t\t\t// over 1.0 and below -1.0.\n\t\t\treturn Math.acos(\n\t\t\t\tMath.min(\n\t\t\t\t\tMath.max(\n\t\t\t\t\t\t( this.x * vectorB.x + this.y * vectorB.y ) / divisor\n\t\t\t\t\t\t, -1.0\n\t\t\t\t\t)\n\t\t\t\t\t, 1.0\n\t\t\t\t)\n\t\t\t) / Math.PI;\n\t\t}\n\t};\n}\n\nfunction Point(x,y){\n\tthis.x = x;\n\tthis.y = y;\n\n\tthis.getVectorToCoordinates = function (x, y) {\n\t\treturn new Vector(x - this.x, y - this.y);\n\t};\n\tthis.getVectorFromCoordinates = function (x, y) {\n\t\treturn this.getVectorToCoordinates(x, y).reverse();\n\t};\n\tthis.getVectorToPoint = function (point) {\n\t\treturn new Vector(point.x - this.x, point.y - this.y);\n\t};\n\tthis.getVectorFromPoint = function (point) {\n\t\treturn this.getVectorToPoint(point).reverse();\n\t};\n}\n\n/*\n * About data structure:\n * We don't store / deal with \"pictures\" this signature capture code captures \"vectors\"\n *\n * We don't store bitmaps. We store \"strokes\" as arrays of arrays. (Actually, arrays of objects containing arrays of coordinates.\n *\n * Stroke = mousedown + mousemoved * n (+ mouseup but we don't record that as that was the \"end / lack of movement\" indicator)\n *\n * Vectors = not classical vectors where numbers indicated shift relative last position. Our vectors are actually coordinates against top left of canvas.\n * \t\t\twe could calc the classical vectors, but keeping the the actual coordinates allows us (through Math.max / min)\n * \t\t\tto calc the size of resulting drawing very quickly. If we want classical vectors later, we can always get them in backend code.\n *\n * So, the data structure:\n *\n * var data = [\n * \t{ // stroke starts\n * \t\tx : [101, 98, 57, 43] // x points\n * \t\t, y : [1, 23, 65, 87] // y points\n * \t} // stroke ends\n * \t, { // stroke starts\n * \t\tx : [55, 56, 57, 58] // x points\n * \t\t, y : [101, 97, 54, 4] // y points\n * \t} // stroke ends\n * \t, { // stroke consisting of just a dot\n * \t\tx : [53] // x points\n * \t\t, y : [151] // y points\n * \t} // stroke ends\n * ]\n *\n * we don't care or store stroke width (it's canvas-size-relative), color, shadow values. These can be added / changed on whim post-capture.\n *\n */\nfunction DataEngine(storageObject, context, startStrokeFn, addToStrokeFn, endStrokeFn){\n\tthis.data = storageObject; // we expect this to be an instance of Array\n\tthis.context = context;\n\n\tif (storageObject.length){\n\t\t// we have data to render\n\t\tvar numofstrokes = storageObject.length\n\t\t, stroke\n\t\t, numofpoints;\n\n\t\tfor (var i = 0; i < numofstrokes; i++){\n\t\t\tstroke = storageObject[i];\n\t\t\tnumofpoints = stroke.x.length;\n\t\t\tstartStrokeFn.call(context, stroke);\n\t\t\tfor(var j = 1; j < numofpoints; j++){\n\t\t\t\taddToStrokeFn.call(context, stroke, j);\n\t\t\t}\n\t\t\tendStrokeFn.call(context, stroke);\n\t\t}\n\t}\n\n\tthis.changed = function(){};\n\n\tthis.startStrokeFn = startStrokeFn;\n\tthis.addToStrokeFn = addToStrokeFn;\n\tthis.endStrokeFn = endStrokeFn;\n\n\tthis.inStroke = false;\n\n\tthis._lastPoint = null;\n\tthis._stroke = null;\n\tthis.startStroke = function(point){\n\t\tif(point && typeof(point.x) == \"number\" && typeof(point.y) == \"number\"){\n\t\t\tthis._stroke = {'x':[point.x], 'y':[point.y]};\n\t\t\tthis.data.push(this._stroke);\n\t\t\tthis._lastPoint = point;\n\t\t\tthis.inStroke = true;\n\t\t\t// 'this' does not work same inside setTimeout(\n\t\t\tvar stroke = this._stroke\n\t\t\t, fn = this.startStrokeFn\n\t\t\t, context = this.context;\n\t\t\tsetTimeout(\n\t\t\t\t// some IE's don't support passing args per setTimeout API. Have to create closure every time instead.\n\t\t\t\tfunction() {fn.call(context, stroke)}\n\t\t\t\t, 3\n\t\t\t);\n\t\t\treturn point;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\t// that \"5\" at the very end of this if is important to explain.\n\t// we do NOT render links between two captured points (in the middle of the stroke) if the distance is shorter than that number.\n\t// not only do we NOT render it, we also do NOT capture (add) these intermediate points to storage.\n\t// when clustering of these is too tight, it produces noise on the line, which, because of smoothing, makes lines too curvy.\n\t// maybe, later, we can expose this as a configurable setting of some sort.\n\tthis.addToStroke = function(point){\n\t\tif (this.inStroke &&\n\t\t\ttypeof(point.x) === \"number\" &&\n\t\t\ttypeof(point.y) === \"number\" &&\n\t\t\t// calculates absolute shift in diagonal pixels away from original point\n\t\t\t(Math.abs(point.x - this._lastPoint.x) + Math.abs(point.y - this._lastPoint.y)) > 4\n\t\t){\n\t\t\tvar positionInStroke = this._stroke.x.length;\n\t\t\tthis._stroke.x.push(point.x);\n\t\t\tthis._stroke.y.push(point.y);\n\t\t\tthis._lastPoint = point;\n\n\t\t\tvar stroke = this._stroke\n\t\t\t, fn = this.addToStrokeFn\n\t\t\t, context = this.context;\n\t\t\tsetTimeout(\n\t\t\t\t// some IE's don't support passing args per setTimeout API. Have to create closure every time instead.\n\t\t\t\tfunction() {fn.call(context, stroke, positionInStroke)}\n\t\t\t\t, 3\n\t\t\t);\n\t\t\treturn point;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\tthis.endStroke = function(){\n\t\tvar c = this.inStroke;\n\t\tthis.inStroke = false;\n\t\tthis._lastPoint = null;\n\t\tif (c){\n\t\t\tvar stroke = this._stroke\n\t\t\t, fn = this.endStrokeFn // 'this' does not work same inside setTimeout(\n\t\t\t, context = this.context\n\t\t\t, changedfn = this.changed;\n\t\t\tsetTimeout(\n\t\t\t\t// some IE's don't support passing args per setTimeout API. Have to create closure every time instead.\n\t\t\t\tfunction(){\n\t\t\t\t\tfn.call(context, stroke);\n\t\t\t\t\tchangedfn.call(context);\n\t\t\t\t}\n\t\t\t\t, 3\n\t\t\t);\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n}\n\nvar basicDot = function(ctx, x, y, size){\n\tvar fillStyle = ctx.fillStyle;\n\tctx.fillStyle = ctx.strokeStyle;\n\tctx.fillRect(x + size / -2 , y + size / -2, size, size);\n\tctx.fillStyle = fillStyle;\n}\n, basicLine = function(ctx, startx, starty, endx, endy){\n\tctx.beginPath();\n\tctx.moveTo(startx, starty);\n\tctx.lineTo(endx, endy);\n\tctx.closePath();\n\tctx.stroke();\n}\n, basicCurve = function(ctx, startx, starty, endx, endy, cp1x, cp1y, cp2x, cp2y){\n\tctx.beginPath();\n\tctx.moveTo(startx, starty);\n\tctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, endx, endy);\n\tctx.closePath();\n\tctx.stroke();\n}\n, strokeStartCallback = function(stroke) {\n\t// this = jSignatureClass instance\n\tbasicDot(this.canvasContext, stroke.x[0], stroke.y[0], this.settings.lineWidth);\n}\n, strokeAddCallback = function(stroke, positionInStroke){\n\t// this = jSignatureClass instance\n\n\t// Because we are funky this way, here we draw TWO curves.\n\t// 1. POSSIBLY \"this line\" - spanning from point right before us, to this latest point.\n\t// 2. POSSIBLY \"prior curve\" - spanning from \"latest point\" to the one before it.\n\n\t// Why you ask?\n\t// long lines (ones with many pixels between them) do not look good when they are part of a large curvy stroke.\n\t// You know, the jaggedy crocodile spine instead of a pretty, smooth curve. Yuck!\n\t// We want to approximate pretty curves in-place of those ugly lines.\n\t// To approximate a very nice curve we need to know the direction of line before and after.\n\t// Hence, on long lines we actually wait for another point beyond it to come back from\n\t// mousemoved before we draw this curve.\n\n\t// So for \"prior curve\" to be calc'ed we need 4 points\n\t// \tA, B, C, D (we are on D now, A is 3 points in the past.)\n\t// and 3 lines:\n\t//  pre-line (from points A to B),\n\t//  this line (from points B to C), (we call it \"this\" because if it was not yet, it's the only one we can draw for sure.)\n\t//  post-line (from points C to D) (even through D point is 'current' we don't know how we can draw it yet)\n\t//\n\t// Well, actually, we don't need to *know* the point A, just the vector A->B\n\tvar Cpoint = new Point(stroke.x[positionInStroke-1], stroke.y[positionInStroke-1])\n\t\t, Dpoint = new Point(stroke.x[positionInStroke], stroke.y[positionInStroke])\n\t\t, CDvector = Cpoint.getVectorToPoint(Dpoint);\n\n\t// Again, we have a chance here to draw TWO things:\n\t//  BC Curve (only if it's long, because if it was short, it was drawn by previous callback) and\n\t//  CD Line (only if it's short)\n\n\t// So, let's start with BC curve.\n\t// if there is only 2 points in stroke array, we don't have \"history\" long enough to have point B, let alone point A.\n\t// Falling through to drawing line CD is proper, as that's the only line we have points for.\n\tif(positionInStroke > 1) {\n\t\t// we are here when there are at least 3 points in stroke array.\n\t\tvar Bpoint = new Point(stroke.x[positionInStroke-2], stroke.y[positionInStroke-2])\n\t\t, BCvector = Bpoint.getVectorToPoint(Cpoint)\n\t\t, ABvector;\n\t\tif(BCvector.getLength() > this.lineCurveThreshold){\n\t\t\t// Yey! Pretty curves, here we come!\n\t\t\tif(positionInStroke > 2) {\n\t\t\t\t// we are here when at least 4 points in stroke array.\n\t\t\t\tABvector = (new Point(stroke.x[positionInStroke-3], stroke.y[positionInStroke-3])).getVectorToPoint(Bpoint);\n\t\t\t} else {\n\t\t\t\tABvector = new Vector(0,0);\n\t\t\t}\n\n\t\t\tvar minlenfraction = 0.05\n\t\t\t, maxlen = BCvector.getLength() * 0.35\n\t\t\t, ABCangle = BCvector.angleTo(ABvector.reverse())\n\t\t\t, BCDangle = CDvector.angleTo(BCvector.reverse())\n\t\t\t, BCP1vector = new Vector(ABvector.x + BCvector.x, ABvector.y + BCvector.y).resizeTo(\n\t\t\t\tMath.max(minlenfraction, ABCangle) * maxlen\n\t\t\t)\n\t\t\t, CCP2vector = (new Vector(BCvector.x + CDvector.x, BCvector.y + CDvector.y)).reverse().resizeTo(\n\t\t\t\tMath.max(minlenfraction, BCDangle) * maxlen\n\t\t\t);\n\n\t\t\tbasicCurve(\n\t\t\t\tthis.canvasContext\n\t\t\t\t, Bpoint.x\n\t\t\t\t, Bpoint.y\n\t\t\t\t, Cpoint.x\n\t\t\t\t, Cpoint.y\n\t\t\t\t, Bpoint.x + BCP1vector.x\n\t\t\t\t, Bpoint.y + BCP1vector.y\n\t\t\t\t, Cpoint.x + CCP2vector.x\n\t\t\t\t, Cpoint.y + CCP2vector.y\n\t\t\t);\n\t\t}\n\t}\n\tif(CDvector.getLength() <= this.lineCurveThreshold){\n\t\tbasicLine(\n\t\t\tthis.canvasContext\n\t\t\t, Cpoint.x\n\t\t\t, Cpoint.y\n\t\t\t, Dpoint.x\n\t\t\t, Dpoint.y\n\t\t);\n\t}\n}\n, strokeEndCallback = function(stroke){\n\t// this = jSignatureClass instance\n\n\t// Here we tidy up things left unfinished in last strokeAddCallback run.\n\n\t// What's POTENTIALLY left unfinished there is the curve between the last points\n\t// in the stroke, if the len of that line is more than lineCurveThreshold\n\t// If the last line was shorter than lineCurveThreshold, it was drawn there, and there\n\t// is nothing for us here to do.\n\t// We can also be called when there is only one point in the stroke (meaning, the\n\t// stroke was just a dot), in which case, again, there is nothing for us to do.\n\n\t// So for \"this curve\" to be calc'ed we need 3 points\n\t// \tA, B, C\n\t// and 2 lines:\n\t//  pre-line (from points A to B),\n\t//  this line (from points B to C)\n\t// Well, actually, we don't need to *know* the point A, just the vector A->B\n\t// so, we really need points B, C and AB vector.\n\tvar positionInStroke = stroke.x.length - 1;\n\n\tif (positionInStroke > 0){\n\t\t// there are at least 2 points in the stroke.we are in business.\n\t\tvar Cpoint = new Point(stroke.x[positionInStroke], stroke.y[positionInStroke])\n\t\t\t, Bpoint = new Point(stroke.x[positionInStroke-1], stroke.y[positionInStroke-1])\n\t\t\t, BCvector = Bpoint.getVectorToPoint(Cpoint)\n\t\t\t, ABvector;\n\t\tif (BCvector.getLength() > this.lineCurveThreshold){\n\t\t\t// yep. This one was left undrawn in prior callback. Have to draw it now.\n\t\t\tif (positionInStroke > 1){\n\t\t\t\t// we have at least 3 elems in stroke\n\t\t\t\tABvector = (new Point(stroke.x[positionInStroke-2], stroke.y[positionInStroke-2])).getVectorToPoint(Bpoint);\n\t\t\t\tvar BCP1vector = new Vector(ABvector.x + BCvector.x, ABvector.y + BCvector.y).resizeTo(BCvector.getLength() / 2);\n\t\t\t\tbasicCurve(\n\t\t\t\t\tthis.canvasContext\n\t\t\t\t\t, Bpoint.x\n\t\t\t\t\t, Bpoint.y\n\t\t\t\t\t, Cpoint.x\n\t\t\t\t\t, Cpoint.y\n\t\t\t\t\t, Bpoint.x + BCP1vector.x\n\t\t\t\t\t, Bpoint.y + BCP1vector.y\n\t\t\t\t\t, Cpoint.x\n\t\t\t\t\t, Cpoint.y\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// Since there is no AB leg, there is no curve to draw. This line is still \"long\" but no curve.\n\t\t\t\tbasicLine(\n\t\t\t\t\tthis.canvasContext\n\t\t\t\t\t, Bpoint.x\n\t\t\t\t\t, Bpoint.y\n\t\t\t\t\t, Cpoint.x\n\t\t\t\t\t, Cpoint.y\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n/*\nvar getDataStats = function(){\n\tvar strokecnt = strokes.length\n\t\t, stroke\n\t\t, pointid\n\t\t, pointcnt\n\t\t, x, y\n\t\t, maxX = Number.NEGATIVE_INFINITY\n\t\t, maxY = Number.NEGATIVE_INFINITY\n\t\t, minX = Number.POSITIVE_INFINITY\n\t\t, minY = Number.POSITIVE_INFINITY\n\tfor(strokeid = 0; strokeid < strokecnt; strokeid++){\n\t\tstroke = strokes[strokeid]\n\t\tpointcnt = stroke.length\n\t\tfor(pointid = 0; pointid < pointcnt; pointid++){\n\t\t\tx = stroke.x[pointid]\n\t\t\ty = stroke.y[pointid]\n\t\t\tif (x > maxX){\n\t\t\t\tmaxX = x\n\t\t\t} else if (x < minX) {\n\t\t\t\tminX = x\n\t\t\t}\n\t\t\tif (y > maxY){\n\t\t\t\tmaxY = y\n\t\t\t} else if (y < minY) {\n\t\t\t\tminY = y\n\t\t\t}\n\t\t}\n\t}\n\treturn {'maxX': maxX, 'minX': minX, 'maxY': maxY, 'minY': minY}\n}\n*/\n\nfunction conditionallyLinkCanvasResizeToWindowResize(jSignatureInstance, settingsWidth, apinamespace, globalEvents){\n\t'use strict'\n\tif ( settingsWidth === 'ratio' || settingsWidth.split('')[settingsWidth.length - 1] === '%' ) {\n\n\t\tthis.eventTokens[apinamespace + '.parentresized'] = globalEvents.subscribe(\n\t\t\tapinamespace + '.parentresized'\n\t\t\t, (function(eventTokens, $parent, originalParentWidth, sizeRatio){\n\t\t\t\t'use strict'\n\n\t\t\t\treturn function(){\n\t\t\t\t\t'use strict'\n\n\t\t\t\t\tvar w = $parent.width();\n\t\t\t\t\tif (w !== originalParentWidth) {\n\n\t\t\t\t\t\t// UNsubscribing this particular instance of signature pad only.\n\t\t\t\t\t\t// there is a separate `eventTokens` per each instance of signature pad\n\t\t\t\t\t\tfor (var key in eventTokens){\n\t\t\t\t\t\t\tif (eventTokens.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tglobalEvents.unsubscribe(eventTokens[key]);\n\t\t\t\t\t\t\t\tdelete eventTokens[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar settings = jSignatureInstance.settings;\n\t\t\t\t\t\tjSignatureInstance.$parent.children().remove();\n\t\t\t\t\t\tfor (var key in jSignatureInstance){\n\t\t\t\t\t\t\tif (jSignatureInstance.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tdelete jSignatureInstance[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// scale data to new signature pad size\n\t\t\t\t\t\tsettings.data = (function(data, scale){\n\t\t\t\t\t\t\tvar newData = [];\n\t\t\t\t\t\t\tvar o, i, l, j, m, stroke;\n\t\t\t\t\t\t\tfor ( i = 0, l = data.length; i < l; i++) {\n\t\t\t\t\t\t\t\tstroke = data[i];\n\n\t\t\t\t\t\t\t\to = {'x':[],'y':[]};\n\n\t\t\t\t\t\t\t\tfor ( j = 0, m = stroke.x.length; j < m; j++) {\n\t\t\t\t\t\t\t\t\to.x.push(stroke.x[j] * scale);\n\t\t\t\t\t\t\t\t\to.y.push(stroke.y[j] * scale);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tnewData.push(o);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn newData;\n\t\t\t\t\t\t})(\n\t\t\t\t\t\t\tsettings.data\n\t\t\t\t\t\t\t, w * 1.0 / originalParentWidth\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\t$parent[apinamespace](settings);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})(\n\t\t\t\tthis.eventTokens\n\t\t\t\t, this.$parent\n\t\t\t\t, this.$parent.width()\n\t\t\t\t, this.canvas.width * 1.0 / this.canvas.height\n\t\t\t)\n\t\t)\n\t}\n};\n\n\nfunction jSignatureClass(parent, options, instanceExtensions) {\n\n\tvar $parent = this.$parent = $(parent)\n\t, eventTokens = this.eventTokens = {}\n\t, events = this.events = new PubSubClass(this)\n\t, globalEvents = $.fn[apinamespace]('globalEvents')\n\t, settings = {\n\t\t'width' : 'ratio'\n\t\t,'height' : 'ratio'\n\t\t,'sizeRatio': 4 // only used when height = 'ratio'\n\t\t,'color' : '#000'\n\t\t,'background-color': '#fff'\n\t\t,'decor-color': '#eee'\n\t\t,'lineWidth' : 0\n\t\t,'minFatFingerCompensation' : -10\n\t\t,'showUndoButton': false\n\t\t,'readOnly': false\n\t\t,'data': []\n\t\t,'signatureLine': false\n\t};\n\n\t$.extend(settings, getColors($parent));\n\tif (options) {\n\t\t$.extend(settings, options);\n\t}\n\tthis.settings = settings;\n\n\tfor (var extensionName in instanceExtensions){\n\t\tif (instanceExtensions.hasOwnProperty(extensionName)) {\n\t\t\tinstanceExtensions[extensionName].call(this, extensionName);\n\t\t}\n\t}\n\n\tthis.events.publish(apinamespace+'.initializing');\n\n\t// these, when enabled, will hover above the sig area. Hence we append them to DOM before canvas.\n\tthis.$controlbarUpper = (function(){\n\t\tvar controlbarstyle = 'padding:0 !important; margin:0 !important;'+\n\t\t\t'width: 100% !important; height: 0 !important; -ms-touch-action: none; touch-action: none;'+\n\t\t\t'margin-top:-1em !important; margin-bottom:1em !important;';\n\t\treturn $('<div style=\"'+controlbarstyle+'\"></div>').appendTo($parent);\n\t})();\n\n\tthis.isCanvasEmulator = false; // will be flipped by initializer when needed.\n\tvar canvas = this.canvas = this.initializeCanvas(settings)\n\t, $canvas = $(canvas);\n\n\tthis.$controlbarLower = (function(){\n\t\tvar controlbarstyle = 'padding:0 !important; margin:0 !important;'+\n\t\t\t'width: 100% !important; height: 0 !important; -ms-touch-action: none; touch-action: none;'+\n\t\t\t'margin-top:-1.5em !important; margin-bottom:1.5em !important; position: relative;';\n\t\treturn $('<div style=\"'+controlbarstyle+'\"></div>').appendTo($parent);\n\t})();\n\n\tthis.canvasContext = canvas.getContext(\"2d\");\n\n\t// Most of our exposed API will be looking for this:\n\t$canvas.data(apinamespace + '.this', this);\n\n\tsettings.lineWidth = (function(defaultLineWidth, canvasWidth){\n\t\tif (!defaultLineWidth){\n\t\t\treturn Math.max(\n\t\t\t\tMath.round(canvasWidth / 400) /*+1 pixel for every extra 300px of width.*/\n\t\t\t\t, 2 /* minimum line width */\n\t\t\t);\n\t\t} else {\n\t\t\treturn defaultLineWidth;\n\t\t}\n\t})(settings.lineWidth, canvas.width);\n\n\tthis.lineCurveThreshold = settings.lineWidth * 3;\n\n\t// Add custom class if defined\n\tif(settings.cssclass && $.trim(settings.cssclass) != \"\") {\n\t\t$canvas.addClass(settings.cssclass);\n\t}\n\n\t// used for shifting the drawing point up on touch devices, so one can see the drawing above the finger.\n\tthis.fatFingerCompensation = 0;\n\n\tvar movementHandlers = (function(jSignatureInstance) {\n\n\t\t//================================\n\t\t// mouse down, move, up handlers:\n\n\t\t// shifts - adjustment values in viewport pixels drived from position of canvas on the page\n\t\tvar shiftX\n\t\t, shiftY\n\t\t, setStartValues = function(){\n\t\t\tvar tos = $(jSignatureInstance.canvas).offset()\n\t\t\tshiftX = tos.left * -1\n\t\t\tshiftY = tos.top * -1\n\t\t}\n\t\t, getPointFromEvent = function(e) {\n\t\t\tvar firstEvent = (e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches[0] : e);\n\t\t\t// All devices i tried report correct coordinates in pageX,Y\n\t\t\t// Android Chrome 2.3.x, 3.1, 3.2., Opera Mobile,  safari iOS 4.x,\n\t\t\t// Windows: Chrome, FF, IE9, Safari\n\t\t\t// None of that scroll shift calc vs screenXY other sigs do is needed.\n\t\t\t// ... oh, yeah, the \"fatFinger..\" is for tablets so that people see what they draw.\n\t\t\treturn new Point(\n\t\t\t\tMath.round(firstEvent.pageX + shiftX)\n\t\t\t\t, Math.round(firstEvent.pageY + shiftY) + jSignatureInstance.fatFingerCompensation\n\t\t\t);\n\t\t}\n\t\t, timer = new KickTimerClass(\n\t\t\t750\n\t\t\t, function() { jSignatureInstance.dataEngine.endStroke(); }\n\t\t);\n\n\t\tthis.drawEndHandler = function(e) {\n\t\t    if (!jSignatureInstance.settings.readOnly) {\n    \t\t\ttry { e.preventDefault(); } catch (ex) {}\n    \t\t\ttimer.clear();\n    \t\t\tjSignatureInstance.dataEngine.endStroke();\n\t\t    }\n\t\t};\n\t\tthis.drawStartHandler = function(e) {\n\t\t    if (!jSignatureInstance.settings.readOnly) {\n\t\t        e.preventDefault();\n    \t\t\t// for performance we cache the offsets\n    \t\t\t// we recalc these only at the beginning the stroke\n    \t\t\tsetStartValues();\n    \t\t\tjSignatureInstance.dataEngine.startStroke( getPointFromEvent(e) );\n    \t\t\ttimer.kick();\n\t\t    }\n\t\t};\n\t\tthis.drawMoveHandler = function(e) {\n\t\t    if (!jSignatureInstance.settings.readOnly) {\n    \t\t\te.preventDefault();\n    \t\t\tif (!jSignatureInstance.dataEngine.inStroke){\n    \t\t\t\treturn;\n    \t\t\t}\n    \t\t\tjSignatureInstance.dataEngine.addToStroke( getPointFromEvent(e) );\n    \t\t\ttimer.kick();\n\t\t    }\n\t\t};\n\n\t\treturn this;\n\n\t}).call( {}, this )\n\n\t//\n\t//================================\n\n\t;(function(drawEndHandler, drawStartHandler, drawMoveHandler) {\n\t\tvar canvas = this.canvas\n\t\t, $canvas = $(canvas)\n\t\t, undef;\n\t\tif (this.isCanvasEmulator){\n\t\t\t$canvas.bind('mousemove.'+apinamespace, drawMoveHandler);\n\t\t\t$canvas.bind('mouseup.'+apinamespace, drawEndHandler);\n\t\t\t$canvas.bind('mousedown.'+apinamespace, drawStartHandler);\n\t\t} else {\n\t\t\tcanvas.ontouchstart = function(e) {\n\t\t\t\tcanvas.onmousedown = canvas.onmouseup = canvas.onmousemove = undef;\n\n\t\t\t\tthis.fatFingerCompensation = (\n\t\t\t\t\tsettings.minFatFingerCompensation &&\n\t\t\t\t\tsettings.lineWidth * -3 > settings.minFatFingerCompensation\n\t\t\t\t) ? settings.lineWidth * -3 : settings.minFatFingerCompensation;\n\n\t\t\t\tdrawStartHandler(e);\n\n\t\t\t\tcanvas.ontouchend = drawEndHandler;\n\t\t\t\tcanvas.ontouchstart = drawStartHandler;\n\t\t\t\tcanvas.ontouchmove = drawMoveHandler;\n\t\t\t};\n\t\t\tcanvas.onmousedown = function(e) {\n\t\t\t\tcanvas.ontouchstart = canvas.ontouchend = canvas.ontouchmove = undef;\n\n\t\t\t\tdrawStartHandler(e);\n\n\t\t\t\tcanvas.onmousedown = drawStartHandler;\n\t\t\t\tcanvas.onmouseup = drawEndHandler;\n\t\t\t\tcanvas.onmousemove = drawMoveHandler;\n\t\t\t}\n\t\t\tif (window.navigator.msPointerEnabled) {\n\t\t\t\tcanvas.onmspointerdown = drawStartHandler;\n\t\t\t\tcanvas.onmspointerup = drawEndHandler;\n\t\t\t\tcanvas.onmspointermove = drawMoveHandler;\n\t\t\t}\n\t\t}\n\t}).call(\n\t\tthis\n\t\t, movementHandlers.drawEndHandler\n\t\t, movementHandlers.drawStartHandler\n\t\t, movementHandlers.drawMoveHandler\n\t)\n\n\t//=========================================\n\t// various event handlers\n\n\t// on mouseout + mouseup canvas did not know that mouseUP fired. Continued to draw despite mouse UP.\n\t// it is bettr than\n\t// $canvas.bind('mouseout', drawEndHandler)\n\t// because we don't want to break the stroke where user accidentally gets ouside and wants to get back in quickly.\n\teventTokens[apinamespace + '.windowmouseup'] = globalEvents.subscribe(\n\t\tapinamespace + '.windowmouseup'\n\t\t, movementHandlers.drawEndHandler\n\t);\n\n\tthis.events.publish(apinamespace+'.attachingEventHandlers');\n\n\t// If we have proportional width, we sign up to events broadcasting \"window resized\" and checking if\n\t// parent's width changed. If so, we (1) extract settings + data from current signature pad,\n\t// (2) remove signature pad from parent, and (3) reinit new signature pad at new size with same settings, (rescaled) data.\n\tconditionallyLinkCanvasResizeToWindowResize.call(\n\t\tthis\n\t\t, this\n\t\t, settings.width.toString(10)\n\t\t, apinamespace, globalEvents\n\t);\n\n\t// end of event handlers.\n\t// ===============================\n\n\tthis.resetCanvas(settings.data);\n\n\t// resetCanvas renders the data on the screen and fires ONE \"change\" event\n\t// if there is data. If you have controls that rely on \"change\" firing\n\t// attach them to something that runs before this.resetCanvas, like\n\t// apinamespace+'.attachingEventHandlers' that fires a bit higher.\n\tthis.events.publish(apinamespace+'.initialized');\n\n\treturn this;\n} // end of initBase\n\n//=========================================================================\n// jSignatureClass's methods and supporting fn's\n\njSignatureClass.prototype.resetCanvas = function(data, dontClear){\n\tvar canvas = this.canvas\n\t, settings = this.settings\n\t, ctx = this.canvasContext\n\t, isCanvasEmulator = this.isCanvasEmulator\n\t, cw = canvas.width\n\t, ch = canvas.height;\n\n\t// preparing colors, drawing area\n\tif (!dontClear){\n\t\tctx.clearRect(0, 0, cw + 30, ch + 30);\n\t}\n\n\tctx.shadowColor = ctx.fillStyle = settings['background-color']\n//xylan abfrage auf Canvas Emulator ausgebaut, damit hintergrundfarbe auch im Image übernommen wird.. \n//if (isCanvasEmulator){\n\t\t// FLashCanvas fills with Black by default, covering up the parent div's background\n\t\t// hence we refill\n\t\tctx.fillRect(0,0,cw + 30, ch + 30);\n\t//}\n\n\tctx.lineWidth = Math.ceil(parseInt(settings.lineWidth, 10));\n\tctx.lineCap = ctx.lineJoin = \"round\";\n\n\t// signature line\n\tif(settings.signatureLine) {\n\t\tif (null != settings['decor-color']) {\n\t\t\tctx.strokeStyle = settings['decor-color'];\n\t\t\tctx.shadowOffsetX = 0;\n\t\t\tctx.shadowOffsetY = 0;\n\t\t\tvar lineoffset = Math.round( ch / 5 );\n\t\t\tbasicLine(ctx, lineoffset * 1.5, ch - lineoffset, cw - (lineoffset * 1.5), ch - lineoffset);\n\t\t}\n\n\t\tif (!isCanvasEmulator){\n\t\t\tctx.shadowColor = ctx.strokeStyle;\n\t\t\tctx.shadowOffsetX = ctx.lineWidth * 0.5;\n\t\t\tctx.shadowOffsetY = ctx.lineWidth * -0.6;\n\t\t\tctx.shadowBlur = 0;\n\t\t}\n\t}\n\t\n\tctx.strokeStyle = settings.color;\n\n\t// setting up new dataEngine\n\n\tif (!data) { data = []; }\n\n\tvar dataEngine = this.dataEngine = new DataEngine(\n\t\tdata\n\t\t, this\n\t\t, strokeStartCallback\n\t\t, strokeAddCallback\n\t\t, strokeEndCallback\n\t);\n\n\tsettings.data = data; // onwindowresize handler uses it, i think.\n\t$(canvas).data(apinamespace+'.data', data)\n\t\t.data(apinamespace+'.settings', settings);\n\n\t// we fire \"change\" event on every change in data.\n\t// setting this up:\n\tdataEngine.changed = (function(target, events, apinamespace) {\n\t\t'use strict'\n\t\treturn function() {\n\t\t\tevents.publish(apinamespace+'.change');\n\t\t\ttarget.trigger('change');\n\t\t}\n\t})(this.$parent, this.events, apinamespace);\n\t// let's trigger change on all data reloads\n\tdataEngine.changed();\n\n\t// import filters will be passing this back as indication of \"we rendered\"\n\treturn true;\n};\n\nfunction initializeCanvasEmulator(canvas){\n\tif (canvas.getContext){\n\t\treturn false;\n\t} else {\n\t\t// for cases when jSignature, FlashCanvas is inserted\n\t\t// from one window into another (child iframe)\n\t\t// 'window' and 'FlashCanvas' may be stuck behind\n\t\t// in that other parent window.\n\t\t// we need to find it\n\t\tvar window = canvas.ownerDocument.parentWindow;\n\t\tvar FC = window.FlashCanvas ?\n\t\t\tcanvas.ownerDocument.parentWindow.FlashCanvas :\n\t\t\t(\n\t\t\t\ttypeof FlashCanvas === \"undefined\" ?\n\t\t\t\tundefined :\n\t\t\t\tFlashCanvas\n\t\t\t);\n\n\t\tif (FC) {\n\t\t\tcanvas = FC.initElement(canvas);\n\n\t\t\tvar zoom = 1;\n\t\t\t// FlashCanvas uses flash which has this annoying habit of NOT scaling with page zoom.\n\t\t\t// It matches pixel-to-pixel to screen instead.\n\t\t\t// Since we are targeting ONLY IE 7, 8 with FlashCanvas, we will test the zoom only the IE8, IE7 way\n\t\t\tif (window && window.screen && window.screen.deviceXDPI && window.screen.logicalXDPI){\n\t\t\t\tzoom = window.screen.deviceXDPI * 1.0 / window.screen.logicalXDPI;\n\t\t\t}\n\t\t\tif (zoom !== 1){\n\t\t\t\ttry {\n\t\t\t\t\t// We effectively abuse the brokenness of FlashCanvas and force the flash rendering surface to\n\t\t\t\t\t// occupy larger pixel dimensions than the wrapping, scaled up DIV and Canvas elems.\n\t\t\t\t\t$(canvas).children('object').get(0).resize(Math.ceil(canvas.width * zoom), Math.ceil(canvas.height * zoom));\n\t\t\t\t\t// And by applying \"scale\" transformation we can talk \"browser pixels\" to FlashCanvas\n\t\t\t\t\t// and have it translate the \"browser pixels\" to \"screen pixels\"\n\t\t\t\t\tcanvas.getContext('2d').scale(zoom, zoom);\n\t\t\t\t\t// Note to self: don't reuse Canvas element. Repeated \"scale\" are cumulative.\n\t\t\t\t} catch (ex) {}\n\t\t\t}\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthrow new Error(\"Canvas element does not support 2d context. jSignature cannot proceed.\");\n\t\t}\n\t}\n\n}\n\njSignatureClass.prototype.initializeCanvas = function(settings) {\n\t// ===========\n\t// Init + Sizing code\n\n\tvar canvas = document.createElement('canvas')\n\t, $canvas = $(canvas);\n\n\t// We cannot work with circular dependency\n\tif (settings.width === settings.height && settings.height === 'ratio') {\n\t\tsettings.width = '100%';\n\t}\n\n\t$canvas.css(\n\t\t{\n\t\t\t'margin': 0,\n\t\t\t'padding': 0,\n\t\t\t'border': 'none',\n\t\t\t'height': settings.height === 'ratio' || !settings.height ? 1 : settings.height.toString(10),\n\t\t\t'width': settings.width === 'ratio' || !settings.width ? 1 : settings.width.toString(10),\n\t\t\t'-ms-touch-action': 'none',\n\t\t\t'touch-action': 'none',\n\t\t\t'background-color': settings['background-color']\n\t\t}\n\t);\n\n\t$canvas.appendTo(this.$parent);\n\n\t// we could not do this until canvas is rendered (appended to DOM)\n\tif (settings.height === 'ratio') {\n\t\t$canvas.css(\n\t\t\t'height'\n\t\t\t, Math.round( $canvas.width() / settings.sizeRatio )\n\t\t);\n\t} else if (settings.width === 'ratio') {\n\t\t$canvas.css(\n\t\t\t'width'\n\t\t\t, Math.round( $canvas.height() * settings.sizeRatio )\n\t\t);\n\t}\n\n\t$canvas.addClass(apinamespace);\n\n\t// canvas's drawing area resolution is independent from canvas's size.\n\t// pixels are just scaled up or down when internal resolution does not\n\t// match external size. So...\n\n\tcanvas.width = $canvas.width();\n\tcanvas.height = $canvas.height();\n\n\t// Special case Sizing code\n\n\tthis.isCanvasEmulator = initializeCanvasEmulator(canvas);\n\n\t// End of Sizing Code\n\t// ===========\n\n\t// normally select preventer would be short, but\n\t// Canvas emulator on IE does NOT provide value for Event. Hence this convoluted line.\n\tcanvas.onselectstart = function(e){if(e && e.preventDefault){e.preventDefault()}; if(e && e.stopPropagation){e.stopPropagation()}; return false;};\n\n\treturn canvas;\n}\n\n\nvar GlobalJSignatureObjectInitializer = function(window){\n\n\tvar globalEvents = new PubSubClass();\n\n\t// common \"window resized\" event listener.\n\t// jSignature instances will subscribe to this chanel.\n\t// to resize themselves when needed.\n\t;(function(globalEvents, apinamespace, $, window){\n\t\t'use strict'\n\n\t\tvar resizetimer\n\t\t, runner = function(){\n\t\t\tglobalEvents.publish(\n\t\t\t\tapinamespace + '.parentresized'\n\t\t\t)\n\t\t};\n\n\t\t// jSignature knows how to resize its content when its parent is resized\n\t\t// window resize is the only way we can catch resize events though...\n\t\t$(window).bind('resize.'+apinamespace, function(){\n\t\t\tif (resizetimer) {\n\t\t\t\tclearTimeout(resizetimer);\n\t\t\t}\n\t\t\tresizetimer = setTimeout(\n\t\t\t\trunner\n\t\t\t\t, 500\n\t\t\t);\n\t\t})\n\t\t// when mouse exists canvas element and \"up\"s outside, we cannot catch it with\n\t\t// callbacks attached to canvas. This catches it outside.\n\t\t.bind('mouseup.'+apinamespace, function(e){\n\t\t\tglobalEvents.publish(\n\t\t\t\tapinamespace + '.windowmouseup'\n\t\t\t)\n\t\t});\n\n\t})(globalEvents, apinamespace, $, window)\n\n\tvar jSignatureInstanceExtensions = {\n\t\t/*\n\t\t'exampleExtension':function(extensionName){\n\t\t\t// we are called very early in instance's life.\n\t\t\t// right after the settings are resolved and\n\t\t\t// jSignatureInstance.events is created\n\t\t\t// and right before first (\"jSignature.initializing\") event is called.\n\t\t\t// You don't really need to manupilate\n\t\t\t// jSignatureInstance directly, just attach\n\t\t\t// a bunch of events to jSignatureInstance.events\n\t\t\t// (look at the source of jSignatureClass to see when these fire)\n\t\t\t// and your special pieces of code will attach by themselves.\n\n\t\t\t// this function runs every time a new instance is set up.\n\t\t\t// this means every var you create will live only for one instance\n\t\t\t// unless you attach it to something outside, like \"window.\"\n\t\t\t// and pick it up later from there.\n\n\t\t\t// when globalEvents' events fire, 'this' is globalEvents object\n\t\t\t// when jSignatureInstance's events fire, 'this' is jSignatureInstance\n\n\t\t\t// Here,\n\t\t\t// this = is new jSignatureClass's instance.\n\n\t\t\t// The way you COULD approch setting this up is:\n\t\t\t// if you have multistep set up, attach event to \"jSignature.initializing\"\n\t\t\t// that attaches other events to be fired further lower the init stream.\n\t\t\t// Or, if you know for sure you rely on only one jSignatureInstance's event,\n\t\t\t// just attach to it directly\n\n\t\t\tthis.events.subscribe(\n\t\t\t\t// name of the event\n\t\t\t\tapinamespace + '.initializing'\n\t\t\t\t// event handlers, can pass args too, but in majority of cases,\n\t\t\t\t// 'this' which is jSignatureClass object instance pointer is enough to get by.\n\t\t\t\t, function(){\n\t\t\t\t\tif (this.settings.hasOwnProperty('non-existent setting category?')) {\n\t\t\t\t\t\tconsole.log(extensionName + ' is here')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\t*/\n\t};\n\n\tvar exportplugins = {\n\t\t'default':function(data){return this.toDataURL()}\n\t\t, 'native':function(data){return data}\n\t\t, 'image':function(data){\n\t\t\t/*this = canvas elem */\n\t\t\tvar imagestring = this.toDataURL();\n\n\t\t\tif (typeof imagestring === 'string' &&\n\t\t\t\timagestring.length > 4 &&\n\t\t\t\timagestring.slice(0,5) === 'data:' &&\n\t\t\t\timagestring.indexOf(',') !== -1){\n\n\t\t\t\tvar splitterpos = imagestring.indexOf(',');\n\n\t\t\t\treturn [\n\t\t\t\t\timagestring.slice(5, splitterpos)\n\t\t\t\t\t, imagestring.substr(splitterpos + 1)\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn [];\n\t\t}\n\t};\n\n\t// will be part of \"importplugins\"\n\tfunction _renderImageOnCanvas( data, formattype, rerendercallable ) {\n\t\t'use strict'\n\t\t// #1. Do NOT rely on this. No worky on IE\n\t\t//   (url max len + lack of base64 decoder + possibly other issues)\n\t\t// #2. This does NOT affect what is captured as \"signature\" as far as vector data is\n\t\t// concerned. This is treated same as \"signature line\" - i.e. completely ignored\n\t\t// the only time you see imported image data exported is if you export as image.\n\n\t\t// we do NOT call rerendercallable here (unlike in other import plugins)\n\t\t// because importing image does absolutely nothing to the underlying vector data storage\n\t\t// This could be a way to \"import\" old signatures stored as images\n\t\t// This could also be a way to import extra decor into signature area.\n\n\t\tvar img = new Image()\n\t\t// this = Canvas DOM elem. Not jQuery object. Not Canvas's parent div.\n\t\t, c = this;\n\n\t\timg.onload = function () {\n\t\t\tvar ctx = c.getContext(\"2d\");\n\t\t\tvar oldShadowColor = ctx.shadowColor;\n\t\t\tctx.shadowColor = \"transparent\";\n\t\t\tctx.drawImage(\n\t\t\t\timg, 0, 0\n\t\t\t\t, ( img.width < c.width) ? img.width : c.width\n\t\t\t\t, ( img.height < c.height) ? img.height : c.height\n\t\t\t);\n\t\t\tctx.shadowColor = oldShadowColor;\n\t\t};\n\n\t\timg.src = 'data:' + formattype + ',' + data;\n\t}\n\n\tvar importplugins = {\n\t\t'native':function(data, formattype, rerendercallable){\n\t\t\t// we expect data as Array of objects of arrays here - whatever 'default' EXPORT plugin spits out.\n\t\t\t// returning Truthy to indicate we are good, all updated.\n\t\t\trerendercallable( data );\n\t\t}\n\t\t, 'image': _renderImageOnCanvas\n\t\t, 'image/png;base64': _renderImageOnCanvas\n\t\t, 'image/jpeg;base64': _renderImageOnCanvas\n\t\t, 'image/jpg;base64': _renderImageOnCanvas\n\t};\n\n\tfunction _clearDrawingArea( data, dontClear ) {\n\t\tthis.find('canvas.'+apinamespace)\n\t\t\t.add(this.filter('canvas.'+apinamespace))\n\t\t\t.data(apinamespace+'.this').resetCanvas( data, dontClear );\n\t\treturn this;\n\t}\n\n\tfunction _setDrawingData( data, formattype ) {\n\t\tvar undef;\n\n\t\tif (formattype === undef && typeof data === 'string' && data.substr(0,5) === 'data:') {\n\t\t\tformattype = data.slice(5).split(',')[0];\n\t\t\t// 5 chars of \"data:\" + mimetype len + 1 \",\" char = all skipped.\n\t\t\tdata = data.slice(6 + formattype.length);\n\t\t\tif (formattype === data) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar $canvas = this.find('canvas.'+apinamespace).add(this.filter('canvas.'+apinamespace));\n\n\t\tif (!importplugins.hasOwnProperty(formattype)) {\n\t\t\tthrow new Error(apinamespace + \" is unable to find import plugin with for format '\"+ String(formattype) +\"'\");\n\t\t} else if ($canvas.length !== 0) {\n\t\t\timportplugins[formattype].call(\n\t\t\t\t$canvas[0]\n\t\t\t\t, data\n\t\t\t\t, formattype\n\t\t\t\t, (function(jSignatureInstance){\n\t\t\t\t\treturn function(){ return jSignatureInstance.resetCanvas.apply(jSignatureInstance, arguments) }\n\t\t\t\t})($canvas.data(apinamespace+'.this'))\n\t\t\t);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tvar elementIsOrphan = function(e){\n\t\tvar topOfDOM = false;\n\t\te = e.parentNode;\n\t\twhile (e && !topOfDOM){\n\t\t\ttopOfDOM = e.body;\n\t\t\te = e.parentNode;\n\t\t}\n\t\treturn !topOfDOM;\n\t}\n\n\t//These are exposed as methods under $obj.jSignature('methodname', *args)\n\tvar plugins = {'export':exportplugins, 'import':importplugins, 'instance': jSignatureInstanceExtensions}\n\t, methods = {\n\t\t'init' : function( options ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tif (!elementIsOrphan(this)) {\n\t\t\t\t\tnew jSignatureClass(this, options, jSignatureInstanceExtensions);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t, 'destroy': function() {\n\t\t\treturn this.each(function() {\n\t\t\t\tif(!elementIsOrphan(this)) {\n\t\t\t\t\tvar sig = $(this).find('canvas').data(apinamespace + '.this');\n\t\t\t\t\tif(sig) {\n\t\t\t\t\t\tsig.$controlbarLower.remove();\n\t\t\t\t\t\tsig.$controlbarUpper.remove();\n\t\t\t\t\t\t$(sig.canvas).remove();\n\t\t\t\t\t\tfor (var e in sig.eventTokens){\n\t\t\t\t\t\t\tif (sig.eventTokens.hasOwnProperty(e)){\n\t\t\t\t\t\t\t\tglobalEvents.unsubscribe(sig.eventTokens[e]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t, 'getSettings' : function() {\n\t\t\treturn this.find('canvas.'+apinamespace)\n\t\t\t\t.add(this.filter('canvas.'+apinamespace))\n\t\t\t\t.data(apinamespace+'.this').settings;\n\t\t}\n\t\t, 'isModified' : function() {\n\t\t\treturn this.find('canvas.'+apinamespace)\n\t\t\t\t.add(this.filter('canvas.'+apinamespace))\n\t\t\t\t.data(apinamespace+'.this')\n\t\t\t\t.dataEngine\n\t\t\t\t._stroke !== null;\n\t\t}\n\t\t, 'updateSetting' : function(param, val, forFuture) {\n\t\t\tvar $canvas = this.find('canvas.'+apinamespace)\n\t\t\t\t\t\t\t.add(this.filter('canvas.'+apinamespace))\n\t\t\t\t\t\t\t.data(apinamespace+'.this');\n\t\t\t$canvas.settings[param] = val;\n\t\t\t$canvas.resetCanvas(( forFuture ? null : $canvas.settings.data ), true);\n\t\t\treturn $canvas.settings[param];\n\t\t}\n\t\t// around since v1\n\t\t, 'clear' : _clearDrawingArea\n\t\t// was mistakenly introduced instead of 'clear' in v2\n\t\t, 'reset' : _clearDrawingArea\n\t\t, 'addPlugin' : function(pluginType, pluginName, callable){\n\t\t\tif (plugins.hasOwnProperty(pluginType)){\n\t\t\t\tplugins[pluginType][pluginName] = callable;\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\t, 'listPlugins' : function(pluginType){\n\t\t\tvar answer = [];\n\t\t\tif (plugins.hasOwnProperty(pluginType)){\n\t\t\t\tvar o = plugins[pluginType];\n\t\t\t\tfor (var k in o){\n\t\t\t\t\tif (o.hasOwnProperty(k)){\n\t\t\t\t\t\tanswer.push(k);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn answer;\n\t\t}\n\t\t, 'getData' : function( formattype ) {\n\t\t\tvar undef, $canvas=this.find('canvas.'+apinamespace).add(this.filter('canvas.'+apinamespace));\n\t\t\tif (formattype === undef) {\n\t\t\t\tformattype = 'default';\n\t\t\t}\n\t\t\tif ($canvas.length !== 0 && exportplugins.hasOwnProperty(formattype)){\n\t\t\t\treturn exportplugins[formattype].call(\n\t\t\t\t\t$canvas.get(0) // canvas dom elem\n\t\t\t\t\t, $canvas.data(apinamespace+'.data') // raw signature data as array of objects of arrays\n\t\t\t\t\t, $canvas.data(apinamespace+'.settings')\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t// around since v1. Took only one arg - data-url-formatted string with (likely png of) signature image\n\t\t, 'importData' : _setDrawingData\n\t\t// was mistakenly introduced instead of 'importData' in v2\n\t\t, 'setData' : _setDrawingData\n\t\t// this is one and same instance for all jSignature.\n\t\t, 'globalEvents' : function(){return globalEvents}\n        , 'disable' : function() {\n            this.find(\"input\").attr(\"disabled\", 1);\n            this.find('canvas.'+apinamespace)\n                .addClass(\"disabled\")\n                .data(apinamespace+'.this')\n                .settings\n                .readOnly=true;\n        }\n        , 'enable' : function() {\n            this.find(\"input\").removeAttr(\"disabled\");\n            this.find('canvas.'+apinamespace)\n                .removeClass(\"disabled\")\n                .data(apinamespace+'.this')\n                .settings\n                .readOnly=false;\n        }\n\t\t// there will be a separate one for each jSignature instance.\n\t\t, 'events' : function() {\n\t\t\treturn this.find('canvas.'+apinamespace)\n\t\t\t\t\t.add(this.filter('canvas.'+apinamespace))\n\t\t\t\t\t.data(apinamespace+'.this').events;\n\t\t}\n\t} // end of methods declaration.\n\n\t$.fn[apinamespace] = function(method) {\n\t\t'use strict'\n\t\tif ( !method || typeof method === 'object' ) {\n\t\t\treturn methods.init.apply( this, arguments );\n\t\t} else if ( typeof method === 'string' && methods[method] ) {\n\t\t\treturn methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));\n\t\t} else {\n\t\t\t$.error( 'Method ' +  String(method) + ' does not exist on jQuery.' + apinamespace );\n\t\t}\n\t}\n\n} // end of GlobalJSignatureObjectInitializer\n\nGlobalJSignatureObjectInitializer(window)\n\n})();",
"ch/portof/localService/mockserver.js":'sap.ui.define([\n\t\t"sap/ui/core/util/MockServer"\n\t], function (MockServer) {\n\t\t"use strict";\n\n\t\tvar oMockServer,\n\t\t\t_sAppModulePath = "ch/portof/",\n\t\t\t_sJsonFilesModulePath = _sAppModulePath + "localService/mockdata";\n\n\t\treturn {\n\t\t\t/**\n\t\t\t * Initializes the mock server.\n\t\t\t * You can configure the delay with the URL parameter "serverDelay".\n\t\t\t * The local mock data in this folder is returned instead of the real data for testing.\n\t\t\t * @public\n\t\t\t */\n\n\t\t\tinit : function () {\n\t\t\t\tvar oUriParameters = jQuery.sap.getUriParameters(),\n\t\t\t\t\tsJsonFilesUrl = jQuery.sap.getModulePath(_sJsonFilesModulePath),\n\t\t\t\t\tsManifestUrl = jQuery.sap.getModulePath(_sAppModulePath + "manifest", ".json"),\n\t\t\t\t\tsEntity = "SchiffeSet",\n\t\t\t\t\tsErrorParam = oUriParameters.get("errorType"),\n\t\t\t\t\tiErrorCode = sErrorParam === "badRequest" ? 400 : 500,\n\t\t\t\t\toManifest = jQuery.sap.syncGetJSON(sManifestUrl).data,\n\t\t\t\t\toMainDataSource = oManifest["sap.app"].dataSources.mainService,\n\t\t\t\t\tsMetadataUrl = jQuery.sap.getModulePath(_sAppModulePath + oMainDataSource.settings.localUri.replace(".xml", ""), ".xml"),\n\t\t\t\t\t// ensure there is a trailing slash\n\t\t\t\t\tsMockServerUrl = /.*\\/$/.test(oMainDataSource.uri) ? oMainDataSource.uri : oMainDataSource.uri + "/";\n\n\t\t\t\toMockServer = new MockServer({\n\t\t\t\t\trootUri : sMockServerUrl\n\t\t\t\t});\n\n\t\t\t\t// configure mock server with a delay of 1s\n\t\t\t\tMockServer.config({\n\t\t\t\t\tautoRespond : true,\n\t\t\t\t\tautoRespondAfter : (oUriParameters.get("serverDelay") || 1000)\n\t\t\t\t});\n\n\t\t\t\toMockServer.simulate(sMetadataUrl, {\n\t\t\t\t\tsMockdataBaseUrl : sJsonFilesUrl,\n\t\t\t\t\tbGenerateMissingMockData : true\n\t\t\t\t});\n\n\t\t\t\tvar aRequests = oMockServer.getRequests(),\n\t\t\t\t\tfnResponse = function (iErrCode, sMessage, aRequest) {\n\t\t\t\t\t\taRequest.response = function(oXhr){\n\t\t\t\t\t\t\toXhr.respond(iErrCode, {"Content-Type": "text/plain;charset=utf-8"}, sMessage);\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\n\t\t\t\t// handling the metadata error test\n\t\t\t\tif (oUriParameters.get("metadataError")) {\n\t\t\t\t\taRequests.forEach( function ( aEntry ) {\n\t\t\t\t\t\tif (aEntry.path.toString().indexOf("$metadata") > -1) {\n\t\t\t\t\t\t\tfnResponse(500, "metadata Error", aEntry);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Handling request errors\n\t\t\t\tif (sErrorParam) {\n\t\t\t\t\taRequests.forEach( function ( aEntry ) {\n\t\t\t\t\t\tif (aEntry.path.toString().indexOf(sEntity) > -1) {\n\t\t\t\t\t\t\tfnResponse(iErrorCode, sErrorParam, aEntry);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\toMockServer.start();\n\n\t\t\t\tjQuery.sap.log.info("Running the app with mock data");\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @public returns the mockserver of the app, should be used in integration tests\n\t\t\t * @returns {sap.ui.core.util.MockServer} the mockserver instance\n\t\t\t */\n\t\t\tgetMockServer : function () {\n\t\t\t\treturn oMockServer;\n\t\t\t}\n\t\t};\n\n\t}\n);',"ch/portof/model/formatter.js":'sap.ui.define([], function() {\n\t"use strict";\n\n\treturn {\n\t\t/**\n\t\t * Rounds the currency value to 2 digits\n\t\t *\n\t\t * @public\n\t\t * @param {string} sValue value to be formatted\n\t\t * @returns {string} formatted currency value with 2 digits\n\t\t */\n\t\tcurrencyValue: function(sValue) {\n\t\t\tjQuery.sap.require("sap.ui.core.format.NumberFormat");\n\t\t\tvar oNumberFormat = sap.ui.core.format.NumberFormat.getFloatInstance({\n\t\t\t\tmaxFractionDigits: 2,\n\t\t\t\tgroupingEnabled: true,\n\t\t\t\tgroupingSeparator: ",",\n\t\t\t\tdecimalSeparator: "."\n\t\t\t});\n\n\t\t\tif (!sValue) {\n\t\t\t\treturn "";\n\t\t\t}\n\n\t\t\t//\t\treturn parseFloat(sValue).toFixed(0);\n\t\t\treturn oNumberFormat.format(sValue);\n\t\t},\n\t\ttime: function(value) {\n\t\t\t// edm.time to xsd:duration Odata Model liefert edm.time erwartet aber xsd:duration zum speichern :(\n\t\t\t//                             console.log(value);                        \n\t\t\tif (value) {\n\n\t\t\t\tvar timeinmiliseconds = value.getTime();\n\n\t\t\t\tvar oTimeFormat = sap.ui.core.format.DateFormat.getTimeInstance({\n\t\t\t\t\tpattern: "PTHH\'H\'mm\'M\'ss\'S\'",\n\t\t\t\t\tUTC: true\n\t\t\t\t});\n\t\t\t\t//falls Zeitzonen Konvertierung nötig\n\t\t\t\tvar TZOffsetMs = 0; // new Date().getTimezoneOffset() * 60 * 1000;\n\t\t\t\t//                             console.log(TZOffsetMs);\n\t\t\t\tvar timeStr = oTimeFormat.format(new Date(timeinmiliseconds + TZOffsetMs));\n\t\t\t\treturn timeStr;\n\t\t\t} else {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t},\n\t\tUTCTimeToLocale: function(value) {\n\t\t\treturn new Date(value.getTime() - value.getTimezoneOffset() * 60000);\n\t\t},\n\t\tLocaleTimeToUTC: function(value) {\n\t\t\treturn new Date(value.getTime() + value.getTimezoneOffset() * 60000);\n\t\t},\n\t\tfnBooleanFormatter: function(value) {\n\t\t\tif (value === false) {\n\t\t\t\tvalue = null;\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\tconvertToBool: function(value) {\n\t\t\t//String zu bool umwandeln (invertiert)\n\t\t\t// return true;\n\t\t\tif (value == null || value == "") {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tdurationToTimestamp: function(value) {\n\t\t\tvar oDateFormat = sap.ui.core.format.DateFormat.getTimeInstance({\n\t\t\t\tpattern: "\'PT\'HH\'H\'mm\'M\'ss\'S\'"\n\t\t\t});\n\n\t\t\treturn oDateFormat.parse(value, true).getTime();\n\t\t}\n\t};\n\n});',"ch/portof/model/models.js":'sap.ui.define([\n\t\t"sap/ui/model/json/JSONModel",\n\t\t"sap/ui/Device"\n\t], function (JSONModel, Device) {\n\t\t"use strict";\n\n\t\treturn {\n\t\t\tcreateDeviceModel : function () {\n\t\t\t\tvar oModel = new JSONModel(Device);\n\t\t\t\toModel.setDefaultBindingMode("OneWay");\n\t\t\t\t//oModel.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);\n\t\t\t\treturn oModel;\n\t\t\t}\n\t\t};\n\n\t}\n);',"ch/portof/test/integration/AllJourneys.js":'jQuery.sap.require("sap.ui.qunit.qunit-css");\njQuery.sap.require("sap.ui.thirdparty.qunit");\njQuery.sap.require("sap.ui.qunit.qunit-junit");\nQUnit.config.autostart = false;\n\n// We cannot provide stable mock data out of the template.\n// If you introduce mock data, by adding .json files in your webapp/localService/mockdata folder you have to provide the following minimum data:\n// * At least 3 SchiffeSet in the list\n// * All 3 SchiffeSet have at least one RapporteSet\n\nsap.ui.require([\n\t"sap/ui/test/Opa5",\n\t"ch/portof/test/integration/pages/Common",\n\t"sap/ui/test/opaQunit",\n\t"ch/portof/test/integration/pages/App",\n\t"ch/portof/test/integration/pages/Browser",\n\t"ch/portof/test/integration/pages/Master",\n\t"ch/portof/test/integration/pages/Detail",\n\t"ch/portof/test/integration/pages/NotFound"\n], function (Opa5, Common) {\n\t"use strict";\n\tOpa5.extendConfig({\n\t\tarrangements: new Common(),\n\t\tviewNamespace: "ch.portof.view."\n\t});\n\n\tsap.ui.require([\n\t\t"ch/portof/test/integration/MasterJourney",\n\t\t"ch/portof/test/integration/NavigationJourney",\n\t\t"ch/portof/test/integration/NotFoundJourney",\n\t\t"ch/portof/test/integration/BusyJourney"\n\t], function () {\n\t\tQUnit.start();\n\t});\n});',"ch/portof/test/integration/BusyJourney.js":'sap.ui.define([\n\t\t"sap/ui/test/opaQunit"\n\t], function (opaTest) {\n\t\t"use strict";\n\n\t\tQUnit.module("Desktop busy indication");\n\n\t\topaTest("Should see a global busy indication while loading the metadata", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheAppWithDelay("", 5000);\n\n\t\t\t// Actions\n\t\t\tWhen.onTheAppPage.iLookAtTheScreen();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheAppPage.iShouldSeeTheBusyIndicator().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t\topaTest("Should see a busy indication on the master and detail after loading the metadata", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheAppWithDelay("", 2000);\n\n\t\t\t// Actions\n\t\t\tWhen.onTheAppPage.iWaitUntilTheBusyIndicatorIsGone();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.iShouldSeeTheBusyIndicator().\n\t\t\t\tand.theListHeaderDisplaysZeroHits();\n\t\t\tThen.onTheDetailPage.iShouldSeeTheBusyIndicator().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t}\n);',"ch/portof/test/integration/BusyJourneyPhone.js":'sap.ui.define([\n\t\t"sap/ui/test/opaQunit"\n\t], function (opaTest) {\n\t\t"use strict";\n\n\t\tQUnit.module("Phone busy indication");\n\n\t\topaTest("Should see a global busy indication while loading the metadata", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheAppWithDelay("", 5000);\n\n\t\t\t//Actions\n\t\t\tWhen.onTheAppPage.iLookAtTheScreen();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheAppPage.iShouldSeeTheBusyIndicator().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t\topaTest("Should see a busy indication on the master after loading the metadata", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheAppWithDelay("", 2000);\n\n\t\t\t//Actions\n\t\t\tWhen.onTheAppPage.iWaitUntilTheBusyIndicatorIsGone();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.iShouldSeeTheBusyIndicator().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t}\n);',"ch/portof/test/integration/MasterJourney.js":'sap.ui.define([\n\t\t"sap/ui/test/opaQunit"\n\t], function (opaTest) {\n\t\t"use strict";\n\n\t\tQUnit.module("Master List");\n\n\t\topaTest("Should see the master list with all entries", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheApp();\n\n\t\t\t//Actions\n\t\t\tWhen.onTheMasterPage.iLookAtTheScreen();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.iShouldSeeTheList().\n\t\t\t\tand.theListShouldHaveAllEntries().\n\t\t\t\tand.theHeaderShouldDisplayAllEntries();\n\t\t});\n\n\t\topaTest("Search for the First object should deliver results that contain the firstObject in the name", function (Given, When, Then) {\n\t\t\t//Actions\n\t\t\tWhen.onTheMasterPage.iSearchForTheFirstObject();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.theListShowsOnlyObjectsWithTheSearchStringInTheirTitle();\n\t\t});\n\n\t\topaTest("Entering something that cannot be found into search field and pressing search field\'s refresh should leave the list as it was", function (Given, When, Then) {\n\t\t\t//Actions\n\t\t\tWhen.onTheMasterPage.iTypeSomethingInTheSearchThatCannotBeFoundAndTriggerRefresh();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.theListHasEntries();\n\t\t});\n\n\t\topaTest("Entering something that cannot be found into search field and pressing \'search\' should display the list\'s \'not found\' message", function (Given, When, Then) {\n\t\t\t//Actions\n\t\t\tWhen.onTheMasterPage.iSearchForSomethingWithNoResults();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.iShouldSeeTheNoDataTextForNoSearchResults().\n\t\t\t\tand.theListHeaderDisplaysZeroHits();\n\t\t});\n\n\t\topaTest("Should display items again if the searchfield is emptied", function (Given, When, Then) {\n\t\t\t//Actions\n\t\t\tWhen.onTheMasterPage.iClearTheSearch();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.theListShouldHaveAllEntries().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\n\t}\n);',"ch/portof/test/integration/NavigationJourney.js":'sap.ui.define([\n\t\t"sap/ui/test/opaQunit"\n\t], function (opaTest) {\n\t\t"use strict";\n\n\t\tQUnit.module("Desktop navigation");\n\n\t\topaTest("Should start the app with empty hash: the hash should reflect the selection of the first item in the list", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheApp();\n\n\t\t\t//Actions\n\t\t\tWhen.onTheMasterPage.iRememberTheSelectedItem();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.theFirstItemShouldBeSelected();\n\t\t\tThen.onTheDetailPage.iShouldSeeTheRememberedObject().and.iShouldSeeNoBusyIndicator();\n\t\t\tThen.onTheBrowserPage.iShouldSeeTheHashForTheRememberedObject();\n\t\t});\n\n\t\topaTest("Should react on hashchange", function (Given, When, Then) {\n\t\t\t// Actions\n\t\t\tWhen.onTheMasterPage.iRememberTheIdOfListItemAtPosition(2);\n\t\t\tWhen.onTheBrowserPage.iChangeTheHashToTheRememberedItem();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheDetailPage.iShouldSeeTheRememberedObject().and.iShouldSeeNoBusyIndicator();\n\t\t\tThen.onTheMasterPage.theRememberedListItemShouldBeSelected();\n\t\t});\n\n\n\t\topaTest("Should navigate on press", function (Given, When, Then) {\n\t\t\t// Actions\n\t\t\tWhen.onTheMasterPage.iRememberTheIdOfListItemAtPosition(1).\n\t\t\t\tand.iPressOnTheObjectAtPosition(1);\n\n\t\t\t// Assertions\n\t\t\tThen.onTheDetailPage.iShouldSeeTheRememberedObject();\n\t\t});\n\n\t\topaTest("Detail Page Shows Object Details", function (Given, When, Then) {\n\t\t\t// Actions\n\t\t\tWhen.onTheDetailPage.iLookAtTheScreen();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheDetailPage.iShouldSeeTheObjectLineItemsList().\n\t\t\t\tand.theLineItemsListShouldHaveTheCorrectNumberOfItems().\n\t\t\t\tand.theLineItemsHeaderShouldDisplayTheAmountOfEntries();\n\n\t\t});\n\n\t\topaTest("Navigate to an object not on the client: no item should be selected and the object page should be displayed", function (Given, When, Then) {\n\t\t\t//Actions\n\t\t\tWhen.onTheMasterPage.iRememberAnIdOfAnObjectThatsNotInTheList();\n\t\t\tWhen.onTheBrowserPage.iChangeTheHashToTheRememberedItem();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheDetailPage.iShouldSeeTheRememberedObject().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t\topaTest("Start the App and simulate metadata error: MessageBox should be shown", function (Given, When, Then) {\n\t\t\t//Arrangement\n\t\t\tGiven.iStartMyAppOnADesktopToTestErrorHandler("metadataError=true");\n\n\t\t\t// Assertions\n\t\t\tThen.onTheAppPage.iShouldSeeTheMessageBox().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t\topaTest("Start the App and simulate bad request error: MessageBox should be shown", function (Given, When, Then) {\n\t\t\t//Arrangement\n\t\t\tGiven.iStartMyAppOnADesktopToTestErrorHandler("errorType=serverError");\n\n\t\t\t// Assertions\n\t\t\tThen.onTheAppPage.iShouldSeeTheMessageBox().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t}\n);',"ch/portof/test/integration/NavigationJourneyPhone.js":'sap.ui.define([\n\t\t"sap/ui/test/opaQunit"\n\t], function (opaTest) {\n\t\t"use strict";\n\n\t\tQUnit.module("Phone navigation");\n\n\t\topaTest("Should see the objects list", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheApp();\n\n\t\t\t//Actions\n\t\t\tWhen.onTheMasterPage.iLookAtTheScreen();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.iShouldSeeTheList();\n\t\t\tThen.onTheBrowserPage.iShouldSeeAnEmptyHash();\n\t\t});\n\n\t\topaTest("Should react on hashchange", function (Given, When, Then) {\n\t\t\t// Actions\n\t\t\tWhen.onTheMasterPage.iRememberTheIdOfListItemAtPosition(3);\n\t\t\tWhen.onTheBrowserPage.iChangeTheHashToTheRememberedItem();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheDetailPage.iShouldSeeTheRememberedObject();\n\t\t});\n\n\t\topaTest("Detail Page Shows Object Details", function (Given, When, Then) {\n\t\t\t// Actions\n\t\t\tWhen.onTheDetailPage.iLookAtTheScreen();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheDetailPage.iShouldSeeTheObjectLineItemsList().\n\t\t\t\tand.theLineItemsListShouldHaveTheCorrectNumberOfItems().\n\t\t\t\tand.theLineItemsHeaderShouldDisplayTheAmountOfEntries();\n\t\t});\n\n\t\topaTest("Should navigate on press", function (Given, When, Then) {\n\t\t\t// Actions\n\t\t\tWhen.onTheDetailPage.iPressTheBackButton();\n\t\t\tWhen.onTheMasterPage.iRememberTheIdOfListItemAtPosition(2).\n\t\t\t\tand.iPressOnTheObjectAtPosition(2);\n\n\t\t\t// Assertions\n\t\t\tThen.onTheDetailPage.iShouldSeeTheRememberedObject().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t}\n);',"ch/portof/test/integration/NotFoundJourney.js":'sap.ui.define([\n\t\t"sap/ui/test/opaQunit"\n\t], function (opaTest) {\n\t\t"use strict";\n\n\t\tQUnit.module("Desktop not found");\n\n\t\topaTest("Should see the resource not found page and no selection in the master list when navigating to an invalid hash", function (Given, When, Then) {\n\t\t\t//Arrangement\n\t\t\tGiven.iStartTheApp();\n\n\t\t\t//Actions\n\t\t\tWhen.onTheMasterPage.iWaitUntilTheListIsLoaded()\n\t\t\t\t.and.iWaitUntilTheFirstItemIsSelected();\n\t\t\tWhen.onTheBrowserPage.iChangeTheHashToSomethingInvalid();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheNotFoundPage.iShouldSeeTheNotFoundPage().\n\t\t\t\tand.theNotFoundPageShouldSayResourceNotFound();\n\t\t\tThen.onTheMasterPage.theListShouldHaveNoSelection().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t\topaTest("Should see the not found page if the hash is something that matches no route", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheApp({ hash : "somethingThatDoesNotExist" });\n\n\t\t\t// Actions\n\t\t\tWhen.onTheNotFoundPage.iLookAtTheScreen();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheNotFoundPage.iShouldSeeTheNotFoundPage().\n\t\t\t\tand.theNotFoundPageShouldSayResourceNotFound().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t\topaTest("Should see the not found master and detail page if an invalid object id has been called", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheApp({ hash : "/SchiffeSet/SomeInvalidObjectId" });\n\n\t\t\t//Actions\n\t\t\tWhen.onTheNotFoundPage.iLookAtTheScreen();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheNotFoundPage.iShouldSeeTheObjectNotFoundPage().\n\t\t\t\tand.theNotFoundPageShouldSayObjectNotFound().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t\topaTest("Should see the not found text for no search results", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheApp();\n\n\t\t\t//Actions\n\t\t\tWhen.onTheMasterPage.iSearchForSomethingWithNoResults();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.iShouldSeeTheNoDataTextForNoSearchResults().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t}\n);',"ch/portof/test/integration/NotFoundJourneyPhone.js":'sap.ui.define([\n\t\t"sap/ui/test/opaQunit"\n\t], function (opaTest) {\n\t\t"use strict";\n\n\t\tQUnit.module("Phone not found");\n\n\t\topaTest("Should see the not found page if the hash is something that matches no route", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheApp({ hash : "somethingThatDoesNotExist" });\n\n\t\t\t// Actions\n\t\t\tWhen.onTheNotFoundPage.iLookAtTheScreen();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheNotFoundPage.iShouldSeeTheNotFoundPage().\n\t\t\t\tand.theNotFoundPageShouldSayResourceNotFound();\n\t\t});\n\n\t\topaTest("Should end up on the master list, if the back button is pressed", function (Given, When, Then) {\n\t\t\t// Actions\n\t\t\tWhen.onTheNotFoundPage.iPressTheBackButton("NotFound");\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.iShouldSeeTheList().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t\topaTest("Should see the not found master and detail page if an invalid object id has been called", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheApp({ hash : "/SchiffeSet/SomeInvalidObjectId" });\n\n\t\t\t// Actions\n\t\t\tWhen.onTheNotFoundPage.iLookAtTheScreen();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheNotFoundPage.iShouldSeeTheObjectNotFoundPage().\n\t\t\t\tand.theNotFoundPageShouldSayObjectNotFound();\n\t\t});\n\n\t\topaTest("Should end up on the master list, if the back button is pressed", function (Given, When, Then) {\n\t\t\t// Actions\n\t\t\tWhen.onTheNotFoundPage.iPressTheBackButton("DetailObjectNotFound");\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.iShouldSeeTheList().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t\topaTest("Should see the not found text for no search results", function (Given, When, Then) {\n\t\t\t// Arrangements\n\t\t\tGiven.iStartTheApp();\n\n\t\t\t// Actions\n\t\t\tWhen.onTheMasterPage.iSearchForSomethingWithNoResults();\n\n\t\t\t// Assertions\n\t\t\tThen.onTheMasterPage.iShouldSeeTheNoDataTextForNoSearchResults().\n\t\t\t\tand.iTeardownMyAppFrame();\n\t\t});\n\n\t}\n);',"ch/portof/test/integration/pages/App.js":'sap.ui.define([\n\t\t"sap/ui/test/Opa5",\n\t\t"ch/portof/test/integration/pages/Common",\n\t\t"sap/ui/test/matchers/PropertyStrictEquals"\n\t], function(Opa5, Common, PropertyStrictEquals) {\n\t\t"use strict";\n\n\t\tvar sViewName = "App",\n\t\t\tsAppControl = "idAppControl";\n\n\t\tOpa5.createPageObjects({\n\t\t\tonTheAppPage : {\n\t\t\t\tbaseClass : Common,\n\n\t\t\t\tactions : {\n\n\t\t\t\t\tiWaitUntilTheBusyIndicatorIsGone : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : sAppControl,\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\t// inline-matcher directly as function\n\t\t\t\t\t\t\tmatchers : function(oRootView) {\n\t\t\t\t\t\t\t\t// we set the view busy, so we need to query the parent of the app\n\t\t\t\t\t\t\t\treturn oRootView.getParent().getBusy() === false;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The app is still busy."\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tassertions : {\n\n\t\t\t\t\tiShouldSeeTheBusyIndicator : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : sAppControl,\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tsuccess : function (oRootView) {\n\t\t\t\t\t\t\t\t// we set the view busy, so we need to query the parent of the app\n\t\t\t\t\t\t\t\tOpa5.assert.ok(oRootView.getParent().getBusy(), "The app is busy");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The app is not busy."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldSeeTheMessageBox : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tsearchOpenDialogs: true,\n\t\t\t\t\t\t\tcontrolType: "sap.m.Dialog",\n\t\t\t\t\t\t\tmatchers : new PropertyStrictEquals({ name: "type", value: "Message"}),\n\t\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "The correct MessageBox was shown");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\t}\n);',"ch/portof/test/integration/pages/Browser.js":'sap.ui.define([\n\t\t"sap/ui/test/Opa5",\n\t\t"ch/portof/test/integration/pages/Common"\n\t], function(Opa5, Common) {\n\t\t"use strict";\n\n\t\tOpa5.createPageObjects({\n\t\t\tonTheBrowserPage : {\n\t\t\t\tbaseClass : Common,\n\n\t\t\t\tactions : {\n\n\t\t\t\t\tiChangeTheHashToObjectN : function (iObjIndex) {\n\t\t\t\t\t\treturn this.waitFor(this.createAWaitForAnEntitySet({\n\t\t\t\t\t\t\tentitySet : "Objects",\n\t\t\t\t\t\t\tsuccess : function (aEntitySet) {\n\t\t\t\t\t\t\t\tOpa5.getHashChanger().setHash("/SchiffeSet/" + aEntitySet[iObjIndex].Schiffsnummer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t},\n\n\t\t\t\t\tiChangeTheHashToTheRememberedItem : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\tvar sObjectId = this.getContext().currentItem.id;\n\t\t\t\t\t\t\t\tOpa5.getHashChanger().setHash("/SchiffeSet/" + sObjectId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiChangeTheHashToSomethingInvalid : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\tOpa5.getHashChanger().setHash("/somethingInvalid");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tassertions : {\n\n\t\t\t\t\tiShouldSeeTheHashForObjectN : function (iObjIndex) {\n\t\t\t\t\t\treturn this.waitFor(this.createAWaitForAnEntitySet({\n\t\t\t\t\t\t\tentitySet : "Objects",\n\t\t\t\t\t\t\tsuccess : function (aEntitySet) {\n\t\t\t\t\t\t\t\tvar oHashChanger = Opa5.getHashChanger(),\n\t\t\t\t\t\t\t\t\tsHash = oHashChanger.getHash();\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(sHash, "SchiffeSet/" + aEntitySet[iObjIndex].Schiffsnummer, "The Hash is not correct");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldSeeTheHashForTheRememberedObject : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\tvar sObjectId = this.getContext().currentItem.id,\n\t\t\t\t\t\t\t\t\toHashChanger = Opa5.getHashChanger(),\n\t\t\t\t\t\t\t\t\tsHash = oHashChanger.getHash();\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(sHash, "SchiffeSet/" + sObjectId, "The Hash is not correct");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldSeeAnEmptyHash : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\tvar oHashChanger = Opa5.getHashChanger(),\n\t\t\t\t\t\t\t\t\tsHash = oHashChanger.getHash();\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(sHash, "", "The Hash should be empty");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The Hash is not Correct!"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\t}\n);',"ch/portof/test/integration/pages/Common.js":'sap.ui.define([\n\t\t"sap/ui/test/Opa5"\n\t], function(Opa5) {\n\t\t"use strict";\n\n\t\tfunction getFrameUrl (sHash, sUrlParameters) {\n\t\t\tvar sUrl = jQuery.sap.getResourcePath("ch/portof/app", ".html");\n\t\t\tsHash = sHash || "";\n\t\t\tsUrlParameters = sUrlParameters ? "?" + sUrlParameters : "";\n\n\t\t\tif (sHash) {\n\t\t\t\tsHash = "#" + (sHash.indexOf("/") === 0 ? sHash.substring(1) : sHash);\n\t\t\t} else {\n\t\t\t\tsHash = "";\n\t\t\t}\n\n\t\t\treturn sUrl + sUrlParameters + sHash;\n\t\t}\n\n\t\treturn Opa5.extend("ch.portof.test.integration.pages.Common", {\n\n\t\t\tiStartTheApp : function (oOptions) {\n\t\t\t\toOptions = oOptions || {};\n\t\t\t\t// Start the app with a minimal delay to make tests run fast but still async to discover basic timing issues\n\t\t\t\tthis.iStartMyAppInAFrame(getFrameUrl(oOptions.hash, "serverDelay=50"));\n\t\t\t},\n\n\t\t\tiStartTheAppWithDelay : function (sHash, iDelay) {\n\t\t\t\tthis.iStartMyAppInAFrame(getFrameUrl(sHash, "serverDelay=" + iDelay));\n\t\t\t},\n\n\t\t\tiLookAtTheScreen : function () {\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tiStartMyAppOnADesktopToTestErrorHandler : function (sParam) {\n\t\t\t\tthis.iStartMyAppInAFrame(getFrameUrl("", sParam));\n\t\t\t},\n\n\t\t\tcreateAWaitForAnEntitySet : function  (oOptions) {\n\t\t\t\treturn {\n\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\tvar bMockServerAvailable = false,\n\t\t\t\t\t\t\taEntitySet;\n\n\t\t\t\t\t\tthis.getMockServer().then(function (oMockServer) {\n\t\t\t\t\t\t\taEntitySet = oMockServer.getEntitySetData(oOptions.entitySet);\n\t\t\t\t\t\t\tbMockServerAvailable = true;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tcheck: function () {\n\t\t\t\t\t\t\t\treturn bMockServerAvailable;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\toOptions.success.call(this, aEntitySet);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tgetMockServer : function () {\n\t\t\t\treturn new Promise(function (success) {\n\t\t\t\t\tOpa5.getWindow().sap.ui.require(["ch/portof/localService/mockserver"], function (mockserver) {\n\t\t\t\t\t\tsuccess(mockserver.getMockServer());\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\n\t\t\ttheUnitNumbersShouldHaveTwoDecimals : function (sControlType, sViewName, sSuccessMsg, sErrMsg) {\n\t\t\t\tvar rTwoDecimalPlaces =  /^-?\\d+\\.\\d{2}$/;\n\n\t\t\t\treturn this.waitFor({\n\t\t\t\t\tcontrolType : sControlType,\n\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\tsuccess : function (aNumberControls) {\n\t\t\t\t\t\tOpa5.assert.ok(aNumberControls.every(function(oNumberControl){\n\t\t\t\t\t\t\t\treturn rTwoDecimalPlaces.test(oNumberControl.getNumber());\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tsSuccessMsg);\n\t\t\t\t\t},\n\t\t\t\t\terrorMessage : sErrMsg\n\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\n\t}\n);',
"ch/portof/test/integration/pages/Detail.js":'sap.ui.define([\n\t\t"sap/ui/test/Opa5",\n\t\t"sap/ui/test/actions/Press",\n\t\t"ch/portof/test/integration/pages/Common",\n\t\t"sap/ui/test/matchers/AggregationLengthEquals",\n\t\t"sap/ui/test/matchers/AggregationFilled",\n\t\t"sap/ui/test/matchers/PropertyStrictEquals"\n\t], function(Opa5, Press, Common, AggregationLengthEquals, AggregationFilled, PropertyStrictEquals) {\n\t\t"use strict";\n\n\t\tvar sViewName = "Detail";\n\n\t\tOpa5.createPageObjects({\n\t\t\tonTheDetailPage : {\n\t\t\t\tbaseClass : Common,\n\n\t\t\t\tactions : {\n\n\t\t\t\t\tiPressTheBackButton : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "page",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tactions: new Press(),\n\t\t\t\t\t\t\terrorMessage : "Did not find the nav button on detail page"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tassertions : {\n\n\t\t\t\t\tiShouldSeeTheBusyIndicator : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "page",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tsuccess : function (oPage) {\n\t\t\t\t\t\t\t\t// we set the view busy, so we need to query the parent of the app\n\t\t\t\t\t\t\t\tOpa5.assert.ok(oPage.getBusy(), "The detail view is busy");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The detail view is not busy."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldSeeNoBusyIndicator : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "page",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : function (oPage) {\n\t\t\t\t\t\t\t\treturn !oPage.getBusy();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess : function (oPage) {\n\t\t\t\t\t\t\t\t// we set the view busy, so we need to query the parent of the app\n\t\t\t\t\t\t\t\tOpa5.assert.ok(!oPage.getBusy(), "The detail view is not busy");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The detail view is busy."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheObjectPageShowsTheFirstObject : function () {\n\t\t\t\t\t\treturn this.iShouldBeOnTheObjectNPage(0);\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldBeOnTheObjectNPage : function (iObjIndex) {\n\t\t\t\t\t\treturn this.waitFor(this.createAWaitForAnEntitySet({\n\t\t\t\t\t\t\tentitySet : "SchiffeSet",\n\t\t\t\t\t\t\tsuccess : function (aEntitySet) {\n\t\t\t\t\t\t\t\tvar sItemName = aEntitySet[iObjIndex].Name;\n\n\t\t\t\t\t\t\t\tthis.waitFor({\n\t\t\t\t\t\t\t\t\tcontrolType : "sap.m.ObjectHeader",\n\t\t\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\t\t\tmatchers : new PropertyStrictEquals({name : "title", value: aEntitySet[iObjIndex].Name}),\n\t\t\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "was on the first object page with the name " + sItemName);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terrorMessage : "First object is not shown"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldSeeTheRememberedObject : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\tvar sBindingPath = this.getContext().currentItem.bindingPath;\n\t\t\t\t\t\t\t\tthis._waitForPageBindingPath(sBindingPath);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\t_waitForPageBindingPath : function (sBindingPath) {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "page",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : function (oPage) {\n\t\t\t\t\t\t\t\treturn oPage.getBindingContext() && oPage.getBindingContext().getPath() === sBindingPath;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess : function (oPage) {\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(oPage.getBindingContext().getPath(), sBindingPath, "was on the remembered detail page");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "Remembered object " + sBindingPath + " is not shown"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldSeeTheObjectLineItemsList : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "lineItemsList",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(oList, "Found the line items list.");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheLineItemsListShouldHaveTheCorrectNumberOfItems : function () {\n\t\t\t\t\t\treturn this.waitFor(this.createAWaitForAnEntitySet({\n\t\t\t\t\t\t\tentitySet : "RapporteSet",\n\t\t\t\t\t\t\tsuccess : function (aEntitySet) {\n\n\t\t\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\t\t\tid : "lineItemsList",\n\t\t\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\t\t\tmatchers : new AggregationFilled({name : "items"}),\n\t\t\t\t\t\t\t\t\tcheck: function (oList) {\n\n\t\t\t\t\t\t\t\t\t\tvar sObjectID = oList.getBindingContext().getProperty("Schiffsnummer");\n\n\t\t\t\t\t\t\t\t\t\tvar iLength = aEntitySet.filter(function (oLineItem) {\n\t\t\t\t\t\t\t\t\t\t\treturn oLineItem.Schiffsnummer === sObjectID;\n\t\t\t\t\t\t\t\t\t\t}).length;\n\n\t\t\t\t\t\t\t\t\t\treturn oList.getItems().length === iLength;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "The list has the correct number of items");\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terrorMessage : "The list does not have the correct number of items."\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t},\n\n\t\t\t\t\ttheLineItemsHeaderShouldDisplayTheAmountOfEntries : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "lineItemsList",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : new AggregationFilled({name : "items"}),\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\tvar iNumberOfItems = oList.getItems().length;\n\t\t\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\t\t\tid : "lineItemsHeader",\n\t\t\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\t\t\tmatchers : new PropertyStrictEquals({name: "text", value: "<LineItemNamePlural> (" + iNumberOfItems + ")"}),\n\t\t\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "The line item list displays " + iNumberOfItems + " items");\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terrorMessage : "The line item list does not display " + iNumberOfItems + " items."\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldSeeTheShareEmailButton : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "shareEmail",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "The E-Mail button is visible");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The E-Mail button was not found"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\t}\n);',"ch/portof/test/integration/pages/Master.js":'sap.ui.define([\n\t\t"sap/ui/test/Opa5",\n\t\t"sap/ui/test/actions/Press",\n\t\t"sap/ui/test/actions/EnterText",\n\t\t"ch/portof/test/integration/pages/Common",\n\t\t"sap/ui/test/matchers/AggregationLengthEquals",\n\t\t"sap/ui/test/matchers/AggregationFilled",\n\t\t"sap/ui/test/matchers/PropertyStrictEquals"\n\t], function(Opa5, Press, EnterText, Common, AggregationLengthEquals, AggregationFilled, PropertyStrictEquals) {\n\t\t"use strict";\n\n\t\tvar sViewName = "Master",\n\t\t\tsSomethingThatCannotBeFound = "*#-Q@@||",\n\t\t\tiGroupingBoundary = 100;\n\n\t\tOpa5.createPageObjects({\n\t\t\tonTheMasterPage : {\n\t\t\t\tbaseClass : Common,\n\n\t\t\t\tactions : {\n\n\t\t\t\t\tiWaitUntilTheListIsLoaded : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : new AggregationFilled({name : "items"}),\n\t\t\t\t\t\t\terrorMessage : "The master list has not been loaded"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiWaitUntilTheFirstItemIsSelected : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : function(oList) {\n\t\t\t\t\t\t\t\t// wait until the list has a selected item\n\t\t\t\t\t\t\t\tvar oSelectedItem = oList.getSelectedItem();\n\t\t\t\t\t\t\t\treturn oSelectedItem && oList.getItems().indexOf(oSelectedItem) === 0;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The first item of the master list is not selected"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiSortTheListOnName : function () {\n\t\t\t\t\t\treturn this.iPressItemInSelectInFooter("sort-select", "masterSort1");\n\t\t\t\t\t},\n\n\t\t\t\t\tiSortTheListOnUnitNumber : function () {\n\t\t\t\t\t\treturn this.iPressItemInSelectInFooter("sort-select", "masterSort2");\n\t\t\t\t\t},\n\n\t\t\t\t\tiRemoveFilterFromTheList : function () {\n\t\t\t\t\t\treturn this.iPressItemInSelectInFooter("filter-select", "masterFilterNone");\n\t\t\t\t\t},\n\n\t\t\t\t\tiFilterTheListLessThan100UoM : function () {\n\t\t\t\t\t\treturn this.iPressItemInSelectInFooter("filter-select", "masterFilter1");\n\t\t\t\t\t},\n\n\t\t\t\t\tiFilterTheListMoreThan100UoM : function () {\n\t\t\t\t\t\treturn this.iPressItemInSelectInFooter("filter-select", "masterFilter2");\n\t\t\t\t\t},\n\n\t\t\t\t\tiGroupTheList : function () {\n\t\t\t\t\t\treturn this.iPressItemInSelectInFooter("group-select", "masterGroup1");\n\t\t\t\t\t},\n\n\t\t\t\t\tiRemoveListGrouping : function () {\n\t\t\t\t\t\treturn this.iPressItemInSelectInFooter("group-select", "masterGroupNone");\n\t\t\t\t\t},\n\n\t\t\t\t\tiOpenViewSettingsDialog : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "filter-button",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tcheck : function () {\n\t\t\t\t\t\t\t\tvar oViewSettingsDialog = Opa5.getWindow().sap.ui.getCore().byId("viewSettingsDialog");\n\t\t\t\t\t\t\t\t// check if the dialog is still open - wait until it is closed\n\t\t\t\t\t\t\t\t// view settings dialog has no is open function and no open close events so checking the domref is the only option here\n\t\t\t\t\t\t\t\t// if there is no view settings dialog yet, there is no need to wait\n\t\t\t\t\t\t\t\treturn !oViewSettingsDialog || oViewSettingsDialog.$().length === 0;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tactions : new Press(),\n\t\t\t\t\t\t\terrorMessage : "Did not find the \'filter\' button."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiSelectListItemInViewSettingsDialog : function (sListItemTitle) {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tsearchOpenDialogs : true,\n\t\t\t\t\t\t\tcontrolType : "sap.m.StandardListItem",\n\t\t\t\t\t\t\tmatchers :  new Opa5.matchers.PropertyStrictEquals({name : "title", value : sListItemTitle}),\n\t\t\t\t\t\t\tactions: new Press(),\n\t\t\t\t\t\t\terrorMessage : "Did not find list item with title " + sListItemTitle + " in View Settings Dialog."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiPressOKInViewSelectionDialog : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tsearchOpenDialogs : true,\n\t\t\t\t\t\t\tcontrolType : "sap.m.Button",\n\t\t\t\t\t\t\tmatchers :  new Opa5.matchers.PropertyStrictEquals({name : "text", value : "OK"}),\n\t\t\t\t\t\t\tactions : new Press(),\n\t\t\t\t\t\t\terrorMessage : "Did not find the ViewSettingDialog\'s \'OK\' button."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiPressResetInViewSelectionDialog : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tsearchOpenDialogs : true,\n\t\t\t\t\t\t\tcontrolType : "sap.m.Button",\n\t\t\t\t\t\t\tmatchers : new Opa5.matchers.PropertyStrictEquals({name : "icon", value : "sap-icon://refresh"}),\n\t\t\t\t\t\t\tactions : new Press(),\n\t\t\t\t\t\t\terrorMessage : "Did not find the ViewSettingDialog\'s \'Reset\' button."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiPressItemInSelectInFooter : function (sSelect, sItem) {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : sSelect,\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tsuccess : function (oSelect) {\n\t\t\t\t\t\t\t\toSelect.open();\n\t\t\t\t\t\t\t\tthis.waitFor({\n\t\t\t\t\t\t\t\t\tid : sItem,\n\t\t\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\t\t\tsuccess : function(oElem){\n\t\t\t\t\t\t\t\t\t\toElem.$().trigger("tap");\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terrorMessage : "Did not find the " + sItem + " element in select"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\t\terrorMessage : "Did not find the " + sSelect + " select"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiRememberTheSelectedItem : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : function (oList) {\n\t\t\t\t\t\t\t\treturn oList.getSelectedItem();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess : function (oListItem) {\n\t\t\t\t\t\t\t\tthis.iRememberTheListItem(oListItem);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The list does not have a selected item so nothing can be remembered"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiRememberTheIdOfListItemAtPosition : function (iPosition) {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : function (oList) {\n\t\t\t\t\t\t\t\treturn oList.getItems()[iPosition];\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess : function (oListItem) {\n\t\t\t\t\t\t\t\tthis.iRememberTheListItem(oListItem);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The list does not have an item at the index " + iPosition\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiRememberAnIdOfAnObjectThatsNotInTheList : function () {\n\t\t\t\t\t\treturn this.waitFor(this.createAWaitForAnEntitySet({\n\t\t\t\t\t\t\tentitySet : "SchiffeSet",\n\t\t\t\t\t\t\tsuccess : function (aEntityData) {\n\t\t\t\t\t\t\t\tthis.waitFor({\n\t\t\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\t\t\tmatchers : new AggregationFilled({name: "items"}),\n\t\t\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\t\t\tvar sCurrentId,\n\t\t\t\t\t\t\t\t\t\t\taItemsNotInTheList = aEntityData.filter(function (oObject) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn !oList.getItems().some(function (oListItem) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn oListItem.getBindingContext().getProperty("Schiffsnummer") === oObject.Schiffsnummer;\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tif (!aItemsNotInTheList.length) {\n\t\t\t\t\t\t\t\t\t\t\t// Not enough items all of them are displayed so we take the last one\n\t\t\t\t\t\t\t\t\t\t\tsCurrentId = aEntityData[aEntityData.length - 1].Schiffsnummer;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsCurrentId = aItemsNotInTheList[0].Schiffsnummer;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tvar oCurrentItem = this.getContext().currentItem;\n\t\t\t\t\t\t\t\t\t\t// Construct a binding path since the list item is not created yet and we only have the id.\n\t\t\t\t\t\t\t\t\t\toCurrentItem.bindingPath = "/" + oList.getModel().createKey("SchiffeSet", {\n\t\t\t\t\t\t\t\t\t\t\tSchiffsnummer : sCurrentId\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\toCurrentItem.id = sCurrentId;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terrorMessage : "the model does not have a item that is not in the list"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t},\n\n\t\t\t\t\tiPressOnTheObjectAtPosition : function (iPositon) {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : function (oList) {\n\t\t\t\t\t\t\t\treturn oList.getItems()[iPositon];\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tactions : new Press(),\n\t\t\t\t\t\t\terrorMessage : "List \'list\' in view \'" + sViewName + "\' does not contain an ObjectListItem at position \'" + iPositon + "\'"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiSearchForTheFirstObject : function (){\n\t\t\t\t\t\tvar sFirstObjectTitle;\n\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers: new AggregationFilled({name : "items"}),\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\tsFirstObjectTitle = oList.getItems()[0].getTitle();\n\t\t\t\t\t\t\t\treturn this.iSearchForValue(new EnterText({text: sFirstObjectTitle}), new Press());\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "Did not find list items while trying to search for the first item."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiTypeSomethingInTheSearchThatCannotBeFoundAndTriggerRefresh : function () {\n\t\t\t\t\t\tvar fireRefreshButtonPressedOnSearchField = function (oSearchField) {\n\n\t\t\t\t\t\t\t/*eslint-disable new-cap */\n\t\t\t\t\t\t\tvar oEvent = jQuery.Event("touchend");\n\t\t\t\t\t\t\t/*eslint-enable new-cap */\n\t\t\t\t\t\t\toEvent.originalEvent = {refreshButtonPressed: true, id: oSearchField.getId()};\n\t\t\t\t\t\t\toEvent.target = oSearchField;\n\t\t\t\t\t\t\toEvent.srcElement = oSearchField;\n\t\t\t\t\t\t\tjQuery.extend(oEvent, oEvent.originalEvent);\n\n\t\t\t\t\t\t\toSearchField.fireSearch(oEvent);\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn this.iSearchForValue([new EnterText({text: sSomethingThatCannotBeFound}), fireRefreshButtonPressedOnSearchField]);\n\t\t\t\t\t},\n\n\t\t\t\t\tiSearchForValue : function (aActions) {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "searchField",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tactions: aActions,\n\t\t\t\t\t\t\terrorMessage : "Failed to find search field in Master view.\'"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiClearTheSearch : function () {\n\t\t\t\t\t\t//can not use \'EnterText\' action to enter empty strings (yet)\n\t\t\t\t\t\tvar fnClearSearchField = function(oSearchField) {\n\t\t\t\t\t\t\toSearchField.clear();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn this.iSearchForValue([fnClearSearchField]);\n\t\t\t\t\t},\n\n\t\t\t\t\tiSearchForSomethingWithNoResults : function () {\n\t\t\t\t\t\treturn this.iSearchForValue([new EnterText({text: sSomethingThatCannotBeFound}), new Press()]);\n\t\t\t\t\t},\n\n\t\t\t\t\tiRememberTheListItem : function (oListItem) {\n\t\t\t\t\t\tvar oBindingContext = oListItem.getBindingContext();\n\t\t\t\t\t\tthis.getContext().currentItem = {\n\t\t\t\t\t\t\tbindingPath: oBindingContext.getPath(),\n\t\t\t\t\t\t\tid: oBindingContext.getProperty("Schiffsnummer"),\n\t\t\t\t\t\t\ttitle: oBindingContext.getProperty("Name")\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tassertions : {\n\n\t\t\t\t\tiShouldSeeTheBusyIndicator : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\t// we set the list busy, so we need to query the parent of the app\n\t\t\t\t\t\t\t\tOpa5.assert.ok(oList.getBusy(), "The master list is busy");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The master list is not busy."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListGroupShouldBeFilteredOnUnitNumberValue20OrLess : function () {\n\t\t\t\t\t\treturn this.theListShouldBeFilteredOnUnitNumberValue(20, false, {iLow : 1, iHigh : 2});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListShouldContainAGroupHeader : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tcontrolType : "sap.m.GroupHeaderListItem",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "Master list is grouped");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "Master list is not grouped"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListHeaderDisplaysZeroHits : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tid : "page",\n\t\t\t\t\t\t\tmatchers : new PropertyStrictEquals({name : "title", value : "<ObjectName> (0)"}),\n\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "The list header displays zero hits");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The list header still has items"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListHasEntries : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tmatchers : new AggregationFilled({\n\t\t\t\t\t\t\t\tname : "items"\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "The list has items");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The list had no items"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListShouldNotContainGroupHeaders : function () {\n\t\t\t\t\t\tfunction fnIsGroupHeader (oElement) {\n\t\t\t\t\t\t\treturn oElement.getMetadata().getName() === "sap.m.GroupHeaderListItem";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tmatchers : function (oList) {\n\t\t\t\t\t\t\t\treturn !oList.getItems().some(fnIsGroupHeader);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess : function() {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "Master list does not contain a group header although grouping has been removed.");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "Master list still contains a group header although grouping has been removed."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListShouldBeSortedAscendingOnUnitNumber : function () {\n\t\t\t\t\t\treturn this.theListShouldBeSortedAscendingOnField("");\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListShouldBeSortedAscendingOnName : function () {\n\t\t\t\t\t\treturn this.theListShouldBeSortedAscendingOnField("Name");\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListShouldBeSortedAscendingOnField : function (sField) {\n\t\t\t\t\t\tfunction fnCheckSort (oList){\n\t\t\t\t\t\t\tvar oLastValue = null,\n\t\t\t\t\t\t\t\tfnIsOrdered = function (oElement) {\n\t\t\t\t\t\t\t\t\tif (!oElement.getBindingContext()) {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar oCurrentValue = oElement.getBindingContext().getProperty(sField);\n\n\t\t\t\t\t\t\t\t\tif (oCurrentValue === undefined) {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (!oLastValue || oCurrentValue >= oLastValue){\n\t\t\t\t\t\t\t\t\t\toLastValue = oCurrentValue;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\treturn oList.getItems().every(fnIsOrdered);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tmatchers : fnCheckSort,\n\t\t\t\t\t\t\tsuccess : function() {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "Master list has been sorted correctly for field \'" + sField + "\'.");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "Master list has not been sorted correctly for field \'" + sField + "\'."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListShouldBeFilteredOnUnitNumberValue : function(iThreshhold, bGreaterThan, oRange) {\n\n\t\t\t\t\t\tfunction fnCheckFilter (oList){\n\t\t\t\t\t\t\tvar fnIsGreaterThanMaxValue = function (oElement) {\n\t\t\t\t\t\t\t\tif (bGreaterThan) {\n\t\t\t\t\t\t\t\t\treturn oElement.getBindingContext().getProperty("UnitNumber") < iThreshhold;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn oElement.getBindingContext().getProperty("UnitNumber") > iThreshhold;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvar aItems = oList.getItems();\n\t\t\t\t\t\t\tif (oRange) {\n\t\t\t\t\t\t\t\taItems = aItems.slice(oRange.iLow, oRange.iHigh);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn !aItems.some(fnIsGreaterThanMaxValue);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : fnCheckFilter,\n\t\t\t\t\t\t\tsuccess : function(){\n\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "Master list has been filtered correctly with filter value \'" + iThreshhold + "\'.");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "Master list has not been filtered correctly with filter value \'" + iThreshhold + "\'."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheMasterListShouldBeFilteredOnUnitNumberValueMoreThanTheGroupBoundary : function(){\n\t\t\t\t\t\treturn this.theListShouldBeFilteredOnUnitNumberValue(iGroupingBoundary, true);\n\t\t\t\t\t},\n\n\t\t\t\t\ttheMasterListShouldBeFilteredOnUnitNumberValueLessThanTheGroupBoundary : function(){\n\t\t\t\t\t\treturn this.theListShouldBeFilteredOnUnitNumberValue(iGroupingBoundary);\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldSeeTheList : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(oList, "Found the object List");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "Can\'t see the master list."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListShowsOnlyObjectsWithTheSearchStringInTheirTitle : function () {\n\t\t\t\t\t\tthis.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : new AggregationFilled({name : "items"}),\n\t\t\t\t\t\t\tcheck : function(oList) {\n\t\t\t\t\t\t\t\tvar sTitle = oList.getItems()[0].getTitle(),\n\t\t\t\t\t\t\t\t\tbEveryItemContainsTheTitle = oList.getItems().every(function (oItem) {\n\t\t\t\t\t\t\t\t\t\treturn oItem.getTitle().indexOf(sTitle) !== -1;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn bEveryItemContainsTheTitle;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "Every item did contain the title");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The list did not have items"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListShouldHaveNEntries : function (iObjIndex) {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : [ new AggregationLengthEquals({name : "items", length : iObjIndex}) ],\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(oList.getItems().length, iObjIndex, "The list has x items");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "List does not have " + iObjIndex + " entries."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListShouldHaveAllEntries : function () {\n\t\t\t\t\t\tvar aAllEntities,\n\t\t\t\t\t\t\tiExpectedNumberOfItems;\n\t\t\t\t\t\t// retrieve all SchiffeSet to be able to check for the total amount\n\t\t\t\t\t\tthis.waitFor(this.createAWaitForAnEntitySet({\n\t\t\t\t\t\t\tentitySet : "SchiffeSet",\n\t\t\t\t\t\t\tsuccess : function (aEntityData) {\n\t\t\t\t\t\t\t\taAllEntities = aEntityData;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : function (oList) {\n\t\t\t\t\t\t\t\t// If there are less items in the list than the growingThreshold, only check for this number.\n\t\t\t\t\t\t\t\tiExpectedNumberOfItems = Math.min(oList.getGrowingThreshold(), aAllEntities.length);\n\t\t\t\t\t\t\t\treturn new AggregationLengthEquals({name : "items", length : iExpectedNumberOfItems}).isMatching(oList);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(oList.getItems().length, iExpectedNumberOfItems, "The growing list dsiplays all items");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "List does not display all entries."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldSeeTheNoDataTextForNoSearchResults : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(oList.getNoDataText(), oList.getModel("i18n").getProperty("masterListNoDataWithFilterOrSearchText"), "the list should show the no data text for search and filter");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "list does not show the no data text for search and filter"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheHeaderShouldDisplayAllEntries : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\tvar iExpectedLength = oList.getBinding("items").getLength();\n\t\t\t\t\t\t\t\tthis.waitFor({\n\t\t\t\t\t\t\t\t\tid : "page",\n\t\t\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\t\t\tmatchers : new PropertyStrictEquals({name : "title", value : "<ObjectName> (" + iExpectedLength + ")"}),\n\t\t\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "The master page header displays " + iExpectedLength + " items");\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terrorMessage : "The  master page header does not display " + iExpectedLength + " items."\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "Header does not display the number of items in the list"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheFirstItemShouldBeSelected : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : new AggregationFilled({name : "items"}),\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(oList.getItems()[0], oList.getSelectedItem(), "The first object is selected");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The first object is not selected."\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheListShouldHaveNoSelection : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : function(oList) {\n\t\t\t\t\t\t\t\treturn !oList.getSelectedItem();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess : function (oList) {\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(oList.getSelectedItems().length, 0, "The list selection is removed");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "List selection was not removed"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheRememberedListItemShouldBeSelected : function () {\n\t\t\t\t\t\tthis.waitFor({\n\t\t\t\t\t\t\tid : "list",\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tmatchers : function (oList) {\n\t\t\t\t\t\t\t\treturn oList.getSelectedItem();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess : function (oSelectedItem) {\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(oSelectedItem.getTitle(), this.getContext().currentItem.title, "The list selection is incorrect");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "The list has no selection"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\t}\n);',
"ch/portof/test/integration/pages/NotFound.js":'sap.ui.define([\n\t\t"sap/ui/test/Opa5",\n\t\t"sap/ui/test/actions/Press",\n\t\t"sap/ui/test/matchers/PropertyStrictEquals",\n\t\t"ch/portof/test/integration/pages/Common"\n\t], function(Opa5, Press, PropertyStrictEquals, Common) {\n\t\t"use strict";\n\n\t\tvar sNotFoundPageId = "page",\n\t\t\tsNotFoundView = "NotFound",\n\t\t\tsDetailNotFoundView = "DetailObjectNotFound";\n\n\t\tOpa5.createPageObjects({\n\t\t\tonTheNotFoundPage : {\n\t\t\t\tbaseClass : Common,\n\n\t\t\t\tactions : {\n\n\t\t\t\t\tiPressTheBackButton : function (sViewName) {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\tcontrolType : "sap.m.Button",\n\t\t\t\t\t\t\tmatchers: new PropertyStrictEquals({name : "type", value : "Back"}),\n\t\t\t\t\t\t\tactions : new Press(),\n\t\t\t\t\t\t\terrorMessage : "Did not find the back button"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t},\n\n\t\t\t\tassertions : {\n\n\t\t\t\t\tiShouldSeeTheNotFoundGeneralPage : function (sPageId, sPageViewName) {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tcontrolType : "sap.m.MessagePage",\n\t\t\t\t\t\t\tviewName : sPageViewName,\n\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(true, "Shows the message page");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "Did not reach the empty page"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldSeeTheNotFoundPage : function () {\n\t\t\t\t\t\treturn this.iShouldSeeTheNotFoundGeneralPage(sNotFoundPageId, sNotFoundView);\n\t\t\t\t\t},\n\n\t\t\t\t\tiShouldSeeTheObjectNotFoundPage : function () {\n\t\t\t\t\t\treturn this.iShouldSeeTheNotFoundGeneralPage(sNotFoundPageId, sDetailNotFoundView);\n\t\t\t\t\t},\n\n\t\t\t\t\ttheNotFoundPageShouldSayResourceNotFound : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : sNotFoundPageId,\n\t\t\t\t\t\t\tviewName : sNotFoundView,\n\t\t\t\t\t\t\tsuccess : function (oPage) {\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(oPage.getTitle(), oPage.getModel("i18n").getProperty("notFoundTitle"), "The not found text is shown as title");\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(oPage.getText(), oPage.getModel("i18n").getProperty("notFoundText"), "The resource not found text is shown");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "Did not display the resource not found text"\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\n\t\t\t\t\ttheNotFoundPageShouldSayObjectNotFound : function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid : sNotFoundPageId,\n\t\t\t\t\t\t\tviewName : sDetailNotFoundView,\n\t\t\t\t\t\t\tsuccess : function (oPage) {\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(oPage.getTitle(), oPage.getModel("i18n").getProperty("detailTitle"), "The object text is shown as title");\n\t\t\t\t\t\t\t\tOpa5.assert.strictEqual(oPage.getText(), oPage.getModel("i18n").getProperty("noObjectFoundText"), "The object not found text is shown");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage : "Did not display the object not found text"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\t}\n);',"ch/portof/test/integration/PhoneJourneys.js":'jQuery.sap.require("sap.ui.qunit.qunit-css");\njQuery.sap.require("sap.ui.thirdparty.qunit");\njQuery.sap.require("sap.ui.qunit.qunit-junit");\nQUnit.config.autostart = false;\n\nsap.ui.require([\n\t"sap/ui/test/Opa5",\n\t"ch/portof/test/integration/pages/Common",\n\t"sap/ui/test/opaQunit",\n\t"ch/portof/test/integration/pages/App",\n\t"ch/portof/test/integration/pages/Browser",\n\t"ch/portof/test/integration/pages/Master",\n\t"ch/portof/test/integration/pages/Detail",\n\t"ch/portof/test/integration/pages/NotFound"\n], function (Opa5, Common) {\n\t"use strict";\n\tOpa5.extendConfig({\n\t\tarrangements: new Common(),\n\t\tviewNamespace: "ch.portof.view."\n\t});\n\n\tsap.ui.require([\n\t\t"ch/portof/test/integration/NavigationJourneyPhone",\n\t\t"ch/portof/test/integration/NotFoundJourneyPhone",\n\t\t"ch/portof/test/integration/BusyJourneyPhone"\n\t], function () {\n\t\tQUnit.start();\n\t});\n});',"ch/portof/test/unit/allTests.js":'sap.ui.define([\n\t\t"test/unit/model/models",\n\t\t"test/unit/model/formatter",\n\t\t"test/unit/controller/App.controller",\n\t\t"test/unit/controller/ListSelector"\n\t], function() { "use strict"; });',"ch/portof/test/unit/controller/App.controller.js":'sap.ui.define([\n\t\t"ch/portof/controller/App.controller",\n\t\t"sap/m/SplitApp",\n\t\t"sap/ui/core/Control",\n\t\t"sap/ui/model/json/JSONModel",\n\t\t"sap/ui/thirdparty/sinon",\n\t\t"sap/ui/thirdparty/sinon-qunit"\n\t], function(AppController, SplitApp, Control, JSONModel) {\n\t\t"use strict";\n\n\t\tQUnit.module("AppController - Hide master");\n\n\t\tQUnit.test("Should hide the master of a SplitApp when selection in the list changes", function (assert) {\n\t\t\t// Arrange\n\t\t\tvar fnOnSelectionChange,\n\t\t\t\toViewStub = new Control(),\n\t\t\t\toODataModelStub = new JSONModel(),\n\t\t\t\toComponentStub = new Control(),\n\t\t\t\toSplitApp = new SplitApp(),\n\t\t\t\tfnHideMasterSpy = sinon.spy(oSplitApp,"hideMaster");\n\n\t\t\toComponentStub.oListSelector = {\n\t\t\t\tattachListSelectionChange : function (fnFunctionToCall, oListener) {\n\t\t\t\t\tfnOnSelectionChange = fnFunctionToCall.bind(oListener);\n\t\t\t\t}\n\t\t\t};\n\t\t\toComponentStub.getContentDensityClass = jQuery.noop;\n\n\t\t\toODataModelStub.metadataLoaded = function () {\n\t\t\t\treturn {\n\t\t\t\t\tthen : jQuery.noop\n\t\t\t\t};\n\t\t\t};\n\t\t\toComponentStub.setModel(oODataModelStub);\n\n\t\t\t// System under Test\n\t\t\tvar oAppController = new AppController();\n\n\t\t\tthis.stub(oAppController, "byId").withArgs("idAppControl").returns(oSplitApp);\n\t\t\tthis.stub(oAppController, "getView").returns(oViewStub);\n\t\t\tthis.stub(oAppController, "getOwnerComponent").returns(oComponentStub);\n\n\t\t\t// Act\n\t\t\toAppController.onInit();\n\t\t\tassert.ok(fnOnSelectionChange, "Did register to the change event of the ListSelector");\n\t\t\t// Simulate the event of the list\n\t\t\tfnOnSelectionChange();\n\n\t\t\t// Assert\n\t\t\tassert.strictEqual(fnHideMasterSpy.callCount, 1, "Did hide the master");\n\t\t});\n\n\t}\n);',"ch/portof/test/unit/controller/ListSelector.js":'sap.ui.define([\n\t\t"ch/portof/controller/ListSelector",\n\t\t"sap/ui/thirdparty/sinon",\n\t\t"sap/ui/thirdparty/sinon-qunit"\n\t], function(ListSelector) {\n\t\t"use strict";\n\n\t\tQUnit.module("Initialization", {\n\t\t\tbeforeEach : function () {\n\t\t\t\tsinon.config.useFakeTimers = false;\n\t\t\t\tthis.oListSelector = new ListSelector();\n\t\t\t},\n\t\t\tafterEach : function () {\n\t\t\t\tthis.oListSelector.destroy();\n\t\t\t}\n\t\t});\n\n\t\tQUnit.test("Should initialize the List loading promise", function (assert) {\n\t\t\t// Arrange\n\t\t\tvar done = assert.async(),\n\t\t\t\tfnRejectSpy = this.spy(),\n\t\t\t\tfnResolveSpy = this.spy();\n\n\t\t\t// Act\n\t\t\tthis.oListSelector.oWhenListLoadingIsDone.then(fnResolveSpy, fnRejectSpy);\n\n\t\t\t// Assert\n\t\t\tsetTimeout(function () {\n\t\t\t\tassert.strictEqual(fnResolveSpy.callCount, 0, "Did not resolve the promise");\n\t\t\t\tassert.strictEqual(fnRejectSpy.callCount, 0, "Did not reject the promise");\n\t\t\t\tdone();\n\t\t\t}, 0);\n\t\t});\n\n\t\tQUnit.module("List loading", {\n\t\t\tbeforeEach : function () {\n\t\t\t\tsinon.config.useFakeTimers = false;\n\t\t\t\tthis.oListSelector = new ListSelector();\n\t\t\t},\n\t\t\tafterEach : function () {\n\t\t\t\tthis.oListSelector.destroy();\n\t\t\t}\n\t\t});\n\n\t\tfunction createListStub (bCreateListItem, sBindingPath) {\n\t\t\tvar fnGetParameter = function () {\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\toDataStub = {\n\t\t\t\t\tgetParameter : fnGetParameter\n\t\t\t\t},\n\t\t\t\tfnAttachEventOnce = function (sEventName, fnCallback) {\n\t\t\t\t\tfnCallback(oDataStub);\n\t\t\t\t},\n\t\t\t\tfnGetBinding = this.stub().returns({\n\t\t\t\t\tattachEventOnce : fnAttachEventOnce\n\t\t\t\t}),\n\t\t\t\tfnAttachEvent = function (sEventName, fnCallback, oContext) {\n\t\t\t\t\tfnCallback.apply(oContext);\n\t\t\t\t},\n\t\t\t\toListItemStub = {\n\t\t\t\t\tgetBindingContext : this.stub().returns({\n\t\t\t\t\t\tgetPath : this.stub().returns(sBindingPath)\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\taListItems = [];\n\n\t\t\tif (bCreateListItem) {\n\t\t\t\taListItems.push(oListItemStub);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tattachEvent : fnAttachEvent,\n\t\t\t\tattachEventOnce : fnAttachEventOnce,\n\t\t\t\tgetBinding : fnGetBinding,\n\t\t\t\tgetItems : this.stub().returns(aListItems)\n\t\t\t};\n\t\t}\n\n\t\tQUnit.test("Should resolve the list loading promise, if the list has items", function (assert) {\n\t\t\t// Arrange\n\t\t\tvar done = assert.async(),\n\t\t\t\tfnRejectSpy = this.spy(),\n\t\t\t\tfnResolveSpy = function (sBindingPath) {\n\t\t\t\t\t// Assert\n\t\t\t\t\tassert.strictEqual(sBindingPath, sBindingPath, "Did pass the binding path");\n\t\t\t\t\tassert.strictEqual(fnRejectSpy.callCount, 0, "Did not reject the promise");\n\t\t\t\t\tdone();\n\t\t\t\t};\n\n\t\t\t// Act\n\t\t\tthis.oListSelector.oWhenListLoadingIsDone.then(fnResolveSpy, fnRejectSpy);\n\t\t\tthis.oListSelector.setBoundMasterList(createListStub.call(this, true, "anything"));\n\t\t});\n\n\t\tQUnit.test("Should reject the list loading promise, if the list has no items", function (assert) {\n\t\t\t// Arrange\n\t\t\tvar done = assert.async(),\n\t\t\t\tfnResolveSpy = this.spy(),\n\t\t\t\tfnRejectSpy = function () {\n\t\t\t\t\t// Assert\n\t\t\t\t\tassert.strictEqual(fnResolveSpy.callCount, 0, "Did not resolve the promise");\n\t\t\t\t\tdone();\n\t\t\t\t};\n\n\t\t\t// Act\n\t\t\tthis.oListSelector.oWhenListLoadingIsDone.then(fnResolveSpy, fnRejectSpy);\n\t\t\tthis.oListSelector.setBoundMasterList(createListStub.call(this, false));\n\t\t});\n\n\t\tQUnit.module("Selecting item in the list", {\n\t\t\tbeforeEach : function () {\n\t\t\t\tsinon.config.useFakeTimers = false;\n\t\t\t\tthis.oListSelector = new ListSelector();\n\t\t\t\tthis.oListSelector.oWhenListLoadingIsDone = {\n\t\t\t\t\tthen : function (fnAct) {\n\t\t\t\t\t\tthis.fnAct = fnAct;\n\t\t\t\t\t}.bind(this)\n\t\t\t\t};\n\t\t\t},\n\t\t\tafterEach : function () {\n\t\t\t\tthis.oListSelector.destroy();\n\t\t\t}\n\t\t});\n\n\t\tfunction createStubbedListItem (sBindingPath) {\n\t\t\treturn {\n\t\t\t\tgetBindingContext : this.stub().returns({\n\t\t\t\t\tgetPath : this.stub().returns(sBindingPath)\n\t\t\t\t})\n\t\t\t};\n\t\t}\n\n\t\tQUnit.test("Should select an Item of the list when it is loaded and the binding contexts match", function (assert) {\n\t\t\t// Arrange\n\t\t\tvar sBindingPath = "anything",\n\t\t\t\toListItemToSelect = createStubbedListItem.call(this, sBindingPath),\n\t\t\t\toSelectedListItemStub = createStubbedListItem.call(this, "a different binding path");\n\n\t\t\tthis.oListSelector._oList = {\n\t\t\t\tgetMode : this.stub().returns("SingleSelectMaster"),\n\t\t\t\tgetSelectedItem : this.stub().returns(oSelectedListItemStub),\n\t\t\t\tgetItems : this.stub().returns([ oSelectedListItemStub, oListItemToSelect, createListStub.call(this, "yet another list binding") ]),\n\t\t\t\tsetSelectedItem : function (oItem) {\n\t\t\t\t\t//Assert\n\t\t\t\t\tassert.strictEqual(oItem, oListItemToSelect, "Did select the list item with a matching binding context");\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Act\n\t\t\tthis.oListSelector.selectAListItem(sBindingPath);\n\t\t\t// Resolve list loading\n\t\t\tthis.fnAct();\n\t\t});\n\n\t\tQUnit.test("Should not select an Item of the list when it is already selected", function (assert) {\n\t\t\t// Arrange\n\t\t\tvar sBindingPath = "anything",\n\t\t\t\toSelectedListItemStub = createStubbedListItem.call(this, sBindingPath);\n\n\t\t\tthis.oListSelector._oList = {\n\t\t\t\tgetMode:  this.stub().returns("SingleSelectMaster"),\n\t\t\t\tgetSelectedItem : this.stub().returns(oSelectedListItemStub)\n\t\t\t};\n\n\t\t\t// Act\n\t\t\tthis.oListSelector.selectAListItem(sBindingPath);\n\t\t\t// Resolve list loading\n\t\t\tthis.fnAct();\n\n\t\t\t// Assert\n\t\t\tassert.ok(true, "did not fail");\n\t\t});\n\n\t\tQUnit.test("Should not select an item of the list when the list has the selection mode none", function (assert) {\n\t\t\t// Arrange\n\t\t\tvar sBindingPath = "anything";\n\n\t\t\tthis.oListSelector._oList = {\n\t\t\t\tgetMode : this.stub().returns("None")\n\t\t\t};\n\n\t\t\t// Act\n\t\t\tthis.oListSelector.selectAListItem(sBindingPath);\n\t\t\t// Resolve list loading\n\t\t\tthis.fnAct();\n\n\t\t\t// Assert\n\t\t\tassert.ok(true, "did not fail");\n\t\t});\n\n\t}\n);',"ch/portof/test/unit/model/formatter.js":'sap.ui.define([\n\t\t"sap/m/Text",\n\t\t"ch/portof/model/formatter"\n\t], function (Text, formatter) {\n\t\t"use strict";\n\n\t\tQUnit.module("formatter - Currency value");\n\n\t\tfunction currencyValueTestCase(assert, sValue, fExpectedNumber) {\n\t\t\t// Act\n\t\t\tvar fCurrency = formatter.currencyValue(sValue);\n\n\t\t\t// Assert\n\t\t\tassert.strictEqual(fCurrency, fExpectedNumber, "The rounding was correct");\n\t\t}\n\n\t\tQUnit.test("Should round down a 3 digit number", function (assert) {\n\t\t\tcurrencyValueTestCase.call(this, assert, "3.123", "3.12");\n\t\t});\n\n\t\tQUnit.test("Should round up a 3 digit number", function (assert) {\n\t\t\tcurrencyValueTestCase.call(this, assert, "3.128", "3.13");\n\t\t});\n\n\t\tQUnit.test("Should round a negative number", function (assert) {\n\t\t\tcurrencyValueTestCase.call(this, assert, "-3", "-3.00");\n\t\t});\n\n\t\tQUnit.test("Should round an empty string", function (assert) {\n\t\t\tcurrencyValueTestCase.call(this, assert, "", "");\n\t\t});\n\n\t\tQUnit.test("Should round a zero", function (assert) {\n\t\t\tcurrencyValueTestCase.call(this, assert, "0", "0.00");\n\t\t});\n\n\t}\n);',"ch/portof/test/unit/model/models.js":'sap.ui.define([\n\t\t"ch/portof/model/models",\n\t\t"sap/ui/thirdparty/sinon",\n\t\t"sap/ui/thirdparty/sinon-qunit"\n\t], function (models) {\n\t\t"use strict";\n\n\t\tQUnit.module("createDeviceModel", {\n\t\t\tafterEach : function () {\n\t\t\t\tthis.oDeviceModel.destroy();\n\t\t\t}\n\t\t});\n\n\t\tfunction isPhoneTestCase(assert, bIsPhone) {\n\t\t\t// Arrange\n\t\t\tthis.stub(sap.ui.Device, "system", { phone : bIsPhone });\n\n\t\t\t// System under test\n\t\t\tthis.oDeviceModel = models.createDeviceModel();\n\n\t\t\t// Assert\n\t\t\tassert.strictEqual(this.oDeviceModel.getData().system.phone, bIsPhone, "IsPhone property is correct");\n\t\t}\n\n\t\tQUnit.test("Should initialize a device model for desktop", function (assert) {\n\t\t\tisPhoneTestCase.call(this, assert, false);\n\t\t});\n\n\t\tQUnit.test("Should initialize a device model for phone", function (assert) {\n\t\t\tisPhoneTestCase.call(this, assert, true);\n\t\t});\n\n\t\tfunction isTouchTestCase(assert, bIsTouch) {\n\t\t\t// Arrange\n\t\t\tthis.stub(sap.ui.Device, "support", { touch : bIsTouch });\n\n\t\t\t// System under test\n\t\t\tthis.oDeviceModel = models.createDeviceModel();\n\n\t\t\t// Assert\n\t\t\tassert.strictEqual(this.oDeviceModel.getData().support.touch, bIsTouch, "IsTouch property is correct");\n\t\t}\n\n\t\tQUnit.test("Should initialize a device model for non touch devices", function (assert) {\n\t\t\tisTouchTestCase.call(this, assert, false);\n\t\t});\n\n\t\tQUnit.test("Should initialize a device model for touch devices", function (assert) {\n\t\t\tisTouchTestCase.call(this, assert, true);\n\t\t});\n\n\t\tQUnit.test("The binding mode of the device model should be one way", function (assert) {\n\n\t\t\t// System under test\n\t\t\tthis.oDeviceModel = models.createDeviceModel();\n\n\t\t\t// Assert\n\t\t\tassert.strictEqual(this.oDeviceModel.getDefaultBindingMode(), "OneWay", "Binding mode is correct");\n\t\t});\n\n\t}\n);',"ch/portof/view/ViewSettingsDialog.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core">\n\n\t<ViewSettingsDialog\n\t\tid="viewSettingsDialog"\n\t\tconfirm="onConfirmViewSettingsDialog"\n\t\tresetFilters="onViewSettingsDialogResetFilters">\n\t\t<filterItems>\n\t\t\t<ViewSettingsFilterItem\n\t\t\t\tid="filterItems"\n\t\t\t\ttext="{i18n>masterFilterName}"\n\t\t\t\tkey="Price"\n\t\t\t\tmultiSelect="false">\n\t\t\t\t<items>\n\t\t\t\t\t<ViewSettingsItem\n\t\t\t\t\t\ttext="{i18n>masterFilter1}"\n\t\t\t\t\t\tkey="Filter1"\n\t\t\t\t\t\tid="viewFilter1"/>\n\t\t\t\t\t<ViewSettingsItem\n\t\t\t\t\t\ttext="{i18n>masterFilter2}"\n\t\t\t\t\t\tkey="Filter2"\n\t\t\t\t\t\tid="viewFilter2"/>\n\t\t\t\t</items>\n\t\t\t</ViewSettingsFilterItem>\n\t\t</filterItems>\n\t</ViewSettingsDialog>\n\n</core:FragmentDefinition>',"ch/portof/view/App.view.xml":'<mvc:View\n\tcontrollerName="ch.portof.controller.App"\n\txmlns:mvc="sap.ui.core.mvc"\n\tdisplayBlock="true"\n\tbusy="{appView>/busy}"\n\tbusyIndicatorDelay="{appView>/delay}"\n\txmlns="sap.m">\n\t<SplitApp id="idAppControl" />\n</mvc:View>',"ch/portof/view/Detail.view.xml":'<mvc:View xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic" controllerName="ch.portof.controller.Detail">\n\t<semantic:DetailPage id="page" navButtonPress="onNavBack" showNavButton="{device>/system/phone}" title="{i18n>detailTitle}"\n\t\tbusy="{detailView>/busy}" busyIndicatorDelay="{detailView>/delay}">\n\t\t<semantic:content>\n\t\t\t<ObjectHeader id="objectHeader" title="{Name}" class="myDebitorMissing">\n\t\t\t\t<customData>\n\t\t\t\t\t<sap.ui.core:CustomData xmlns:sap.ui.core="sap.ui.core" id="__data10" key="missing" binding="{Debitoren/}"\n\t\t\t\t\t\tvalue="{= ${ path: \'Kunnr\', formatter: \'.formatter.convertToBool\' }.toString()}" writeToDom="true"/>\n\t\t\t\t</customData>\n\t\t\t\t<attributes>\n\t\t\t\t\t<ObjectAttribute text="{Schiffsnummer}" id="__attribute3" title="{/#Schiffe/Schiffsnummer/@sap:label}"/>\n\t\t\t\t\t<ObjectAttribute text="{Nationalitaet}" id="__attribute6" title="{/#Schiffe/Nationalitaet/@sap:label}"/>\n\t\t\t\t\t<ObjectAttribute text="{Schiffstyp}" id="__attribute12" title="{/#Schiffe/Schiffstyp/@sap:label}"/>\n\t\t\t\t\t<ObjectAttribute text="{EcocardNr}" id="__attribute4" title="{/#Schiffe/EcocardNr/@sap:label}"/>\n\t\t\t\t\t<ObjectAttribute text="{Tragfaehigkeit}" id="__attribute129" title="{/#Schiffe/Tragfaehigkeit/@sap:label}"/>\n\t\t\t\t\t<ObjectAttribute text="{Laenge}" id="__attribute130" title="{/#Schiffe/Laenge/@sap:label}"/>\n\t\t\t\t</attributes>\n\t\t\t</ObjectHeader>\n\t\t\t<IconTabBar id="iconTabBar" class="sapUiResponsiveContentPadding">\n\t\t\t\t<items>\n\t\t\t\t\t<IconTabFilter id="iconTabBarFilter1" icon="sap-icon://hint" tooltip="{i18n>detailIconTabBarInfo}" text="{i18n>detailStammdaten}">\n\t\t\t\t\t\t<content>\n\t\t\t\t\t\t\t<ObjectHeader binding="{Debitoren/}" number="{Kunnr}" introActive="true" titleActive="true" id="debitorHeader1" title="{Name1}"\n\t\t\t\t\t\t\t\tclass="myDebitorMissingBox">\n\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t<sap.ui.core:CustomData xmlns:sap.ui.core="sap.ui.core" id="__data11" key="missing"\n\t\t\t\t\t\t\t\t\t\tvalue="{= ${ path: \'Kunnr\', formatter: \'.formatter.convertToBool\' }.toString()}" writeToDom="true"/>\n\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t<attributes>\n\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Name2}" id="__attribute8" title="Zusatz"/>\n\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Stras}" id="__attribute125" title="Adresse"/>\n\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Pstlz} {Ort01}" id="__attribute126" title="PLZ / Ort"/>\n\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Pstl2}{Pfach}" id="__attribute5" title="Postfach"/>\n\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Land1}" id="__attribute128" title="Ländercode"/>\n\t\t\t\t\t\t\t\t\t<ObjectAttribute id="__attribute7" title="Email" text="{Email}"/>\n\t\t\t\t\t\t\t\t</attributes>\n\t\t\t\t\t\t\t</ObjectHeader>\n\t\t\t\t\t\t\t\x3c!--\t\t\t\t\t    <Input binding="{/SchiffeSet(\'07001318\')/Debitoren}" value="{Name1}" />\n\n\t\t\t\t\t    <Input value="{ path: \'Debitoren/Name1\',\n\t\t\t\t\t    \t\t\t\t parameters : {expand:\'Debitoren\'} }" />\n\t\t\t\t\t\t<Input binding="{ path: \'Debitoren/\' }" value="{Name1}" />\n\t\t\t\t\t\t<Input binding="{Debitoren/}" value="{Name1}" />--\x3e\n\t\t\t\t\t\t</content>\n\t\t\t\t\t</IconTabFilter>\n\t\t\t\t\t<IconTabFilter text="{i18n>detailRapportListe}" icon="sap-icon://task" iconColor="Critical" id="__filter0">\n\t\t\t\t\t\t<content>\n\t\t\t\t\t\t\t<Table id="lineItemsList" width="auto" items="{RapporteSet}" updateFinished="onListUpdateFinished"\n\t\t\t\t\t\t\t\tnoDataText="{i18n>detailLineItemTableNoDataText}" busyIndicatorDelay="{detailView>/lineItemTableDelay}" class="sapUiResponsiveMargin"\n\t\t\t\t\t\t\t\tgrowingScrollToLoad="true" growing="true">\n\t\t\t\t\t\t\t\t<headerToolbar>\n\t\t\t\t\t\t\t\t\t<Toolbar id="lineItemsToolbar">\n\t\t\t\t\t\t\t\t\t\t<Title id="lineItemsHeader" text="{detailView>/lineItemListTitle}"/>\n\t\t\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t\t\t</headerToolbar>\n\t\t\t\t\t\t\t\t<columns>\n\t\t\t\t\t\t\t\t\t<Column>\n\t\t\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableIDColumn}"/>\n\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t<Column minScreenWidth="Tablet" demandPopin="true">\n\t\t\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableUnitAttirbut1Column}"/>\n\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t<Column id="__column2">\n\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableUnitAttirbut2Column}" id="__text20"/>\n\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t<Column id="__column3">\n\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableUnitAttirbut3Column}" id="__text21"/>\n\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t<Column id="__column4">\n\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableUnitAttirbut4Column}" id="__text22"/>\n\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t<Column id="__column5">\n\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableUnitAttirbut6Column}" id="__text25"/>\n\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t</columns>\n\t\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t\t<ColumnListItem press="_onListItemPressed" type="Active" class="myBackgroundLoevm">\n\t\t\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t\t\t<sap.ui.core:CustomData xmlns:sap.ui.core="sap.ui.core" id="__data9" key="background" value="{= ${Loevm}.toString()}" writeToDom="true"/>\n\t\t\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectIdentifier title="{= parseFloat(${Rapportid}) }"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{ path: \'Datum\', type: \'sap.ui.model.type.Date\', formatOptions: { pattern: \'dd.MM.yyyy\' }}" id="__attribute0"/>\n\t\t\t\t\t\t\t\t\t\t\t\x3c!--<ObjectAttribute id="__attribute1" text="{ path: \'Zeit.ms\', type: \'sap.ui.model.type.Time\', formatOptions: { pattern: \'HH:mm\', source: { pattern : \'\\\'PT\\\'HH\\\'H\\\'mm\\\'M\\\'ss\\\'S\\\'\'}}}"/>--\x3e\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute id="__attribute1"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path : \'Zeit/ms\', type : \'sap.ui.model.type.Time\' ,formatOptions:{ source: {pattern: \'timestamp\'}, pattern : \'HH:mm\', UTC : true }}"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Lotsenname}" id="__attribute2"/>\n\t\t\t\t\t\t\t\t\t\t\t<CheckBox id="__box0" selected="{Loevm}" editable="false"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{RapportArt}" id="__attribute13"/>\n\t\t\t\t\t\t\t\t\t\t\t\x3c!--<ObjectAttribute text="{= ${Loevm}.toString()}" id="__attribute9"/>--\x3e\n\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t</content>\n\t\t\t\t\t</IconTabFilter>\n\t\t\t\t</items>\n\t\t\t</IconTabBar>\n\t\t</semantic:content>\n\t\t<semantic:positiveAction>\n\t\t\t<semantic:PositiveAction text="neuer Lotsenrapport" id="__action3" press="newRapport" visible="{detailView>/lotsenRapport}"/>\n\t\t</semantic:positiveAction>\n\t\t<semantic:mainAction>\n\t\t\t<semantic:MainAction text="neuer SSB Rapport" id="__action5" press="newRapportSSB" visible="{detailView>/ssbRapport}"/>\n\t\t</semantic:mainAction>\n\t</semantic:DetailPage>\n</mvc:View>',"ch/portof/view/DetailNoObjectsAvailable.view.xml":'<mvc:View\n\tcontrollerName="ch.portof.controller.BaseController"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns="sap.m">\n\n\t<MessagePage\n\t\tid="page"\n\t\ttitle="{i18n>notAvailableViewTitle}"\n\t\ttext="{i18n>noObjectsAvailableText}"\n\t\ticon="{sap-icon://product}"\n\t\tdescription=""\n\t\tshowNavButton="{device>/system/phone}"\n\t\tnavButtonPress="onNavBack">\n\t</MessagePage>\n\n</mvc:View>',"ch/portof/view/DetailObjectNotFound.view.xml":'<mvc:View\n\tcontrollerName="ch.portof.controller.BaseController"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns="sap.m">\n\n\t<MessagePage\n\t\tid="page"\n\t\ttitle="{i18n>detailTitle}"\n\t\ttext="{i18n>noObjectFoundText}"\n\t\ticon="{sap-icon://product}"\n\t\tdescription=""\n\t\tshowNavButton="{device>/system/phone}"\n\t\tnavButtonPress="onNavBack">\n\t</MessagePage>\n\n</mvc:View>',"ch/portof/view/Master.view.xml":'<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:semantic="sap.m.semantic" controllerName="ch.portof.controller.Master">\n\n\t<semantic:MasterPage id="page" title="{masterView>/title}" navButtonPress="onNavBack" showNavButton="true">\n\t\t<semantic:subHeader>\n\t\t\t<Bar id="headerBar">\n\t\t\t\t<contentMiddle>\n\t\t\t\t\t<SearchField id="searchField" showRefreshButton="{= !${device>/support/touch} }" tooltip="{i18n>masterSearchTooltip}" width="100%" search="onSearch">\n\t\t\t\t\t</SearchField>\n\t\t\t\t</contentMiddle>\n\t\t\t</Bar>\n\t\t</semantic:subHeader>\n\n\t\t<semantic:content>\n\t\t\t<PullToRefresh id="pullToRefresh" visible="{device>/support/touch}" refresh="onRefresh"/>\n\t\t\t\x3c!-- For client side filtering add this to the items attribute:  parameters: {operationMode: \'Client\'}}" --\x3e\n\t\t\t<List id="list" items="{      path: \'/SchiffeSet\',      sorter: {       path: \'Name\',       descending: false       },      groupHeaderFactory: \'.createGroupHeader\'     }" busyIndicatorDelay="{masterView>/delay}" noDataText="{masterView>/noDataText}" mode="{= ${device>/system/phone} ? \'None\' : \'SingleSelectMaster\'}" growing="true" growingScrollToLoad="true" updateFinished="onUpdateFinished" selectionChange="onSelectionChange">\n\t\t\t\t<infoToolbar>\n\t\t\t\t\t<Toolbar active="true" id="filterBar" visible="{masterView>/isFilterBarVisible}" press="onOpenViewSettings">\n\t\t\t\t\t\t<Title id="filterBarLabel" text="{masterView>/filterBarLabel}"/>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</infoToolbar>\n\t\t\t\t<items>\n\t\t\t\t\t<ObjectListItem type="{= ${device>/system/phone} ? \'Active\' : \'Inactive\'}" press="onSelectionChange" title="{Name}" number="{Schiffsnummer}" intro="{Schiffstyp}" class="myDebitorMissingList">\n\t\t\t\t<customData>\n\t\t\t\t\t<sap.ui.core:CustomData xmlns:sap.ui.core="sap.ui.core" id="__data10" key="missing" binding="{Debitoren/}" value="{= ${ path: \'Kunnr\', formatter: \'.formatter.convertToBool\' }.toString()}" writeToDom="true"/>\n\t\t\t\t\t\t\x3c!--<sap.ui.core:CustomData xmlns:sap.ui.core="sap.ui.core" id="__data10" key="missing" value="true" writeToDom="true"/>--\x3e\n\t\t\t\t</customData>\n\t\t\t\t\t</ObjectListItem>\n\t\t\t\t</items>\n\t\t\t</List>\n\t\t</semantic:content>\n\n\t<semantic:mainAction>\n\n\t    <semantic:MainAction text="Lotsenauswertung" id="__action0" press="showReporting"/>\n\n\t</semantic:mainAction>\n\n\t</semantic:MasterPage>\n\n</mvc:View>',"ch/portof/view/NotFound.view.xml":'<mvc:View\n\tcontrollerName="ch.portof.controller.BaseController"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns="sap.m">\n\n\t<MessagePage\n\t\tid="page"\n\t\ttitle="{i18n>notFoundTitle}"\n\t\ttext="{i18n>notFoundText}"\n\t\ticon="{sap-icon://document}"\n\t\tdescription=""\n\t\tshowNavButton="{device>/system/phone}"\n\t\tnavButtonPress="onNavBack">\n\t</MessagePage>\n\n</mvc:View>',
"ch/portof/view/Rapport.view.xml":'<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic" xmlns:sap.ui.core="sap.ui.core" xmlns="sap.m"\n\txmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout" controllerName="ch.portof.controller.Rapport">\n\t\x3c!-- bindingContexts="RapporteSet" --\x3e\n\t<semantic:DetailPage xmlns:sap.m.semantic="sap.m.semantic" title="Semantic Page" id="__page2">\n\t\t<semantic:saveAction>\n\t\t\t<semantic:SaveAction id="__action0" press="onSave" enabled="{rapportView>/changeMode}"/>\n\t\t</semantic:saveAction>\n\t\t<semantic:cancelAction>\n\t\t\t<semantic:CancelAction id="__action1" press="onCancel"/>\n\t\t</semantic:cancelAction>\n\t\t<semantic:content>\n\t\t\t<ObjectHeader title="{Schiff>/d/Name}" introActive="true" id="__header0" number="{Schiff>/d/Schiffsnummer}" condensed="true"\n\t\t\t\tclass="myDebitorMissing">\n\t\t\t\t<customData>\n\t\t\t\t\t<sap.ui.core:CustomData xmlns:sap.ui.core="sap.ui.core" id="__data10" key="missing"\n\t\t\t\t\t\tvalue="${ path: \'Debitor>/d/Kunnr\', formatter: \'.formatter.convertToBool\' }.toString()" writeToDom="true"/>\n\t\t\t\t</customData>\n\t\t\t</ObjectHeader>\n\t\t\t<sap.ui.layout.form:Form xmlns:sap.ui.layout.form="sap.ui.layout.form" editable="true" id="__form1">\n\t\t\t\t<sap.ui.layout.form:formContainers>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Kopfdaten {= parseFloat(${Rapportid}) }" id="__container1" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element2" label="Datum/Zeit">\n\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t<DatePicker width="100%" id="startDatePicker" valueFormat="yyyyMMdd" placeholder="dd.MM.yyyy" displayFormat="dd.MM.yyyy"\n\t\t\t\t\t\t\t\t\tvalue="{ path: \'Datum\', type: \'sap.ui.model.type.Date\', formatOptions: { pattern: \'dd.MM.yyyy\', UTC : true } }"\n\t\t\t\t\t\t\t\t\teditable="{rapportView>/changeMode}" change="_updateTarifeNewDate"/>\n\t\t\t\t\t\t\t\t\x3c!--\t\t\t\t\t\t\t\t<TimePicker placeholder="HH:mm" placeholderSymbol="-" displayFormat="HH:mm" localeId="de-CH" id="startTimePicker"   \n\t\t\t\t\t\t\t\t\tvalue="{ path: \'Zeit\', type: \'sap.ui.model.type.Time\', \n\t\t\t\t\t\t\t\t\t\t\t\tformatOptions: { pattern: \'HH:mm\', \n\t\t\t\t\t\t\t\t\t\t\t\t\tsource: { pattern : \'\\\'PT\\\'HH\\\'H\\\'mm\\\'M\\\'ss\\\'S\\\'\'  } \n\t\t\t\t\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t\t\t\t\t}"/>--\x3e\n\t\t\t\t\t\t\t\t<TimePicker placeholder="HH:mm" placeholderSymbol="-" displayFormat="HH:mm" localeId="de-CH" id="startTimePicker"\n\t\t\t\t\t\t\t\t\tvalue="{path : \'Zeit/ms\', type : \'sap.ui.model.type.Time\' , formatOptions:{ source: {pattern: \'timestamp\'}, pattern : \'HH:mm\', UTC : true }}"\n\t\t\t\t\t\t\t\t\teditable="{rapportView>/changeMode}" change="_updateTarifeNewDate"/>\n\t\t\t\t\t\t\t\t<Input width="100%" id="startPegelstand" value="{Pegel}" editable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element8" label="Berg-/Talfahrt">\n\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t<Switch id="__switch0" customTextOn="T" customTextOff="B" state="{Talfahrt}" enabled="{rapportView>/changeMode}" change="_setFahrtrichtung"/>\n\t\t\t\t\t\t\t\t<Text text="{rapportView>/fahrtrichtung}" id="__text21"/>\n\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element9" label="Lotse">\n\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\x3c!--<Text text="{benutzerSet>/d/Firstname} {benutzerSet>/d/Lastname}" id="__text24"/>--\x3e\n\t\t\t\t\t\t\t\t<Text text="{Lotsenname}" id="__text24"/>\n\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic"\n\t\t\t\t\t\txmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.m.semantic="sap.m.semantic" xmlns:sap.ui.layout.form="sap.ui.layout.form"\n\t\t\t\t\t\ttitle="Bestätigung" id="__container7" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element14">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<HBox xmlns="sap.m" width="100%" id="__hbox0">\n\t\t\t\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t\t\t\t<CheckBox id="__boxCheckConfirm0" selected="{rapportView>/confirmed}" editable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t\t\t\t<Text class="myConfirmation"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="Hiermit bestätigen wir, dass die obigen Angaben zutreffen und dass das Schiff bei Antritt der Reise in einem einwandfreien technischen und nautischen Zustand ist. Tiefgang und Durchfahrtshöhe müssen dem jeweils aktuellen Wasserstand Pegel Basel-Rheinhalle entsprechen.&#10;&#10;Nous certifions par le présent document que les indications fournies sont correctes et que le navire est dans un état technique et nautique irréprochable au début du voyage. Le tirant d’eau et le tirant d’air doivent être conformes au niveau actuel de l’eau à l’échelle de Bâle-Rheinhalle.&#10;&#10;Hiermee bevestigen wij de correctheid van de bovenstaande informatie en dat het schip bij het begin van de reis in een technisch en nautisch perfecte staat verkeerd. Diepgang en doorvaarthoogte moeten overeenkomen met de actuele waterstand bij Pegel Basel-Rheinhalle.&#10;&#10;We hereby confirm that the information listed above is accurate and that the ship is in good technical and nautical condition at the start of the journey. Draft and clearance must correspond to the respective current Basel-Rheinhalle water level."\n\t\t\t\t\t\t\t\t\t\t\t\tid="__text13"/>\n\t\t\t\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t\t\t\t</HBox>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Zuschläge" id="__container3" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element0" label="Samstags">\n\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t<Switch id="__samstagsZuschlag" state="{Samstagszuschlag}" change="_updateTarife" enabled="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label="Sonn-/Feiertags/Nacht" id="__element4">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Switch id="__feiertagsZuschlag" state="{Feiertagszuschlag}" change="_updateTarife" enabled="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label="Keine Fakturierung" id="element17" tooltip="Unentgeltliche Dienstleistung auf Grund Lotsenpflicht">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<CheckBox xmlns="sap.m" selected="{NoBill}" id="box0" editable="{rapportView>/changeMode}" select="_calc"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label="Wendemanöver TLP" id="element18" tooltip="Wendemanöver Tankliegeplatz">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<CheckBox xmlns="sap.m" selected="{WendemanoeverTlp}" id="box1" editable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element13">\n\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t<Text text="* gemäss Gebührentarif" id="__text15"/>\n\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Tabelle" id="__container0" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element10">\n\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t<Table noDataText="Drop column list items here and columns in the area above" id="__table0">\n\t\t\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem id="__item0" visible="{rapportView>/kl_2000t}">\n\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem title="Mittlere Rheinbrücke" description="Basel - UW Birsfelden (v.v.)" id="__item7"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--<CheckBox id="__box0" selected="{MrbU2000t}" select="_calc"/>--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<RadioButton selected="{MrbU2000t}" id="__button0" groupName="radio1" select="_calc" editable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="bis 2\'000 t" id="__text26"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="{ path: \'tarifeSet>/d/MrbU2000t\', formatter: \'.formatter.currencyValue\' } CHF" id="__text27"/>\n\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem id="__item1" class="myBackground myBorderBlackFat" visible="{rapportView>/gr_2000t_100m}">\n\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type="Inactive" title="Mittlere Rheinbrücke" description="Basel - UW Birsfelden (v.v.)" id="__item8" class="myBackground2"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--<CheckBox id="__box1" selected="{MrbUe2000t}" select="_calc"/>--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<RadioButton selected="{MrbUe2000t}" id="__button1" groupName="radio1" select="_calc" editable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="ab 100m oder ab 2\'000 t" id="__text29"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="{ path: \'tarifeSet>/d/MrbUe2000t\', formatter: \'.formatter.currencyValue\' } CHF" id="__text30"/>\n\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem id="__item2" class="myBorderRedFat" visible="{rapportView>/gr_2000t_110m}">\n\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type="Inactive" title="Gem.RPVO Basel - Birsfelden (v.v)" description="(hoheitlich / nicht Mwst.pflichtig)" id="__item9"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--<CheckBox id="__box2" selected="{BRU125m}" select="_calc"/>--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<RadioButton selected="{BRU125m}" id="__button2" groupName="radio1" select="_calc" editable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="&gt; 110-135m / 2\'000 t" id="__text32"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="{ path: \'tarifeSet>/d/BRU125m\', formatter: \'.formatter.currencyValue\' } CHF" id="__text33"/>\n\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem id="__item3" class="myBorderBlackFat" visible="{rapportView>/kl_2000t_110m}">\n\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type="Inactive" title="Gem.RPVO Basel - Birsfelden" description="(hoheitlich / nicht Mwst.pflichtig)" id="__item10"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--<CheckBox id="__box3" selected="{BRSchubverband}" select="_calc"/>--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<RadioButton selected="{BRSchubverband}" id="__button3" groupName="radio1" select="_calc" editable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="Schubverband" id="__text35"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="{ path: \'tarifeSet>/d/BRSchubverband\', formatter: \'.formatter.currencyValue\' } CHF" id="__text36"/>\n\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem id="__item4" class="myBorderRedFat" visible="{rapportView>/kl_2000t_110m}">\n\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type="Inactive" id="__item11" title="Basel - Augst (v.v)"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--<CheckBox id="__box4" selected="{BaAug}" select="_calc"/>--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<RadioButton selected="{BaAug}" id="__button4" groupName="radio1" select="_calc" editable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="alle Schiffe" id="__text38"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="{ path: \'tarifeSet>/d/BaAug\', formatter: \'.formatter.currencyValue\' } CHF" id="__text39"/>\n\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem id="__item5" class="myBorderBlackFat" visible="{rapportView>/kl_2000t_110m}">\n\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type="Inactive" title="Birsfelden - Augst (v.v)" id="__item12"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--<CheckBox id="__box5" selected="{BirAug}" select="_calc"/>--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<RadioButton selected="{BirAug}" id="__button5" groupName="radio1" select="_calc" editable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="alle Schiffe" id="__text41"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="{ path: \'tarifeSet>/d/BirAug\', formatter: \'.formatter.currencyValue\' } CHF" id="__text42"/>\n\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem id="__item6" class="myBorderBlackFat">\n\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type="Inactive" title="Allgemeine Dienstleistungen" description="Lotsen/Stundenlohn" id="__item13"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Input ariaLabelledBy="__xmlview0--__label7" width="100%" id="__input0" change="_calc" value="{AllgemeineDienstleistung}"\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--<CheckBox id="__box6"/>--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="alle Schiffe" id="__text44"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="{ path: \'tarifeSet>/d/AllgemeineDienstleistung\', formatter: \'.formatter.currencyValue\' } CHF" id="__text45"/>\n\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t<ColumnListItem id="__item15" class="myBorderBlackFat">\n\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem title="Total" id="__item14" class="myTotal"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="" id="__text47" visible="false" class="myTotal"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="" id="__text48" visible="false" class="myTotal"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text="{rapportView>/total}" id="__Total" class="myTotalmix"/>\n\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t\t\t\t<columns>\n\t\t\t\t\t\t\t\t\t\t<Column id="__column0" mergeDuplicates="true" width="200px">\n\t\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text="Strecke" id="__label6"/>\n\t\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t\t<Column id="__column1" width="40px">\n\t\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t\t<Label id="__label7" visible="false" text="Auswahl" width="20px"/>\n\t\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t\t<Column id="__column2" minScreenWidth="800px" demandPopin="true" popinDisplay="WithoutHeader">\n\t\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text="Schiffstyp" id="__label8"/>\n\t\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t\t<Column id="__column3" minScreenWidth="800px" demandPopin="true" popinDisplay="WithoutHeader">\n\t\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t\t<Label text="Grundtarif" width="100%" id="__label5"/>\n\t\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t</columns>\n\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element15">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Button text="Eingaben Löschen" width="150px" id="__button6" type="Reject" press="onResetSelection" visible="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer xmlns:sap.ui.core="sap.ui.core" xmlns:sap.ui.layout="sap.ui.layout" xmlns:core="sap.ui.core"\n\t\t\t\t\t\txmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.m.semantic="sap.m.semantic"\n\t\t\t\t\t\txmlns:sap.ui.layout.form="sap.ui.layout.form" title="Bestätigung" id="__container8" expandable="true" visible="{rapportView>/display_ul}">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element16">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<HBox xmlns="sap.m" width="100%" id="__hbox1">\n\t\t\t\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t\t\t\t<CheckBox id="__boxCheckConfirm1" selected="{rapportView>/confirmed_ul}" editable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t\t\t\t<Text class="myConfirmation"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="Der Schiffsführer bestätigt mit der Unterschrift, dass sich das betreffende Motorschiff in einem einwandfreien, technischen Zustand befindet sowie die Vorschriften der Verordnung des UVEK über die rheinschifffahrtspolizeilichen Vorschriften auf der Rheinstrecke zwischen Basel - Rheinfelden insbesondere die Artikel 9a und 9b erfüllt.Die Fahrt mit Sicht durch die Dachluke ist nicht gestattet, weil dadurch die relevanten optischen Hilfsmitteln sowie die Überwachungsinstrumente am Steuerstand nicht mehr einsehbar sind. Nötigenfalls ist mehr Ballast in die Wallgänge zu pumpen.&#10;&lt;a href=&quot;https://www.w3schools.com&quot; target=&quot;_blank&quot;&gt;Visit W3Schools.com!&lt;/a&gt;&#10;&lt;Link text=&quot;v1&quot; href=&quot;url&quot; /&gt;"\n\t\t\t\t\t\t\t\t\t\t\t\tid="__text14" visible="false"/>\n\t\t\t\t\t\t\t\t\t\t\t<Link text="Link auf Verordnung" id="link0" href="https://www.admin.ch/opc/de/official-compilation/2018/1019.pdf#page=4" target="_blank"\n\t\t\t\t\t\t\t\t\t\t\t\tvisible="false"/>\n\t\t\t\t\t\t\t\t\t\t\t<sap.ui.core:HTML\n\t\t\t\t\t\t\t\t\t\t\t\tcontent="&lt;div class=&quot;myConfirmation&quot; &gt;Der Schiffsführer bestätigt mit der Unterschrift, dass sich das betreffende Motorschiff in einem einwandfreien, technischen Zustand befindet sowie die Vorschriften der Verordnung des UVEK über die rheinschifffahrtspolizeilichen Vorschriften auf der Rheinstrecke zwischen Basel - Rheinfelden insbesondere die &lt;a target=&quot;_blank&quot; href=&quot;https://www.admin.ch/opc/de/official-compilation/2018/1019.pdf#page=4&quot;&gt;Artikel 9a und 9b&lt;/a&gt; erfüllt. &lt;p&gt;Die Fahrt mit Sicht durch die Dachluke ist nicht gestattet, weil dadurch die relevanten optischen Hilfsmitteln sowie die Überwachungsinstrumente am Steuerstand nicht mehr einsehbar sind. Nötigenfalls ist mehr Ballast in die Wallgänge zu pumpen.&lt;/div&gt; "/>\n\t\t\t\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t\t\t\t</HBox>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Debitorenadresse" id="__container5" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element6">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!--<ObjectHeader binding="{Debitor>}" number="{d/Kunnr}" introActive="true" titleActive="true" id="debitorHeader1" title="{/d/Name1}">--\x3e\n\t\t\t\t\t\t\t\t\t<ObjectHeader number="{Debitor>/d/Kunnr}" id="debitorHeader1" title="{Debitor>/d/Name1}" class="myDebitorMissingBox">\n\t\t\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t\t\t<sap.ui.core:CustomData xmlns:sap.ui.core="sap.ui.core" id="__data11" key="missing"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue="{= ${ path: \'Debitor>/d/Kunnr\', formatter: \'.formatter.convertToBool\' }.toString()}" writeToDom="true"/>\n\t\t\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t\t\t<attributes>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Debitor>/d/Name2}" id="__attribute8" title="Zusatz"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Debitor>/d/Stras}" id="__attribute125" title="Adresse"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Debitor>/d/Pstlz} {Ort01}" id="__attribute126" title="PLZ / Ort"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Debitor>/d/Pstl2}{Pfach}" id="__attribute5" title="Postfach"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Debitor>/d/Land1}" id="__attribute128" title="Ländercode"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute id="__attribute7" title="Email" text="{Debitor>/d/Email}"/>\n\t\t\t\t\t\t\t\t\t\t</attributes>\n\t\t\t\t\t\t\t\t\t</ObjectHeader>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Unterschrift" id="__container2" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element1">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Panel id="signaturePanel">\n\t\t\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t\t\t<sap.ui.core:CustomData id="__data67" key="sap-ui-fastnavgroup" value="true" writeToDom="true"/>\n\t\t\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t\t\t<layoutData>\n\t\t\t\t\t\t\t\t\t\t\t<sap.ui.layout:ResponsiveFlowLayoutData id="__data69"/>\n\t\t\t\t\t\t\t\t\t\t</layoutData>\n\t\t\t\t\t\t\t\t\t</Panel>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element3">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Panel>\n\t\t\t\t\t\t\t\t\t\t<infoToolbar>\n\t\t\t\t\t\t\t\t\t\t\t<Toolbar id="__toolbar7" width="100%">\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<sap.ui.core:CustomData id="__data71" key="sap-ui-fastnavgroup" value="true" writeToDom="true"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t\t\t\t\t<content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button id="SignatureReset" press="onSignatureReset" text="Unterschrift zurücksetzen" width="200px" enabled="{rapportView>/changeMode}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype="Reject" visible="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</content>\n\t\t\t\t\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t\t\t\t\t</infoToolbar>\n\t\t\t\t\t\t\t\t\t</Panel>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:layoutData>\n\t\t\t\t\t\t\t\t\t<sap.ui.layout.form:GridElementData id="__data26" hCells="2"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:layoutData>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Bemerkung" id="__container4" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element5">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<TextArea id="__area0" maxLength="255" wrapping="Off" value="{Bemerkung}" editable="{rapportView>/changeMode}"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Tarif Informationen" id="__container6" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label="Feiertage" id="__element7">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!--<Text text="Neujahr, Karfreitag, 2 Ostertage, Auffahrt, 2 Pfingsttage, 1. Mai, 1. August, 25. 2 Weihnachtstage" id="__text10"/>--\x3e\n\t\t\t\t\t\t\t\t\t<Text text="Neujahr, Karfreitag, Ostermontag, 1. Mai, Auffahrt, Pfingstmontag, 1. August, Weihnachten, Stephanstag" id="__text10"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label="Nachtstunde" id="__element11">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Text text="von 20:00 bis 06:00 Uhr" id="__text11"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element12" label=" ">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\t\ttext="* Gemäss Gebührentarif gültig ab 01.01.2017. Für die Punkte LD1, LD3, LD4 und LD5 kann gegebenenfalls MWST verrechnet werden. LD=Lotsendienstleistungen"\n\t\t\t\t\t\t\t\t\t\tid="__text12"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t\t<sap.ui.layout.form:customData>\n\t\t\t\t\t\t\t<core:CustomData key="w5g.dt.editable" value="true" id="__data36"/>\n\t\t\t\t\t\t</sap.ui.layout.form:customData>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t</sap.ui.layout.form:formContainers>\n\t\t\t\t<sap.ui.layout.form:layout>\n\t\t\t\t\t<sap.ui.layout.form:ResponsiveGridLayout id="__layout0" columnsL="1" labelSpanM="3"/>\n\t\t\t\t</sap.ui.layout.form:layout>\n\t\t\t</sap.ui.layout.form:Form>\n\t\t</semantic:content>\n\t\t<semantic:negativeAction>\n\t\t\t<semantic:NegativeAction text="Annullieren" id="__action2" enabled="{rapportView>/annullierenVisible}"\n\t\t\t\tvisible="{rapportView>/annullierenVisible}" press="onAnnullieren"/>\n\t\t</semantic:negativeAction>\n\t\t<semantic:layoutData/>\n\t</semantic:DetailPage>\n</mvc:View>',
"ch/portof/view/RapportSSB.view.xml":'<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic" xmlns:sap.ui.core="sap.ui.core" xmlns="sap.m"\n\txmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout" controllerName="ch.portof.controller.RapportSSB">\n\t\x3c!-- bindingContexts="RapporteSet" --\x3e\n\t<semantic:DetailPage xmlns:sap.m.semantic="sap.m.semantic" title="Semantic Page" id="__page2">\n\t\t<semantic:saveAction>\n\t\t\t<semantic:SaveAction id="__action0" press="onSave" enabled="{rapportSSBView>/changeMode}"/>\n\t\t</semantic:saveAction>\n\t\t<semantic:cancelAction>\n\t\t\t<semantic:CancelAction id="__action1" press="onCancel"/>\n\t\t</semantic:cancelAction>\n\t\t<semantic:content>\n\t\t\t<ObjectHeader title="{Schiff>/d/Name}" introActive="true" id="__header0" number="{Schiff>/d/Schiffsnummer}" condensed="true"\n\t\t\t\tclass="myDebitorMissing">\n\t\t\t\t<customData>\n\t\t\t\t\t<sap.ui.core:CustomData xmlns:sap.ui.core="sap.ui.core" id="__data10" key="missing"\n\t\t\t\t\t\tvalue="${ path: \'Debitor>/d/Kunnr\', formatter: \'.formatter.convertToBool\' }.toString()" writeToDom="true"/>\n\t\t\t\t</customData>\n\t\t\t</ObjectHeader>\n\t\t\t<sap.ui.layout.form:Form xmlns:sap.ui.layout.form="sap.ui.layout.form" editable="true" id="__form1">\n\t\t\t\t<sap.ui.layout.form:formContainers>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Kopfdaten {= parseFloat(${Rapportid}) }" id="__container1" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic"\n\t\t\t\t\t\t\t\txmlns:sap.ui.core="sap.ui.core" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout"\n\t\t\t\t\t\t\t\txmlns:sap.m.semantic="sap.m.semantic" xmlns:sap.ui.layout.form="sap.ui.layout.form" id="__element2_copy2" label="Zeit von">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!-- <TimePicker placeholder="HH:mm" placeholderSymbol="-" displayFormat="HH:mm" localeId="de-CH" id="startTimePicker_copy2"   \n\t\t\t\t\t\t\t\t\tvalue="{ path: \'Zeit\', type: \'sap.ui.model.type.Time\', \n\t\t\t\t\t\t\t\t\t\t\t\tformatOptions: { pattern: \'HH:mm\', \n\t\t\t\t\t\t\t\t\t\t\t\t\tsource: { pattern : \'\\\'PT\\\'HH\\\'H\\\'mm\\\'M\\\'ss\\\'S\\\'\'  } \n\t\t\t\t\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t\t\t\t\t}"/>--\x3e\n\t\t\t\t\t\t\t\t\t<DatePicker width="100%" id="startDatePicker" valueFormat="yyyyMMdd" placeholder="dd.MM.yyyy" displayFormat="dd.MM.yyyy"\n\t\t\t\t\t\t\t\t\t\tvalue="{ path: \'Datum\', type: \'sap.ui.model.type.Date\', formatOptions: { pattern: \'dd.MM.yyyy\', UTC: true }}"\n\t\t\t\t\t\t\t\t\t\teditable="{rapportSSBView>/changeMode}" change="_updateTarifeNewDate"/>\n\t\t\t\t\t\t\t\t\t<TimePicker xmlns="sap.m" placeholder="HH:mm" placeholderSymbol="-" displayFormat="HH:mm" localeId="de-CH" id="startTimePicker_copy4"\n\t\t\t\t\t\t\t\t\t\tvalue="{path : \'Zeit/ms\', type : \'sap.ui.model.type.Time\', formatOptions:{ source: {pattern: \'timestamp\'}, pattern : \'HH:mm\', UTC : true }}"\n\t\t\t\t\t\t\t\t\t\teditable="{rapportSSBView>/changeMode}" change="_updateTarifeNewDate"/>\n\t\t\t\t\t\t\t\t\t<Input width="100%" id="startPegelstand" value="{Pegel}" editable="{rapportSSBView>/changeMode}"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement xmlns:sap.ui.layout.form="sap.ui.layout.form" id="__element2_copy" label="Zeit Bis">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!--\t\t\t\t\t\t\t\t<TimePicker placeholder="HH:mm" placeholderSymbol="-" displayFormat="HH:mm" localeId="de-CH" id="startTimePicker_copy2"   \n\t\t\t\t\t\t\t\t\tvalue="{ path: \'Zeit\', type: \'sap.ui.model.type.Time\', \n\t\t\t\t\t\t\t\t\t\t\t\tformatOptions: { pattern: \'HH:mm\', \n\t\t\t\t\t\t\t\t\t\t\t\t\tsource: { pattern : \'\\\'PT\\\'HH\\\'H\\\'mm\\\'M\\\'ss\\\'S\\\'\'  } \n\t\t\t\t\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t\t\t\t\t}"/>--\x3e\n\t\t\t\t\t\t\t\t\t<DatePicker xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic" xmlns:sap.ui.core="sap.ui.core"\n\t\t\t\t\t\t\t\t\t\txmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout" xmlns:sap.m.semantic="sap.m.semantic"\n\t\t\t\t\t\t\t\t\t\txmlns:sap.ui.layout.form="sap.ui.layout.form" xmlns="sap.m" width="100%" id="endDatePicker" valueFormat="yyyyMMdd" placeholder="dd.MM.yyyy"\n\t\t\t\t\t\t\t\t\t\tdisplayFormat="dd.MM.yyyy" value="{ path: \'DatumTo\', type: \'sap.ui.model.type.Date\', formatOptions: { pattern: \'dd.MM.yyyy\', UTC: true }}"\n\t\t\t\t\t\t\t\t\t\teditable="{rapportSSBView>/changeMode}" change="_updateTarifeNewDate"/>\n\t\t\t\t\t\t\t\t\t<TimePicker xmlns="sap.m" placeholder="HH:mm" placeholderSymbol="-" displayFormat="HH:mm" localeId="de-CH" id="endTimePicker"\n\t\t\t\t\t\t\t\t\t\tvalue="{path : \'ZeitTo/ms\', type : \'sap.ui.model.type.Time\' , formatOptions:{ source: {pattern: \'timestamp\'}, pattern : \'HH:mm\', UTC : true }}"\n\t\t\t\t\t\t\t\t\t\teditable="{rapportSSBView>/changeMode}" change="_updateTarifeNewDate"/>\n\t\t\t\t\t\t\t\t\t<Input width="100%" id="endPegelstand" value="{PegelTo}" editable="{rapportSSBView>/changeMode}"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element9" label="Erfasser">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!--<Text text="{benutzerSet>/d/Firstname} {benutzerSet>/d/Lastname}" id="__text24"/>--\x3e\n\t\t\t\t\t\t\t\t\t<Text text="{Lotsenname}" id="__text24"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic"\n\t\t\t\t\t\t\t\txmlns:sap.ui.core="sap.ui.core" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout"\n\t\t\t\t\t\t\t\txmlns:sap.m.semantic="sap.m.semantic" xmlns:sap.ui.layout.form="sap.ui.layout.form" id="__element19"\n\t\t\t\t\t\t\t\tlabel="Effektive Einsatzzeit in Stunden">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!--<Text text="{benutzerSet>/d/Firstname} {benutzerSet>/d/Lastname}" id="__text24_copy"/>--\x3e\n\t\t\t\t\t\t\t\t\t<Text xmlns="sap.m" text="{rapportSSBView>/effektiveEinsatzZeit}" id="effektiveEinsatzZeit"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic"\n\t\t\t\t\t\txmlns:sap.ui.core="sap.ui.core" xmlns="sap.m" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout"\n\t\t\t\t\t\txmlns:sap.m.semantic="sap.m.semantic" xmlns:sap.ui.layout.form="sap.ui.layout.form" title="Strecke" id="__container7">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element8" label="Berg-/Talfahrt">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Switch id="__switch0" customTextOn="T" customTextOff="B" state="{Talfahrt}" enabled="{rapportSSBView>/changeMode}"\n\t\t\t\t\t\t\t\t\t\tchange="_setFahrtrichtung"/>\n\t\t\t\t\t\t\t\t\t<Text text="{rapportSSBView>/fahrtrichtung}" id="__text21"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label="Strecke von - bis" id="__element16">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!--\t\t\t\t\t\t\t\t\t<Select selectedKey="item0" id="__select1" >\n\t\t\t\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Weil" key="item0" id="__select1__item0"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Hafen Kleinhüningen" key="item1" id="__select1__item1"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Tankliegeplatz" key="item2" id="__select1__item2"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Birsfelden" key="item3" id="__select1__item3"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Auhafen" key="item4" id="__select1__item4"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Schleuse Augst" key="item5" id="__select1__item5"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Rheinfelden" key="item6" id="__select1__item6"/>\n\t\t\t\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Select selectedKey="item0" id="__select2">\n\t\t\t\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Weil" key="item0" id="__select2__item0"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Hafen Kleinhüningen" key="item1" id="__select2__item1"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Tankliegeplatz" key="item2" id="__select2__item2"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Birsfelden" key="item3" id="__select2__item3"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Auhafen" key="item4" id="__select2__item4"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Schleuse Augst" key="item5" id="__select2__item5"/>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem text="Rheinfelden" key="item6" id="__select2__item6"/>\n\t\t\t\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t--\x3e\n\t\t\t\t\t\t\t\t\t<Select id="__select1" items="{ path : \'orteSet>/d/results\', sorter: { path: \'Sort\', descending: false } }" change="onChangeOrt"\n\t\t\t\t\t\t\t\t\t\tselectedKey="{OrtVon}" forceSelection="false" enabled="{rapportSSBView>/changeMode}">\n\t\t\t\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem key="{orteSet>Ort}" text="{orteSet>Text}"/>\n\t\t\t\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t<Select id="__select2" items="{ path : \'orteSet>/d/results\', sorter: { path: \'Sort\', descending: false } }" selectedKey="{OrtBis}"\n\t\t\t\t\t\t\t\t\t\tforceSelection="false" enabled="{rapportSSBView>/changeMode}">\n\t\t\t\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem key="{orteSet>Ort}" text="{orteSet>Text}"/>\n\t\t\t\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Zuschläge" id="__container3" expandable="true" visible="false">\n\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element0" label="Samstags">\n\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t<Switch id="__samstagsZuschlag" state="{Samstagszuschlag}" change="_updateTarife" enabled="{rapportSSBView>/changeMode}"/>\n\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label="Sonn-/Feiertags/Nacht" id="__element4">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Switch id="__feiertagsZuschlag" state="{Feiertagszuschlag}" change="_updateTarife" enabled="{rapportSSBView>/changeMode}"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element13">\n\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t<Text text="* gemäss Gebührentarif" id="__text15"/>\n\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Tarife" id="__container0" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element10" label="Dienstleistung">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Select id="__select0" items="{ path : \'tarifeSet>/d/results\' }" change="onChangeTarif" selectedKey="{SsbTarif}" forceSelection="false"\n\t\t\t\t\t\t\t\t\t\tenabled="{rapportSSBView>/changeMode}">\n\t\t\t\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t\t\t\t<core:ListItem key="{tarifeSet>SsbTarif}" text="{tarifeSet>Text}"/>\n\t\t\t\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t<Text xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic" xmlns:sap.ui.core="sap.ui.core"\n\t\t\t\t\t\t\t\t\t\txmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout" xmlns:sap.m.semantic="sap.m.semantic"\n\t\t\t\t\t\t\t\t\t\txmlns:sap.ui.layout.form="sap.ui.layout.form" xmlns="sap.m" id="text51" text="{sel_tarifeSet>/d/Beschreibung}"/>\n\t\t\t\t\t\t\t\t\t\x3c!--<Text text="{ path: \'tarifeSet>/d/AllgemeineDienstleistung\', formatter: \'.formatter.currencyValue\' } CHF" id="__text45"/>--\x3e\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic"\n\t\t\t\t\t\t\t\txmlns:sap.ui.core="sap.ui.core" xmlns="sap.m" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout"\n\t\t\t\t\t\t\t\txmlns:sap.m.semantic="sap.m.semantic" xmlns:sap.ui.layout.form="sap.ui.layout.form" id="element20" label="Preis pro Stunde"\n\t\t\t\t\t\t\t\tvisible="{rapportSSBView>/mengenPreis}">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Text xmlns="sap.m" id="text52" text="{ path: \'sel_tarifeSet>/d/Preis\', formatter: \'.formatter.currencyValue\' } CHF"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic"\n\t\t\t\t\t\t\t\txmlns:sap.ui.core="sap.ui.core" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout"\n\t\t\t\t\t\t\t\txmlns:sap.m.semantic="sap.m.semantic" xmlns:sap.ui.layout.form="sap.ui.layout.form" id="__element17_copy" label="Verrechenbare Stunden"\n\t\t\t\t\t\t\t\tvisible="{rapportSSBView>/mengenPreis}">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!--<StandardListItem type="Inactive" title="SSB4 - Zusatzkosten Schieben " description="bei Einsatz länger als 3 Stunden pauschal pro Stunde" id="__item45"/>--\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--value="{path: \'SsbMenge\', type: \'sap.ui.model.odata.type.Decimal\', formatOptions: { maxFractionDigits: 2, minFractionDigits: 0}, constraints: { scale: 2 }}"--\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--type: \'sap.ui.model.type.Float\', --\x3e\n\t\t\t\t\t\t\t\t\t<Input width="100%" id="__input2" value="{path: \'SsbMenge\'}" type="Number" editable="{rapportSSBView>/changeMode}" valueLiveUpdate="true"\n\t\t\t\t\t\t\t\t\t\tchange="_calc"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic"\n\t\t\t\t\t\t\t\txmlns:sap.ui.core="sap.ui.core" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout"\n\t\t\t\t\t\t\t\txmlns:sap.m.semantic="sap.m.semantic" xmlns:sap.ui.layout.form="sap.ui.layout.form" id="element18" label="Pauschalpreis"\n\t\t\t\t\t\t\t\tvisible="{rapportSSBView>/pauschalPreis}">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!--<StandardListItem type="Inactive" title="SSB4 - Zusatzkosten Schieben " description="bei Einsatz länger als 3 Stunden pauschal pro Stunde" id="__item45"/>--\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--type: \'sap.ui.model.type.Float\', --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--\t\t\t\t\t\t\t\t\t<Input xmlns="sap.m" width="100%" id="input3" change="_calc"\n\t\t\t\t\t\t\t\t\t\tvalue="{ path: \'SsbPauschal\', type: \'sap.ui.model.odata.type.Decimal\', formatOptions: { maxFractionDigits: 2 } }"\n\t\t\t\t\t\t\t\t\t\teditable="{rapportSSBView>/changeMode}" visible="{rapportSSBView>/pauschalPreis}"/>--\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--\t<Input xmlns="sap.m" width="100%" id="input3" change="_calc"\n\t\t\t\t\t\t\t\t\t\tvalue="{ path: \'SsbPauschal\', type: \'sap.ui.model.type.Decimal\', formatOptions: { maxFractionDigits: 2, decimals: 2 } }" type="Number"\n\t\t\t\t\t\t\t\t\t\teditable="{rapportSSBView>/changeMode}" visible="{rapportSSBView>/pauschalPreis}"/>--\x3e\n\t\t\t\t\t\t\t\t\t<Input xmlns="sap.m" width="100%" id="input3" change="_calc"\n\t\t\t\t\t\t\t\t\t\tvalue="{ path: \'SsbPauschal\', type: \'sap.ui.model.odata.type.Decimal\', constraints: { scale: 2 } }" editable="{rapportSSBView>/changeMode}"\n\t\t\t\t\t\t\t\t\t\tvisible="{rapportSSBView>/pauschalPreis}"/>\n\t\t\t\t\t\t\t\t\t\x3c!--, type: \'sap.ui.model.odata.type.Decimal\', constraints: { precision: 12, scale: 2 }--\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--<Text xmlns="sap.m" id="text5233" text="{ path: \'SsbPauschal\', formatter: \'.formatter.currencyValue\' } CHF"/>--\x3e\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element18" label="Total">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!--<StandardListItem title="Total" id="__item14"/>--\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--\t\t\t<Text text="Total" id="__text50" visible="false"/>\n\t\t\t\t\t\t\t\t\t<Text text="" id="__text47" visible="false"/>\n\t\t\t\t\t\t\t\t\t<Text text="" id="__text48" visible="false"/>--\x3e\n\t\t\t\t\t\t\t\t\t<Text text="{ path: \'rapportSSBView>/total\', formatter: \'.formatter.currencyValue\' } CHF" id="__Total"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element15">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Button text="Eingaben Löschen" width="150px" id="__button6" type="Reject" press="onResetSelection" visible="{rapportSSBView>/changeMode}"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic"\n\t\t\t\t\t\t\t\txmlns:sap.ui.core="sap.ui.core" xmlns="sap.m" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout"\n\t\t\t\t\t\t\t\txmlns:sap.m.semantic="sap.m.semantic" xmlns:sap.ui.layout.form="sap.ui.layout.form" id="element17" label="Beschreibung" visible="false">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Text xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic" xmlns:sap.ui.core="sap.ui.core"\n\t\t\t\t\t\t\t\t\t\txmlns:html="http://www.w3.org/1999/xhtml" xmlns:sap.ui.layout="sap.ui.layout" xmlns:sap.m.semantic="sap.m.semantic"\n\t\t\t\t\t\t\t\t\t\txmlns:sap.ui.layout.form="sap.ui.layout.form" xmlns="sap.m" id="text51_copy" text="{sel_tarifeSet>/d/Beschreibung}"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Debitorenadresse" id="__container5" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element6">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!--<ObjectHeader binding="{Debitor>}" number="{d/Kunnr}" introActive="true" titleActive="true" id="debitorHeader1" title="{/d/Name1}">--\x3e\n\t\t\t\t\t\t\t\t\t<ObjectHeader number="{Debitor>/d/Kunnr}" id="debitorHeader1" title="{Debitor>/d/Name1}" class="myDebitorMissingBox">\n\t\t\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t\t\t<sap.ui.core:CustomData xmlns:sap.ui.core="sap.ui.core" id="__data11" key="missing"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue="{= ${ path: \'Debitor>/d/Kunnr\', formatter: \'.formatter.convertToBool\' }.toString()}" writeToDom="true"/>\n\t\t\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t\t\t<attributes>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Debitor>/d/Name2}" id="__attribute8" title="Zusatz"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Debitor>/d/Stras}" id="__attribute125" title="Adresse"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Debitor>/d/Pstlz} {Ort01}" id="__attribute126" title="PLZ / Ort"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Debitor>/d/Pstl2}{Pfach}" id="__attribute5" title="Postfach"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Debitor>/d/Land1}" id="__attribute128" title="Ländercode"/>\n\t\t\t\t\t\t\t\t\t\t\t<ObjectAttribute id="__attribute7" title="Email" text="{Debitor>/d/Email}"/>\n\t\t\t\t\t\t\t\t\t\t</attributes>\n\t\t\t\t\t\t\t\t\t</ObjectHeader>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Unterschrift" id="__container2" expandable="true" visible="false">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element14">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<HBox width="100%" id="__hbox0">\n\t\t\t\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t\t\t\t<CheckBox id="__boxCheckConfirm0" selected="{rapportSSBView>/confirmed}"/>\n\t\t\t\t\t\t\t\t\t\t\t<Text class="myConfirmation"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="Hiermit bestätigen wir, dass die obigen Angaben zutreffen und dass das Schiff bei Antritt der Reise in einem einwandfreien technischen und nautischen Zustand ist.&#10;&#10;Nous certifions par le présent document que les indications fournies sont correctes et que le navire est dans un état technique et nautique irréprochable au début du voyage.&#10;&#10;Hiermee bevestigen wij de correctheid van de bovenstaande informatie en dat het schip bij het begin van de reis in een technisch en nautisch perfecte staat verkeerd.&#10;&#10;We hereby confirm that the information listed above is accurate and that the ship is in good technical and nautical condition at the start of the journey."\n\t\t\t\t\t\t\t\t\t\t\t\tid="__text13"/>\n\t\t\t\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t\t\t\t</HBox>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element1">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Panel id="signaturePanel">\n\t\t\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t\t\t<sap.ui.core:CustomData id="__data67" key="sap-ui-fastnavgroup" value="true" writeToDom="true"/>\n\t\t\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t\t\t<layoutData>\n\t\t\t\t\t\t\t\t\t\t\t<sap.ui.layout:ResponsiveFlowLayoutData id="__data69"/>\n\t\t\t\t\t\t\t\t\t\t</layoutData>\n\t\t\t\t\t\t\t\t\t</Panel>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element3">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Panel>\n\t\t\t\t\t\t\t\t\t\t<infoToolbar>\n\t\t\t\t\t\t\t\t\t\t\t<Toolbar id="__toolbar7" width="100%">\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<sap.ui.core:CustomData id="__data71" key="sap-ui-fastnavgroup" value="true" writeToDom="true"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t\t\t\t\t<content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button id="SignatureReset" press="onSignatureReset" text="Unterschrift zurücksetzen" width="200px" enabled="{rapportSSBView>/changeMode}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype="Reject" visible="{rapportSSBView>/changeMode}"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</content>\n\t\t\t\t\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t\t\t\t\t</infoToolbar>\n\t\t\t\t\t\t\t\t\t</Panel>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:layoutData>\n\t\t\t\t\t\t\t\t\t<sap.ui.layout.form:GridElementData id="__data26" hCells="2"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:layoutData>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Bemerkung / abweichende Rechnungsadresse" id="__container4" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element5">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<TextArea id="__area0" maxLength="255" wrapping="Off" value="{Bemerkung}" editable="{rapportSSBView>/changeMode}"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Zusatzdienstleistungen" id="__container8" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element20">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<TextArea id="__area1" maxLength="255" wrapping="Off" value="{ZusaetzlicheLeistung}" editable="{rapportSSBView>/changeMode}"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title="Tarif Informationen" id="__container6" expandable="true">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label="Feiertage" id="__element7">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t\x3c!--<Text text="Neujahr, Karfreitag, 2 Ostertage, Auffahrt, 2 Pfingsttage, 1. Mai, 1. August, 25. 2 Weihnachtstage" id="__text10"/>--\x3e\n\t\t\t\t\t\t\t\t\t<Text text="Neujahr, Karfreitag, Ostermontag, 1. Mai, Auffahrt, Pfingstmontag, 1. August, Weihnachten, Stephanstag" id="__text10"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label="Nachtstunde" id="__element11">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Text text="von 20:00 bis 06:00 Uhr" id="__text11"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id="__element12" label=" ">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\t\ttext="* Gemäss Gebührentarif gültig ab 01.01.2017. Für die Punkte SSB1, SSB3 und SSB4 kann gegebenenfalls MWST verrechnet werden. SSB=Schlepp- Schubboot"\n\t\t\t\t\t\t\t\t\t\tid="__text12"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t\t<sap.ui.layout.form:customData>\n\t\t\t\t\t\t\t<core:CustomData key="w5g.dt.editable" value="true" id="__data36"/>\n\t\t\t\t\t\t</sap.ui.layout.form:customData>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t</sap.ui.layout.form:formContainers>\n\t\t\t\t<sap.ui.layout.form:layout>\n\t\t\t\t\t<sap.ui.layout.form:ResponsiveGridLayout id="__layout0" columnsL="1" labelSpanM="3"/>\n\t\t\t\t</sap.ui.layout.form:layout>\n\t\t\t</sap.ui.layout.form:Form>\n\t\t</semantic:content>\n\t\t<semantic:negativeAction>\n\t\t\t<semantic:NegativeAction text="Annullieren" id="__action2" enabled="{rapportSSBView>/annullierenVisible}"\n\t\t\t\tvisible="{rapportSSBView>/annullierenVisible}" press="onAnnullieren"/>\n\t\t</semantic:negativeAction>\n\t\t<semantic:layoutData/>\n\t</semantic:DetailPage>\n</mvc:View>',"ch/portof/view/Reporting.view.xml":'<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:semantic="sap.m.semantic" xmlns="sap.m"\n\txmlns:html="http://www.w3.org/1999/xhtml" controllerName="ch.portof.controller.Reporting">\n\t<App>\n\t\t<pages>\n\t\t\t<Page title="Lotsenrapporte" navButtonPress="onNavBack" showNavButton="{device>/system/phone}">\n\t\t\t\t<content>\n\t\t\t\t\t<Table id="lineItemsList" width="auto" items="{ path : \'/RapporteSet\' }" updateFinished="onListUpdateFinished"\n\t\t\t\t\t\tnoDataText="{i18n>detailLineItemTableNoDataText}" busyIndicatorDelay="{detailView>/lineItemTableDelay}" class="sapUiResponsiveMargin"\n\t\t\t\t\t\tgrowingScrollToLoad="true" growing="true">\n\t\t\t\t\t\t<headerToolbar>\n\t\t\t\t\t\t\t<Toolbar id="lineItemsToolbar">\n\t\t\t\t\t\t\t\t<Title id="lineItemsHeader" text="{detailView>/lineItemListTitle}"/>\n\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t</headerToolbar>\n\t\t\t\t\t\t<columns>\n\t\t\t\t\t\t\t<Column>\n\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableIDColumn}"/>\n\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t<Column id="__column5">\n\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableUnitAttirbut5Column}" id="__text23"/>\n\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t<Column minScreenWidth="Tablet" demandPopin="true">\n\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableUnitAttirbut1Column}"/>\n\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t<Column id="__column2">\n\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableUnitAttirbut2Column}" id="__text20"/>\n\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t<Column id="__column3">\n\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableUnitAttirbut3Column}" id="__text21"/>\n\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t<Column id="__column4">\n\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableUnitAttirbut4Column}" id="__text22"/>\n\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t<Column id="__column6">\n\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t<Text text="{i18n>detailLineItemTableUnitAttirbut6Column}" id="__text25"/>\n\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t</columns>\n\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t<ColumnListItem press="_onListItemPressed" type="Active" class="myBackgroundLoevm">\n\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t<sap.ui.core:CustomData xmlns:sap.ui.core="sap.ui.core" id="__data9" key="background" value="{= ${Loevm}.toString()}" writeToDom="true"/>\n\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t<ObjectIdentifier title="{= parseFloat(${Rapportid}) }"/>\n\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Schiffsname}" id="__attribute5"/>\n\t\t\t\t\t\t\t\t\t\x3c!-- SCHIFFSNAME EINFÜGEN --\x3e\n\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{ path: \'Datum\', type: \'sap.ui.model.type.Date\', formatOptions: { pattern: \'dd.MM.yyyy\' }}" id="__attribute0"/>\n\t\t\t\t\t\t\t\t\t\x3c!--<ObjectAttribute id="__attribute1" text="{ path: \'Zeit.ms\', type: \'sap.ui.model.type.Time\', formatOptions: { pattern: \'HH:mm\', source: { pattern : \'\\\'PT\\\'HH\\\'H\\\'mm\\\'M\\\'ss\\\'S\\\'\'}}}"/>--\x3e\n\t\t\t\t\t\t\t\t\t<ObjectAttribute id="__attribute1"\n\t\t\t\t\t\t\t\t\t\ttext="{path : \'Zeit/ms\', type : \'sap.ui.model.type.Time\' ,formatOptions:{ source: {pattern: \'timestamp\'}, pattern : \'HH:mm\', UTC : true }}"/>\n\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{Lotsenname}" id="__attribute2"/>\n\t\t\t\t\t\t\t\t\t<CheckBox id="__box0" selected="{Loevm}" editable="false"/>\n\t\t\t\t\t\t\t\t\t<ObjectAttribute text="{RapportArt}" id="__attribute13"/>\n\t\t\t\t\t\t\t\t\t\x3c!--<ObjectAttribute text="{= ${Loevm}.toString()}" id="__attribute9"/>--\x3e\n\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t</items>\n\t\t\t\t\t</Table>\n\t\t\t\t</content>\n\t\t\t</Page>\n\t\t</pages>\n\t</App>\n</mvc:View>',
"ch/portof/i18n/i18n.properties":"# This is the resource bundle for Lotsen Rapporte \n\n#XTIT: Application name\nappTitle=Lotsen Rapporte \n\n#YDES: Application description\nappDescription=Erfassen von Lotsenrapporten\n\n#~~~ Master View ~~~~~~~~~~~~~~~~~~~~~~~~~~\nObjectName=Schiff\nObjectNamePlural=Schiffe\n#XTIT: Master view title with placeholder for the number of items\nmasterTitleCount=Schiffe ({0})\n\n#XTOL: Tooltip for the search field\nmasterSearchTooltip=Gib einen Schiffsnamen ein\n\n#XBLI: text for a list with no data\nmasterListNoDataText=Keine Schiffe verfügbar\n\n#XBLI: text for a list with no data with filter or search\nmasterListNoDataWithFilterOrSearchText=Keine passende Schiffe gefunden\n\n\n#~~~ Detail View ~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n#XTIT: Detail view title\ndetailTitle=Schiff\n\n#XTOL: Icon Tab Bar Info\ndetailIconTabBarInfo=Info\n\n#XTOL: Icon Tab Bar Attachments\ndetailIconTabBarAttachments=Attachments\n\n#XBLI: Text for the RapporteSet table with no data\ndetailLineItemTableNoDataText=keine Rapporte gefunden\n\n#XTIT: Title of the RapporteSet table\ndetailLineItemTableHeading=Rapporte\n\n#XTIT: Title of the RapporteSet table\ndetailLineItemTableHeadingCount=Rapporte ({0})\n\n#XGRP: Title for the Datum column in the RapporteSet table\ndetailLineItemTableIDColumn=Rapport ID\n\n#XGRP: Title for the  column in the RapporteSet table\ndetailLineItemTableUnitAttirbut1Column=Datum\n\n#XGRP: Title for the  column in the RapporteSet table\ndetailLineItemTableUnitAttirbut2Column=Zeit\n\n#XGRP: Title for the  column in the RapporteSet table\ndetailLineItemTableUnitAttirbut3Column=Erfasser\n\n#XGRP: Title for the  column in the RapporteSet table\ndetailLineItemTableUnitAttirbut4Column=Annulliert\n\n#XGRP: Title for the  column in the RapporteSet table\ndetailLineItemTableUnitAttirbut5Column=Schiffsname\n\n#XGRP: Title for the  column in the RapporteSet table\ndetailLineItemTableUnitAttirbut6Column=Rapport Art\n\n\n#XTIT: Send E-Mail subject\nshareSendEmailObjectSubject=<Email subject including object identifier PLEASE REPLACE ACCORDING TO YOUR USE CASE> {0}\n\n#YMSG: Send E-Mail message\nshareSendEmailObjectMessage=<Email body PLEASE REPLACE ACCORDING TO YOUR USE CASE> {0} (id: {1})\\r\\n{2}\n\n#YMSG:Detail View Stammdaten\ndetailStammdaten=Stammdaten\n#YMSG:Detail View Rapport Anlegen\ndetailRapportAnlegen=Rapporte Anlegen\n#YMSG:Detail View Rapport Anlegen\ndetailRapportListe=Rapporte Anzeigen\n#~~~ Not Found View ~~~~~~~~~~~~~~~~~~~~~~~\n\n#XTIT: Not found view title\nnotFoundTitle=Not Found\n\n#YMSG: The SchiffeSet not found text is displayed when there is no SchiffeSet with this id\nnoObjectFoundText=Dieses Schiff ist nicht verfügbar\n\n#YMSG: The SchiffeSet not available text is displayed when there is no data when starting the app\nnoObjectsAvailableText=keine Schiffe sind Verfügbar\n\n#YMSG: The not found text is displayed when there was an error loading the resource (404 error)\nnotFoundText=Die gewünschte Ressource konnte nicht gefunden werden\n\n#~~~ Not Available View ~~~~~~~~~~~~~~~~~~~~~~~\n\n#XTIT: Master view title\nnotAvailableViewTitle=Schiff\n\n#~~~ Error Handling ~~~~~~~~~~~~~~~~~~~~~~~\n\n#YMSG: Error dialog description\nerrorText=Sorry, es ist ein technischer Fehler aufgetreten, bitte versuche es später noch einmal.","ch/portof/manifest.json":'{"_version":"1.4.0","sap.app":{"id":"ch.portof","type":"application","i18n":"i18n/i18n.properties","title":"{{appTitle}}","description":"{{appDescription}}","applicationVersion":{"version":"1.0.0"},"dataSources":{"mainService":{"uri":"/sap/opu/odata/sap/ZLOTSENAPP2_SRV/","type":"OData","settings":{"odataVersion":"2.0","localUri":"localService/metadata.xml"}}},"sourceTemplate":{"id":"sap.ui.ui5-template-plugin.2masterdetail","version":"1.38.3"}},"sap.ui":{"technology":"UI5","icons":{"icon":"sap-icon://detail-view","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_bluecrystal"]},"sap.ui5":{"rootView":{"viewName":"ch.portof.view.App","type":"XML","id":"app"},"dependencies":{"minUI5Version":"1.38.0","libs":{"sap.m":{"minVersion":"1.38.0"},"sap.ui.commons":{"minVersion":""},"sap.ui.core":{"minVersion":"1.38.0"},"sap.ui.layout":{"minVersion":""},"sap.ushell":{"minVersion":""}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"ch.portof.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"defaultBindingMode":"TwoWay","refreshAfterChange":"true"}}},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","viewPath":"ch.portof.view","controlId":"idAppControl","controlAggregation":"detailPages","bypassed":{"target":["master","notFound"]},"async":true},"routes":[{"pattern":"","name":"master","target":["object","master"]},{"pattern":"SchiffeSet/{objectId}","name":"object","target":["master","object"]},{"pattern":"RapportNew/{objectId}","name":"rapportNewRoute","target":["master","rapportTarget"]},{"pattern":"Rapport/{objectId}","name":"rapportRoute","target":["master","rapportTarget"]},{"pattern":"RapportNewSSB/{objectId}","name":"rapportNewSSBRoute","target":["master","rapportSSBTarget"]},{"pattern":"RapportSSB/{objectId}","name":"rapportSSBRoute","target":["master","rapportSSBTarget"]},{"pattern":"RapportReport/{objectId}","name":"rapportRouteReport","target":["master","rapportTarget"]},{"pattern":"RapportSSBReport/{objectId}","name":"rapportSSBRouteReport","target":["master","rapportTarget"]},{"pattern":"showReport","name":"showReportingRoute","target":["master","showReportTarget"]}],"targets":{"master":{"viewName":"Master","viewLevel":1,"viewId":"master","controlAggregation":"masterPages"},"object":{"viewName":"Detail","viewId":"detail","viewLevel":2},"rapportTarget":{"viewName":"Rapport","viewId":"rapport","viewLevel":3},"rapportSSBTarget":{"viewName":"RapportSSB","viewId":"rapportSSB","viewLevel":3},"showReportTarget":{"viewName":"Reporting","viewId":"report","viewLevel":2},"detailObjectNotFound":{"viewName":"DetailObjectNotFound","viewId":"detailObjectNotFound"},"detailNoObjectsAvailable":{"viewName":"DetailNoObjectsAvailable","viewId":"detailNoObjectsAvailable"},"notFound":{"viewName":"NotFound","viewId":"notFound"}}},"resources":{"js":[{"uri":"libs/jSignature.min.js"},{"uri":"libs/jSignature.CompressorBase30.js"}],"css":[{"uri":"css/style.css"}]}},"sap.platform.hcp":{"uri":"","_version":"1.1.0"},"sap.platform.abap":{"uri":"/sap/bc/ui5_ui5/sap/zlotsen_app","_version":"1.1.0"}}'}});