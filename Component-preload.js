/**
* This file was auto-generated by SAP Web IDE build and includes all
* the source files required by SAPUI5 runtime for performance optimization.
* PLEASE DO NOT EDIT THIS FILE!! Changes will be overwritten the next time the build is run.
*/
jQuery.sap.registerPreloadedModules({
	"version": "2.0",
	"name": "ch/portof/Component-preload",
	"modules": {
		"ch/portof/view/Rapport.view.xml": "<mvc:View xmlns:core=\"sap.ui.core\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns:semantic=\"sap.m.semantic\" xmlns:sap.ui.core=\"sap.ui.core\" xmlns=\"sap.m\" xmlns:html=\"http://www.w3.org/1999/xhtml\" xmlns:sap.ui.layout=\"sap.ui.layout\" controllerName=\"ch.portof.controller.Rapport\">\n\t<semantic:DetailPage xmlns:sap.m.semantic=\"sap.m.semantic\" title=\"Semantic Page\" id=\"__page2\">\n\t\t<semantic:saveAction>\n\t\t\t<semantic:SaveAction id=\"__action0\" press=\"onSave\"/>\n\t\t</semantic:saveAction>\n\t\t<semantic:cancelAction>\n\t\t\t<semantic:CancelAction id=\"__action1\" press=\"onCancel\"/>\n\t\t</semantic:cancelAction>\n\t\t<semantic:content>\n\t\t\t<ObjectHeader title=\"{Name}\" introActive=\"true\" id=\"__header0\" number=\"{Schiffsnummer}\" condensed=\"true\" titleActive=\"true\"/>\n\t\t\t<sap.ui.layout.form:Form xmlns:sap.ui.layout.form=\"sap.ui.layout.form\" editable=\"true\" id=\"__form1\">\n\t\t\t\t<sap.ui.layout.form:formContainers>\n\t\t\t\t\t<sap.ui.layout.form:FormContainer title=\"Kopfdaten\" id=\"__container1\">\n\t\t\t\t\t\t<sap.ui.layout.form:formElements>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label=\"Datum / Zeit\" id=\"__element2\">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<DatePicker width=\"100%\" id=\"startDatePicker\" valueFormat=\"yyyyMMdd\" placeholder=\"dd.MM.yyyy\" displayFormat=\"dd.MM.yyyy\"/>\n\t\t\t\t\t\t\t\t\t<TimePicker placeholder=\"HH:mm\" placeholderSymbol=\"-\" displayFormat=\"HH:mm\" localeId=\"de-CH\" id=\"startTimePicker\" valueFormat=\"HHmmss\"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:layoutData>\n\t\t\t\t\t\t\t\t\t<FlexItemData id=\"__data50\"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:layoutData>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label=\"Berg-/Talfahrt\" id=\"__element8\">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Switch id=\"__switch0\" customTextOn=\"B\" customTextOff=\"T\"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label=\"Lotse\" id=\"__element9\">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Text text=\"Mario Leuenberger\" id=\"__text24\"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id=\"__element10\">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Table noDataText=\"Drop column list items here and columns in the area above\" id=\"__table0\">\n\t\t\t\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"__item0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type=\"Inactive\" title=\"Mittlere Rheinbrücke\" description=\"Basel UW Birsfelden (v.v.)\" id=\"__item7\" adaptTitleSize=\"false\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"__box0\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"bis 2'000 t\" id=\"__text26\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"86 CHF\" id=\"__text27\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"__item1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type=\"Inactive\" title=\"Mittlere Rheinbrücke\" description=\"Basel UW Birsfelden (v.v.)\" id=\"__item8\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"__box1\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"&gt; 100m/2'000 t\" id=\"__text29\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"100 CHF\" id=\"__text30\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"__item2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type=\"Inactive\" title=\"Gem.RPVO Basel - Rheinfelden\" description=\"(hoheitliche / nicht Mwst.pflichtig)\" id=\"__item9\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"__box2\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"&gt; 110-125m / 2'000 t\" id=\"__text32\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"140 CHF\" id=\"__text33\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"__item3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type=\"Inactive\" title=\"Gem.RPVO Basel - Rheinfelden\" description=\"(hoheitliche / nicht Mwst.pflichtig)\" id=\"__item10\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"__box3\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"Schubverband\" id=\"__text35\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"240 CHF\" id=\"__text36\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"__item4\">\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type=\"Inactive\" title=\"Basel - Augst (v.v)\" id=\"__item11\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"__box4\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"alle Schiffe\" id=\"__text38\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"256 CHF\" id=\"__text39\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"__item5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type=\"Inactive\" title=\"Birsfelden - Augst (v.v)\" id=\"__item12\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id=\"__box5\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"alle Schiffe\" id=\"__text41\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"256 CHF\" id=\"__text42\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"__item6\">\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type=\"Inactive\" title=\"Allgemeine Dienstleistungen\" description=\"Lotsen/Stundenlohn\" id=\"__item13\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--<CheckBox id=\"__box6\"/>-->\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"alle Schiffe\" id=\"__text44\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"256 CHF\" id=\"__text45\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"__item15\">\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<StandardListItem type=\"Inactive\" title=\"Total\" id=\"__item14\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"\" id=\"__text47\" visible=\"false\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"\" id=\"__text48\" visible=\"false\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"256 CHF\" id=\"__text49\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\n\t\t\t\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t\t\t\t\t<columns>\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"__column0\" mergeDuplicates=\"true\" width=\"200px\">\n\t\t\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"Strecke\" id=\"__label6\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"__column1\" width=\"40px\">\n\t\t\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label id=\"__label7\" visible=\"false\" text=\"Auswahl\" width=\"20px\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"__column2\" minScreenWidth=\"800px\" demandPopin=\"true\" popinDisplay=\"Inline\">\n\t\t\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"Schiffstyp\" id=\"__label8\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"__column3\" minScreenWidth=\"800px\" demandPopin=\"true\" popinDisplay=\"Inline\">\n\t\t\t\t\t\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label text=\"Grundtarif\" width=\"100%\" id=\"__label5\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t\t\t\t</Column>\n\t\t\t\t\t\t\t\t\t\t</columns>\n\t\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label=\"Zuschläge\" id=\"__element0\">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Title text=\"Nachtzuschlag\" width=\"100%\" id=\"__title2\"/>\n\t\t\t\t\t\t\t\t\t<Switch id=\"__switch4\"/>\n\t\t\t\t\t\t\t\t\t<Title text=\"Feiertagszuschlag\" width=\"100%\" id=\"__title3\"/>\n\t\t\t\t\t\t\t\t\t<Switch id=\"__switch5\"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement label=\"Unterschrift\" id=\"__element1\">\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<!--<Image width=\"300px\" height=\"100px\" id=\"__image0\"/>-->\n\t\t\t\t\t\t\t\t\t<!--<Panel id=\"signaturePanel\" />-->\n\t\t\t\t\t\t\t\t\t<Panel id=\"signaturePanel\">\n\t\t\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t\t\t<sap.ui.core:CustomData id=\"__data67\" key=\"sap-ui-fastnavgroup\" value=\"true\" writeToDom=\"true\"/>\n\t\t\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t\t\t<!--<content>-->\n\t\t\t\t\t\t\t\t\t\t<!--\t<Title text=\"Unterschrift\" width=\"100%\"/>-->\n\t\t\t\t\t\t\t\t\t\t<!--</content>-->\n\t\t\t\t\t\t\t\t\t\t<layoutData>\n\t\t\t\t\t\t\t\t\t\t\t<sap.ui.layout:ResponsiveFlowLayoutData id=\"__data69\"/>\n\t\t\t\t\t\t\t\t\t\t</layoutData>\n\t\t\t\t\t\t\t\t\t</Panel>\n\t\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t\t<sap.ui.layout.form:FormElement id=\"__element3\">\n\t\t\t\t\t\t\t\t\t<sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t\t<Panel>\n\t\t\t\t\t\t\t\t\t\t<infoToolbar>\n\t\t\t\t\t\t\t\t\t\t\t<Toolbar id=\"__toolbar7\" width=\"100%\">\n\t\t\t\t\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<sap.ui.core:CustomData id=\"__data71\" key=\"sap-ui-fastnavgroup\" value=\"true\" writeToDom=\"true\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t\t\t\t\t<content>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button id=\"SignatureReset\" press=\"onSignatureReset\" text=\"Unterschrift zurücksetzen\" width=\"200px\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</content>\n\t\t\t\t\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t\t\t\t\t</infoToolbar>\n\t\t\t\t\t\t\t\t\t</Panel>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:fields>\n\t\t\t\t\t\t\t\t<sap.ui.layout.form:layoutData>\n\t\t\t\t\t\t\t\t\t<sap.ui.layout.form:GridElementData id=\"__data26\" hCells=\"2\"/>\n\t\t\t\t\t\t\t\t</sap.ui.layout.form:layoutData>\n\t\t\t\t\t\t\t</sap.ui.layout.form:FormElement>\n\t\t\t\t\t\t</sap.ui.layout.form:formElements>\n\t\t\t\t\t</sap.ui.layout.form:FormContainer>\n\t\t\t\t</sap.ui.layout.form:formContainers>\n\t\t\t\t<sap.ui.layout.form:layout>\n\t\t\t\t\t<sap.ui.layout.form:ResponsiveGridLayout id=\"__layout0\"/>\n\t\t\t\t</sap.ui.layout.form:layout>\n\t\t\t</sap.ui.layout.form:Form>\n\t\t\t<!--  <Panel id=\"signaturePanel\">-->\n\t\t\t<!--<customData>-->\n\t\t\t<!--\t\t\t\t<sap.ui.core:CustomData id=\"__data67\" key=\"sap-ui-fastnavgroup\" value=\"true\" writeToDom=\"true\"/>-->\n\t\t\t<!--\t\t\t</customData>-->\n\t\t\t<!--\t\t\t<content>-->\n\t\t\t<!--\t\t\t\t<Title text=\"Unterschrift\" width=\"100%\"/>-->\n\t\t\t<!--\t\t\t</content>-->\n\t\t\t<!--\t\t\t<layoutData>-->\n\t\t\t<!--\t\t\t\t<sap.ui.layout:ResponsiveFlowLayoutData id=\"__data69\"/>-->\n\t\t\t<!--\t\t\t</layoutData>-->\n\t\t\t<!--  </Panel>-->\n\t\t\t<!--\t\t\t\t\t\t\t<Panel>-->\n\t\t\t<!--\t<infoToolbar>-->\n\t\t\t<!--\t\t<Toolbar id=\"__toolbar7\" width=\"100%\">-->\n\t\t\t<!--\t\t\t<customData>-->\n\t\t\t<!--\t\t\t\t<sap.ui.core:CustomData id=\"__data71\" key=\"sap-ui-fastnavgroup\" value=\"true\" writeToDom=\"true\"/>-->\n\t\t\t<!--\t\t\t</customData>-->\n\t\t\t<!--\t\t\t<content>-->\n\t\t\t<!--\t\t\t\t<Button id=\"SignatureReset\" press=\"onSignatureReset\" text=\"Unterschrift zurücksetzen\" width=\"200px\"/>-->\n\t\t\t<!--\t\t\t</content>-->\n\t\t\t<!--\t\t</Toolbar>-->\n\t\t\t<!--\t</infoToolbar>-->\n\t\t\t<!--</Panel>-->\n\t\t</semantic:content>\n\t\t<semantic:negativeAction>\n\t\t\t<semantic:NegativeAction text=\"Reset\" id=\"__action2\"/>\n\t\t</semantic:negativeAction>\n\t</semantic:DetailPage>\n</mvc:View>",
		"ch/portof/view/DetailObjectNotFound.view.xml": "<mvc:View\n\tcontrollerName=\"ch.portof.controller.BaseController\"\n\txmlns:mvc=\"sap.ui.core.mvc\"\n\txmlns=\"sap.m\">\n\n\t<MessagePage\n\t\tid=\"page\"\n\t\ttitle=\"{i18n>detailTitle}\"\n\t\ttext=\"{i18n>noObjectFoundText}\"\n\t\ticon=\"{sap-icon://product}\"\n\t\tdescription=\"\"\n\t\tshowNavButton=\"{device>/system/phone}\"\n\t\tnavButtonPress=\"onNavBack\">\n\t</MessagePage>\n\n</mvc:View>",
		"ch/portof/view/App.view.xml": "<mvc:View\n\tcontrollerName=\"ch.portof.controller.App\"\n\txmlns:mvc=\"sap.ui.core.mvc\"\n\tdisplayBlock=\"true\"\n\tbusy=\"{appView>/busy}\"\n\tbusyIndicatorDelay=\"{appView>/delay}\"\n\txmlns=\"sap.m\">\n\t<SplitApp id=\"idAppControl\" />\n</mvc:View>",
		"ch/portof/view/Detail.view.xml": "<mvc:View xmlns=\"sap.m\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns:semantic=\"sap.m.semantic\" controllerName=\"ch.portof.controller.Detail\" afterInit=\"\" modelContextChange=\"\" beforeRendering=\"\" afterRendering=\"\">\n\n\t<semantic:DetailPage id=\"page\" navButtonPress=\"onNavBack\" showNavButton=\"{device>/system/phone}\" title=\"{i18n>detailTitle}\" busy=\"{detailView>/busy}\" busyIndicatorDelay=\"{detailView>/delay}\">\n\n\t\t<semantic:content>\n\t\t\t<ObjectHeader id=\"objectHeader\" title=\"{Name}\">\n\t\t\t<attributes>\n\t\t\t    <ObjectAttribute text=\"{Schiffsnummer}\" id=\"__attribute3\" title=\"{/#Schiffe/Schiffsnummer/@sap:label}\"/>\n\t\t\t    <ObjectAttribute text=\"{Nationalitaet}\" id=\"__attribute6\" title=\"{/#Schiffe/Nationalitaet/@sap:label}\"/>\n\t\t\t    <ObjectAttribute text=\"{Verdraengung}\" id=\"__attribute4\" title=\"{/#Schiffe/Verdraengung/@sap:label}\"/>\n\t\t\t</attributes>\n\t\t\t</ObjectHeader>\n\t\t\t<IconTabBar id=\"iconTabBar\" class=\"sapUiResponsiveContentPadding\">\n\t\t\t\t<items>\n\t\t\t\t\t<IconTabFilter id=\"iconTabBarFilter1\" icon=\"sap-icon://hint\" tooltip=\"{i18n>detailIconTabBarInfo}\" text=\"{i18n>detailStammdaten}\">\n\t\t\t\t\t<content>\n\t\t\t\t\t    <ObjectHeader binding=\"{Debitoren/}\" number=\"{Kunnr}\" introActive=\"true\" titleActive=\"true\" id=\"debitorHeader1\" title=\"{Name1} {Name2}\">\n\t\t\t\t\t        <attributes>\n\t\t\t\t\t            <ObjectAttribute text=\"{Stras}\" id=\"__attribute125\" title=\"Strasse\"/>\n\t\t\t\t\t\t\t\t<ObjectAttribute text=\"{Pstlz} {Ort01}\" id=\"__attribute126\" title=\"Plz/Ort\"/>\n\t\t\t\t\t\t\t\t<ObjectAttribute text=\"{Regio}\" id=\"__attribute127\" title=\"Region\"/>\n\t\t\t\t\t\t\t\t<ObjectAttribute text=\"{Land1}\" id=\"__attribute128\" title=\"Land\"/>\n\t\t\t\t\t        </attributes>\n\t\t\t\t\t    </ObjectHeader>\n<!--\t\t\t\t\t    <Input binding=\"{/SchiffeSet('07001318')/Debitoren}\" value=\"{Name1}\" />\n\n\t\t\t\t\t    <Input value=\"{ path: 'Debitoren/Name1',\n\t\t\t\t\t    \t\t\t\t parameters : {expand:'Debitoren'} }\" />\n\t\t\t\t\t\t<Input binding=\"{ path: 'Debitoren/' }\" value=\"{Name1}\" />\n\t\t\t\t\t\t<Input binding=\"{Debitoren/}\" value=\"{Name1}\" />-->\n\t\t\t\t\t</content>\n\t\t\t\t\t</IconTabFilter>\n\t\t\t\t\t<IconTabFilter id=\"iconTabBarFilter2\" icon=\"sap-icon://write-new-document\" tooltip=\"{i18n>detailIconTabBarAttachments}\" text=\"{i18n>detailRapportAnlegen}\">\n\t\t\t\t\t</IconTabFilter>\n\t\t\t\t\t<IconTabFilter text=\"{i18n>detailRapportListe}\" icon=\"sap-icon://task\" iconColor=\"Critical\" id=\"__filter0\"/>\n\t\t\t\t</items>\n\t\t\t</IconTabBar>\n\t\t\t<Table id=\"lineItemsList\" width=\"auto\" items=\"{RapporteSet}\" updateFinished=\"onListUpdateFinished\" noDataText=\"{i18n>detailLineItemTableNoDataText}\" busyIndicatorDelay=\"{detailView>/lineItemTableDelay}\" class=\"sapUiResponsiveMargin\">\n\t\t\t\t<headerToolbar>\n\t\t\t\t\t<Toolbar id=\"lineItemsToolbar\">\n\t\t\t\t\t\t<Title id=\"lineItemsHeader\" text=\"{detailView>/lineItemListTitle}\"/>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</headerToolbar>\n\t\t\t\t<columns>\n\t\t\t\t\t<Column>\n\t\t\t\t\t\t<Text text=\"{i18n>detailLineItemTableIDColumn}\"/>\n\t\t\t\t\t</Column>\n\t\t\t\t\t<Column minScreenWidth=\"Tablet\" demandPopin=\"true\" hAlign=\"Right\">\n\t\t\t\t\t\t<Text text=\"{i18n>detailLineItemTableUnitNumberColumn}\"/>\n\t\t\t\t\t</Column>\n\t\t\t\t</columns>\n\t\t\t\t<items>\n\t\t\t\t\t<ColumnListItem>\n\t\t\t\t\t\t<cells>\n\t\t\t\t\t\t\t<ObjectIdentifier title=\"{Datum}\" text=\"{Rapportid}\"/>\n\t\t\t\t\t\t\t<ObjectNumber/>\n\t\t\t\t\t\t</cells>\n\t\t\t\t\t</ColumnListItem>\n\t\t\t\t</items>\n\t\t\t</Table>\n\t\t</semantic:content>\n\n\t\t<semantic:sendEmailAction>\n\t\t\t<semantic:SendEmailAction id=\"shareEmail\" press=\"onShareEmailPress\"/>\n\t\t</semantic:sendEmailAction>\n\n\t<semantic:positiveAction>\n\n\t    <semantic:PositiveAction text=\"neuer Lotsenrapport\" id=\"__action3\" press=\"newRapport\"/>\n\n\t</semantic:positiveAction>\n\n\t</semantic:DetailPage>\n\n</mvc:View>",
		"ch/portof/view/ViewSettingsDialog.fragment.xml": "<core:FragmentDefinition\n\txmlns=\"sap.m\"\n\txmlns:core=\"sap.ui.core\">\n\n\t<ViewSettingsDialog\n\t\tid=\"viewSettingsDialog\"\n\t\tconfirm=\"onConfirmViewSettingsDialog\"\n\t\tresetFilters=\"onViewSettingsDialogResetFilters\">\n\t\t<filterItems>\n\t\t\t<ViewSettingsFilterItem\n\t\t\t\tid=\"filterItems\"\n\t\t\t\ttext=\"{i18n>masterFilterName}\"\n\t\t\t\tkey=\"Price\"\n\t\t\t\tmultiSelect=\"false\">\n\t\t\t\t<items>\n\t\t\t\t\t<ViewSettingsItem\n\t\t\t\t\t\ttext=\"{i18n>masterFilter1}\"\n\t\t\t\t\t\tkey=\"Filter1\"\n\t\t\t\t\t\tid=\"viewFilter1\"/>\n\t\t\t\t\t<ViewSettingsItem\n\t\t\t\t\t\ttext=\"{i18n>masterFilter2}\"\n\t\t\t\t\t\tkey=\"Filter2\"\n\t\t\t\t\t\tid=\"viewFilter2\"/>\n\t\t\t\t</items>\n\t\t\t</ViewSettingsFilterItem>\n\t\t</filterItems>\n\t</ViewSettingsDialog>\n\n</core:FragmentDefinition>",
		"ch/portof/view/DetailNoObjectsAvailable.view.xml": "<mvc:View\n\tcontrollerName=\"ch.portof.controller.BaseController\"\n\txmlns:mvc=\"sap.ui.core.mvc\"\n\txmlns=\"sap.m\">\n\n\t<MessagePage\n\t\tid=\"page\"\n\t\ttitle=\"{i18n>notAvailableViewTitle}\"\n\t\ttext=\"{i18n>noObjectsAvailableText}\"\n\t\ticon=\"{sap-icon://product}\"\n\t\tdescription=\"\"\n\t\tshowNavButton=\"{device>/system/phone}\"\n\t\tnavButtonPress=\"onNavBack\">\n\t</MessagePage>\n\n</mvc:View>",
		"ch/portof/view/NotFound.view.xml": "<mvc:View\n\tcontrollerName=\"ch.portof.controller.BaseController\"\n\txmlns:mvc=\"sap.ui.core.mvc\"\n\txmlns=\"sap.m\">\n\n\t<MessagePage\n\t\tid=\"page\"\n\t\ttitle=\"{i18n>notFoundTitle}\"\n\t\ttext=\"{i18n>notFoundText}\"\n\t\ticon=\"{sap-icon://document}\"\n\t\tdescription=\"\"\n\t\tshowNavButton=\"{device>/system/phone}\"\n\t\tnavButtonPress=\"onNavBack\">\n\t</MessagePage>\n\n</mvc:View>",
		"ch/portof/view/Master.view.xml": "<mvc:View\n\tcontrollerName=\"ch.portof.controller.Master\"\n\txmlns:mvc=\"sap.ui.core.mvc\"\n\txmlns:core=\"sap.ui.core\"\n\txmlns=\"sap.m\"\n\txmlns:semantic=\"sap.m.semantic\">\n\n\t<semantic:MasterPage\n\t\tid=\"page\"\n\t\ttitle=\"{masterView>/title}\"\n\t\tnavButtonPress=\"onNavBack\"\n\t\tshowNavButton=\"true\">\n\t\t<semantic:subHeader>\n\t\t\t<Bar id=\"headerBar\">\n\t\t\t\t<contentMiddle>\n\t\t\t\t\t<SearchField\n\t\t\t\t\t\tid=\"searchField\"\n\t\t\t\t\t\tshowRefreshButton=\"{= !${device>/support/touch} }\"\n\t\t\t\t\t\ttooltip=\"{i18n>masterSearchTooltip}\"\n\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t\tsearch=\"onSearch\">\n\t\t\t\t\t</SearchField>\n\t\t\t\t</contentMiddle>\n\t\t\t</Bar>\n\t\t</semantic:subHeader>\n\n\t\t<semantic:content>\n\t\t\t<PullToRefresh\n\t\t\t\tid=\"pullToRefresh\"\n\t\t\t\tvisible=\"{device>/support/touch}\"\n\t\t\t\trefresh=\"onRefresh\" />\n\t\t\t<!-- For client side filtering add this to the items attribute:  parameters: {operationMode: 'Client'}}\" -->\n\t\t\t<List\n\t\t\t\tid=\"list\"\n\t\t\t\titems=\"{\n\t\t\t\t\tpath: '/SchiffeSet',\n\t\t\t\t\tsorter: {\n\t\t\t\t\t\tpath: 'Name',\n\t\t\t\t\t\tdescending: false\n\t\t\t\t\t\t},\n\t\t\t\t\tgroupHeaderFactory: '.createGroupHeader'\n\t\t\t\t}\"\n\t\t\t\tbusyIndicatorDelay=\"{masterView>/delay}\"\n\t\t\t\tnoDataText=\"{masterView>/noDataText}\"\n\t\t\t\tmode=\"{= ${device>/system/phone} ? 'None' : 'SingleSelectMaster'}\"\n\t\t\t\tgrowing=\"true\"\n\t\t\t\tgrowingScrollToLoad=\"true\"\n\t\t\t\tupdateFinished=\"onUpdateFinished\"\n\t\t\t\tselectionChange=\"onSelectionChange\">\n\t\t\t\t<infoToolbar>\n\t\t\t\t\t<Toolbar\n\t\t\t\t\t\tactive=\"true\"\n\t\t\t\t\t\tid=\"filterBar\"\n\t\t\t\t\t\tvisible=\"{masterView>/isFilterBarVisible}\"\n\t\t\t\t\t\tpress=\"onOpenViewSettings\">\n\t\t\t\t\t\t<Title\n\t\t\t\t\t\t\tid=\"filterBarLabel\"\n\t\t\t\t\t\t\ttext=\"{masterView>/filterBarLabel}\" />\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</infoToolbar>\n\t\t\t\t<items>\n\t\t\t\t\t<ObjectListItem\n\t\t\t\t\t\ttype=\"{= ${device>/system/phone} ? 'Active' : 'Inactive'}\"\n\t\t\t\t\t\tpress=\"onSelectionChange\"\n\t\t\t\t\t\ttitle=\"{Name}\"\n>\n\t\t\t\t\t</ObjectListItem>\n\t\t\t\t</items>\n\t\t\t</List>\n\t\t</semantic:content>\n\n\t</semantic:MasterPage>\n\n</mvc:View>",
		"ch/portof/Component.js": "sap.ui.define([\n\t\t\"sap/ui/core/UIComponent\",\n\t\t\"sap/ui/Device\",\n\t\t\"ch/portof/model/models\",\n\t\t\"ch/portof/controller/ListSelector\",\n\t\t\"ch/portof/controller/ErrorHandler\"\n\t], function (UIComponent, Device, models, ListSelector, ErrorHandler) {\n\t\t\"use strict\";\n\n\t\treturn UIComponent.extend(\"ch.portof.Component\", {\n\n\t\t\tmetadata : {\n\t\t\t\tmanifest : \"json\"\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * The component is initialized by UI5 automatically during the startup of the app and calls the init method once.\n\t\t\t * In this method, the device models are set and the router is initialized.\n\t\t\t * @public\n\t\t\t * @override\n\t\t\t */\n\t\t\tinit : function () {\n\t\t\t\tthis.oListSelector = new ListSelector();\n\t\t\t\tthis._oErrorHandler = new ErrorHandler(this);\n\n\t\t\t\t// set the device model\n\t\t\t\tthis.setModel(models.createDeviceModel(), \"device\");\n\n\t\t\t\t// call the base component's init function and create the App view\n\t\t\t\tUIComponent.prototype.init.apply(this, arguments);\n\n\t\t\t\t// create the views based on the url/hash\n\t\t\t\tthis.getRouter().initialize();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * The component is destroyed by UI5 automatically.\n\t\t\t * In this method, the ListSelector and ErrorHandler are destroyed.\n\t\t\t * @public\n\t\t\t * @override\n\t\t\t */\n\t\t\tdestroy : function () {\n\t\t\t\tthis.oListSelector.destroy();\n\t\t\t\tthis._oErrorHandler.destroy();\n\t\t\t\t// call the base component's destroy function\n\t\t\t\tUIComponent.prototype.destroy.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * This method can be called to determine whether the sapUiSizeCompact or sapUiSizeCozy\n\t\t\t * design mode class should be set, which influences the size appearance of some controls.\n\t\t\t * @public\n\t\t\t * @return {string} css class, either 'sapUiSizeCompact' or 'sapUiSizeCozy' - or an empty string if no css class should be set\n\t\t\t */\n\t\t\tgetContentDensityClass : function() {\n\t\t\t\tif (this._sContentDensityClass === undefined) {\n\t\t\t\t\t// check whether FLP has already set the content density class; do nothing in this case\n\t\t\t\t\tif (jQuery(document.body).hasClass(\"sapUiSizeCozy\") || jQuery(document.body).hasClass(\"sapUiSizeCompact\")) {\n\t\t\t\t\t\tthis._sContentDensityClass = \"\";\n\t\t\t\t\t} else if (!Device.support.touch) { // apply \"compact\" mode if touch is not supported\n\t\t\t\t\t\tthis._sContentDensityClass = \"sapUiSizeCompact\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// \"cozy\" in case of touch support; default for most sap.m controls, but needed for desktop-first controls like sap.ui.table.Table\n\t\t\t\t\t\tthis._sContentDensityClass = \"sapUiSizeCozy\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this._sContentDensityClass;\n\t\t\t}\n\n\t\t});\n\n\t}\n);",
		"ch/portof/model/formatter.js": "sap.ui.define([\n\t], function () {\n\t\t\"use strict\";\n\n\t\treturn {\n\t\t\t/**\n\t\t\t * Rounds the currency value to 2 digits\n\t\t\t *\n\t\t\t * @public\n\t\t\t * @param {string} sValue value to be formatted\n\t\t\t * @returns {string} formatted currency value with 2 digits\n\t\t\t */\n\t\t\tcurrencyValue : function (sValue) {\n\t\t\t\tif (!sValue) {\n\t\t\t\t\treturn \"\";\n\t\t\t\t}\n\n\t\t\t\treturn parseFloat(sValue).toFixed(2);\n\t\t\t}\n\t\t};\n\n\t}\n);",
		"ch/portof/model/models.js": "sap.ui.define([\n\t\t\"sap/ui/model/json/JSONModel\",\n\t\t\"sap/ui/Device\"\n\t], function (JSONModel, Device) {\n\t\t\"use strict\";\n\n\t\treturn {\n\t\t\tcreateDeviceModel : function () {\n\t\t\t\tvar oModel = new JSONModel(Device);\n\t\t\t\toModel.setDefaultBindingMode(\"OneWay\");\n\t\t\t\treturn oModel;\n\t\t\t}\n\t\t};\n\n\t}\n);",
		"ch/portof/localService/mockserver.js": "sap.ui.define([\n\t\t\"sap/ui/core/util/MockServer\"\n\t], function (MockServer) {\n\t\t\"use strict\";\n\n\t\tvar oMockServer,\n\t\t\t_sAppModulePath = \"ch/portof/\",\n\t\t\t_sJsonFilesModulePath = _sAppModulePath + \"localService/mockdata\";\n\n\t\treturn {\n\t\t\t/**\n\t\t\t * Initializes the mock server.\n\t\t\t * You can configure the delay with the URL parameter \"serverDelay\".\n\t\t\t * The local mock data in this folder is returned instead of the real data for testing.\n\t\t\t * @public\n\t\t\t */\n\n\t\t\tinit : function () {\n\t\t\t\tvar oUriParameters = jQuery.sap.getUriParameters(),\n\t\t\t\t\tsJsonFilesUrl = jQuery.sap.getModulePath(_sJsonFilesModulePath),\n\t\t\t\t\tsManifestUrl = jQuery.sap.getModulePath(_sAppModulePath + \"manifest\", \".json\"),\n\t\t\t\t\tsEntity = \"SchiffeSet\",\n\t\t\t\t\tsErrorParam = oUriParameters.get(\"errorType\"),\n\t\t\t\t\tiErrorCode = sErrorParam === \"badRequest\" ? 400 : 500,\n\t\t\t\t\toManifest = jQuery.sap.syncGetJSON(sManifestUrl).data,\n\t\t\t\t\toMainDataSource = oManifest[\"sap.app\"].dataSources.mainService,\n\t\t\t\t\tsMetadataUrl = jQuery.sap.getModulePath(_sAppModulePath + oMainDataSource.settings.localUri.replace(\".xml\", \"\"), \".xml\"),\n\t\t\t\t\t// ensure there is a trailing slash\n\t\t\t\t\tsMockServerUrl = /.*\\/$/.test(oMainDataSource.uri) ? oMainDataSource.uri : oMainDataSource.uri + \"/\";\n\n\t\t\t\toMockServer = new MockServer({\n\t\t\t\t\trootUri : sMockServerUrl\n\t\t\t\t});\n\n\t\t\t\t// configure mock server with a delay of 1s\n\t\t\t\tMockServer.config({\n\t\t\t\t\tautoRespond : true,\n\t\t\t\t\tautoRespondAfter : (oUriParameters.get(\"serverDelay\") || 1000)\n\t\t\t\t});\n\n\t\t\t\toMockServer.simulate(sMetadataUrl, {\n\t\t\t\t\tsMockdataBaseUrl : sJsonFilesUrl,\n\t\t\t\t\tbGenerateMissingMockData : true\n\t\t\t\t});\n\n\t\t\t\tvar aRequests = oMockServer.getRequests(),\n\t\t\t\t\tfnResponse = function (iErrCode, sMessage, aRequest) {\n\t\t\t\t\t\taRequest.response = function(oXhr){\n\t\t\t\t\t\t\toXhr.respond(iErrCode, {\"Content-Type\": \"text/plain;charset=utf-8\"}, sMessage);\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\n\t\t\t\t// handling the metadata error test\n\t\t\t\tif (oUriParameters.get(\"metadataError\")) {\n\t\t\t\t\taRequests.forEach( function ( aEntry ) {\n\t\t\t\t\t\tif (aEntry.path.toString().indexOf(\"$metadata\") > -1) {\n\t\t\t\t\t\t\tfnResponse(500, \"metadata Error\", aEntry);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Handling request errors\n\t\t\t\tif (sErrorParam) {\n\t\t\t\t\taRequests.forEach( function ( aEntry ) {\n\t\t\t\t\t\tif (aEntry.path.toString().indexOf(sEntity) > -1) {\n\t\t\t\t\t\t\tfnResponse(iErrorCode, sErrorParam, aEntry);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\toMockServer.start();\n\n\t\t\t\tjQuery.sap.log.info(\"Running the app with mock data\");\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @public returns the mockserver of the app, should be used in integration tests\n\t\t\t * @returns {sap.ui.core.util.MockServer} the mockserver instance\n\t\t\t */\n\t\t\tgetMockServer : function () {\n\t\t\t\treturn oMockServer;\n\t\t\t}\n\t\t};\n\n\t}\n);",
		"ch/portof/controller/ErrorHandler.js": "sap.ui.define([\n\t\t\"sap/ui/base/Object\",\n\t\t\"sap/m/MessageBox\"\n\t], function (UI5Object, MessageBox) {\n\t\t\"use strict\";\n\n\t\treturn UI5Object.extend(\"ch.portof.controller.ErrorHandler\", {\n\n\t\t\t/**\n\t\t\t * Handles application errors by automatically attaching to the model events and displaying errors when needed.\n\t\t\t * @class\n\t\t\t * @param {sap.ui.core.UIComponent} oComponent reference to the app's component\n\t\t\t * @public\n\t\t\t * @alias ch.portof.controller.ErrorHandler\n\t\t\t */\n\t\t\tconstructor : function (oComponent) {\n\t\t\t\tthis._oResourceBundle = oComponent.getModel(\"i18n\").getResourceBundle();\n\t\t\t\tthis._oComponent = oComponent;\n\t\t\t\tthis._oModel = oComponent.getModel();\n\t\t\t\tthis._bMessageOpen = false;\n\t\t\t\tthis._sErrorText = this._oResourceBundle.getText(\"errorText\");\n\n\t\t\t\tthis._oModel.attachMetadataFailed(function (oEvent) {\n\t\t\t\t\tvar oParams = oEvent.getParameters();\n\t\t\t\t\tthis._showServiceError(oParams.response);\n\t\t\t\t}, this);\n\n\t\t\t\tthis._oModel.attachRequestFailed(function (oEvent) {\n\t\t\t\t\tvar oParams = oEvent.getParameters();\n\t\t\t\t\t// An entity that was not found in the service is also throwing a 404 error in oData.\n\t\t\t\t\t// We already cover this case with a notFound target so we skip it here.\n\t\t\t\t\t// A request that cannot be sent to the server is a technical error that we have to handle though\n\t\t\t\t\tif (oParams.response.statusCode !== \"404\" || (oParams.response.statusCode === 404 && oParams.response.responseText.indexOf(\"Cannot POST\") === 0)) {\n\t\t\t\t\t\tthis._showServiceError(oParams.response);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Shows a {@link sap.m.MessageBox} when a service call has failed.\n\t\t\t * Only the first error message will be display.\n\t\t\t * @param {string} sDetails a technical error to be displayed on request\n\t\t\t * @private\n\t\t\t */\n\t\t\t_showServiceError : function (sDetails) {\n\t\t\t\tif (this._bMessageOpen) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._bMessageOpen = true;\n\t\t\t\tMessageBox.error(\n\t\t\t\t\tthis._sErrorText,\n\t\t\t\t\t{\n\t\t\t\t\t\tid : \"serviceErrorMessageBox\",\n\t\t\t\t\t\tdetails : sDetails,\n\t\t\t\t\t\tstyleClass : this._oComponent.getContentDensityClass(),\n\t\t\t\t\t\tactions : [MessageBox.Action.CLOSE],\n\t\t\t\t\t\tonClose : function () {\n\t\t\t\t\t\t\tthis._bMessageOpen = false;\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t});\n\n\t}\n);",
		"ch/portof/controller/Rapport.controller.js": "sap.ui.define([\n\t//\t\"sap/ui/core/mvc/Controller\"\n\t\"ch/portof/controller/BaseController\",\n\t\"sap/ui/model/json/JSONModel\",\n\t\"ch/portof/model/formatter\" //\t], function(Controller) {\n], function(BaseController, JSONModel, formatter) {\n\t\"use strict\";\n\t//\treturn Controller.extend(\"ch.portof.controller.Rapport\", {\n\treturn BaseController.extend(\"ch.portof.controller.Rapport\", {\n\t\t/**\n\t\t * Called when a controller is instantiated and its View controls (if available) are already created.\n\t\t * Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.\n\t\t * @memberOf ch.portof.view.Rapport\n\t\t */\n\t\tonInit: function() {\n\t\t\tvar oViewModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0,\n\t\t\t\tinitSignature: false\n\t\t\t});\n\t\t\t//this.getRouter().getRoute(\"object\").attachPatternMatched(this._onObjectMatched, this);\n\n\t\t\t//this.getRouter().getRoute(\"rapport\").attachPatternMatched(this._onRouteMatched, this);\n\t\t\tthis.getRouter().getRoute(\"rapportNewRoute\").attachMatched(this._onRouteMatched, this);\n\t\t\t//this.getRouter().getRoute(\"object\").attachPatternMatched(this._onRouteMatched, this);\n\t\t\tthis.setModel(oViewModel, \"rapportView\");\n\t\t\tthis.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this));\n\t\t\tvar oTarifModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\tvar oSchiffModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0\n\t\t\t});\n\t\t\tthis.getView().byId(\"startDatePicker\").setDateValue(new Date());\n\t\t\tthis.getView().byId(\"startTimePicker\").setDateValue(new Date());\n\n\t\t\t// Signatur \n\t\t\tvar oSignatureModel = this._createSignatureModel();\n\t\t\t// oSignatureModel.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);\n\t\t\tthis.setModel(oSignatureModel, \"Signature\");\n\n\t\t},\n\t\t/**\n\t\t * If the master route was hit (empty hash) we have to set\n\t\t * the hash to to the first item in the list as soon as the\n\t\t * listLoading is done and the first item in the list is known\n\t\t * @private\n\t\t */\n\t\t_onRouteMatched: function(oEvent) {\n\t\t\t/*\t\t\tthis.getOwnerComponent().oListSelector.oWhenListLoadingIsDone.then(\n\t\t\t\tfunction(mParams) {\n\t\t\t\t\tif (mParams.list.getMode() === \"None\") {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar sObjectId = mParams.firstListitem.getBindingContext().getProperty(\"Schiffsnummer\");\n\t\t\t\t\tthis.getRouter().navTo(\"rapport\", {\n\t\t\t\t\t\tobjectId: sObjectId\n\t\t\t\t\t}, true);\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction(mParams) {\n\t\t\t\t\tif (mParams.error) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.getRouter().getTargets().display(\"detailNoObjectsAvailable\");\n\t\t\t\t}.bind(this)\n\t\t\t);*/\n\t\t\t/*\t\t\tvar oArgs, oView;\n\t\t\toArgs = oEvent.getParameter(\"arguments\");\n\t\t\toView = this.getView();\n\t\t\toView.bindElement({\n\t\t\t\tpath : \"/Schiffeset(\" + oArgs.objectId + \")\",\n\t\t\t\tevents : {\n\t\t\t\t\tchange: this._onBindingChange.bind(this),\n\t\t\t\t\tdataRequested: function (oEvent) {\n\t\t\t\t\t\toView.setBusy(true);\n\t\t\t\t\t},\n\t\t\t\t\tdataReceived: function (oEvent) {\n\t\t\t\t\t\toView.setBusy(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});*/\n\t\t\tvar sObjectId = oEvent.getParameter(\"arguments\").objectId;\n\t\t\tthis.getModel().metadataLoaded().then(function() {\n\t\t\t\tvar sObjectPath = this.getModel().createKey(\"SchiffeSet\", {\n\t\t\t\t\tSchiffsnummer: sObjectId\n\t\t\t\t});\n\t\t\t\tthis._bindView(\"/\" + sObjectPath);\n\n\t\t\t}.bind(this));\n\t\t\t/*\t\t\tvar sObjectPath = this.getModel().createKey(\"SchiffeSet\", {\n\t\t\t\t\t\t\t\tSchiffsnummer: sObjectId\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tthis._bindView(\"/\" + sObjectPath);*/\n\n\t\t},\n\t\t/*\t\t_onBindingChange: function(oEvent) {\n\t\t\t\t\t\t// No data for the binding\n\t\t\t\t\t\tif (!this.getView().getBindingContext()) {\n\t\t\t\t\t\t\tthis.getRouter().getTargets().display(\"notFound\");\n\t\t\t\t\t\t}\n\t\t\t\t\t},*/\n\t\t/**\n\t\t * Similar to onAfterRendering, but this hook is invoked before the controller's View is re-rendered\n\t\t * (NOT before the first rendering! onInit() is used for that one!).\n\t\t * @memberOf ch.portof.view.Rapport\n\t\t */\n\t\t//\tonBeforeRendering: function() {\n\t\t//\n\t\t//\t},\n\t\t/**\n\t\t * Called when the View has been rendered (so its HTML is part of the document). Post-rendering manipulations of the HTML could be done here.\n\t\t * This hook is the same one that SAPUI5 controls get after being rendered.\n\t\t * @memberOf ch.portof.view.Rapport\n\t\t */\n\t\tonAfterRendering: function() {\n\t\t\t// http://willowsystems.github.io/jSignature/#/about/\n\n\t\t\tvar oViewModel = this.getModel(\"rapportView\"); \n\t\t\tvar initSignature = oViewModel.getProperty(\"/initSignature\");\n\n\t\t\tif (initSignature === false) {\n\t\t\t\t//var elementExists = document.getElementById(\"#signature\");\n\t\t\t\t// if (elementExists === null) {\n\t\t\t\tvar oSignaturePanel = this.getView().byId(\"signaturePanel\");\n\t\t\t\tvar oSignatureDiv = new sap.ui.core.HTML(\"signature\", {\n\t\t\t\t\t// the static content as a long string literal\n\t\t\t\t\t// content: \"<div style='width: 480px; height: 128px; border: 1px solid black'></d/**/iv>\",\n\t\t\t\t\tcontent: \"<div style='width: 480px; height: 128px; border: 1px solid black'></div>\",\n\t\t\t\t\t// preferDOM : true,\n\t\t\t\t\tafterRendering: function(e) {\n\t\t\t\t\t\t// Init darf nur einmal aufgerufen\n\t\t\t\t\t\tif (this.init === true) {\n\t\t\t\t\t\t\t$(\"#signature\").jSignature(\"init\");\n\t\t\t\t\t\t\tthis.init = false;\n\t\t\t\t\t\t\t// $('#signature').jSignature({\n\t\t\t\t\t\t\t//     'signatureLine': false\n\t\t\t\t\t\t\t// });\t\t\t\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$(\"#signature\").jSignature(\"clear\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\toSignatureDiv.init = true;\n\n\t\t\t\tif (oSignaturePanel !== null) {\n\t\t\t\t\toSignatureDiv.placeAt(oSignaturePanel);\n\t\t\t\t}\n\t\t\t\toViewModel.setProperty(\"/initSignature\", true);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Called when the Controller is destroyed. Use this one to free resources and finalize activities.\n\t\t * @memberOf ch.portof.view.Rapport\n\t\t */\n\t\t//\tonExit: function() {\n\t\t//\n\t\t//\t}\t,\n\n\t\t/**\n\t\t * Binds the view to the object path. Makes sure that detail view displays\n\t\t * a busy indicator while data for the corresponding element binding is loaded.\n\t\t * @function\n\t\t * @param {string} sObjectPath path to the object to be bound to the view.\n\t\t * @private\n\t\t */\n\t\t_bindView: function(sObjectPath) {\n\t\t\t// Set busy indicator during view binding\n\t\t\tvar oViewModel = this.getModel(\"rapportView\");\n\t\t\t// If the view was not bound yet its not busy, only if the binding requests data it is set to busy again\n\t\t\toViewModel.setProperty(\"/busy\", false);\n\t\t\tthis.getView().bindElement({\n\t\t\t\tpath: sObjectPath,\n\t\t\t\tevents: {\n\t\t\t\t\tchange: this._onBindingChange.bind(this),\n\t\t\t\t\tdataRequested: function() {\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", true);\n\t\t\t\t\t},\n\t\t\t\t\tdataReceived: function() {\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t_onBindingChange: function() {\n\t\t\tvar oView = this.getView(),\n\t\t\t\toElementBinding = oView.getElementBinding();\n\t\t\t// No data for the binding\n\t\t\tif (!oElementBinding.getBoundContext()) {\n\t\t\t\tthis.getRouter().getTargets().display(\"detailObjectNotFound\");\n\t\t\t\t// if object could not be found, the selection in the master list\n\t\t\t\t// does not make sense anymore.\n\t\t\t\tthis.getOwnerComponent().oListSelector.clearMasterListSelection();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar sPath = oElementBinding.getPath(),\n\t\t\t\toResourceBundle = this.getResourceBundle(),\n\t\t\t\toObject = oView.getModel().getObject(sPath),\n\t\t\t\tsObjectId = oObject.Schiffsnummer,\n\t\t\t\tsObjectName = oObject.Name,\n\t\t\t\toViewModel = this.getModel(\"detailView\");\n\t\t\t//this.getOwnerComponent().oListSelector.selectAListItem(sPath);\n\t\t\t//oViewModel.setProperty(\"/shareSendEmailSubject\", oResourceBundle.getText(\"shareSendEmailObjectSubject\", [sObjectId]));\n\t\t\t/*oViewModel.setProperty(\"/shareSendEmailMessage\", oResourceBundle.getText(\"shareSendEmailObjectMessage\", [\n\t\t\t\tsObjectName,\n\t\t\t\tsObjectId,\n\t\t\t\tlocation.href\n\t\t\t]\n\t\t\t));*/\n\t\t},\n\t\t_onMetadataLoaded: function() {\n\t\t\t// Store original busy indicator delay for the detail view\n\t\t\tvar iOriginalViewBusyDelay = this.getView().getBusyIndicatorDelay(),\n\t\t\t\toViewModel = this.getModel(\"rapportView\");\n\t\t\t//,\n\t\t\t//oLineItemTable = this.byId(\"lineItemsList\"),\n\t\t\t//iOriginalLineItemTableBusyDelay = oLineItemTable.getBusyIndicatorDelay();\n\t\t\t// Make sure busy indicator is displayed immediately when\n\t\t\t// detail view is displayed for the first time\n\t\t\toViewModel.setProperty(\"/delay\", 0);\n\t\t\t//oViewModel.setProperty(\"/lineItemTableDelay\", 0);\n\t\t\t//oLineItemTable.attachEventOnce(\"updateFinished\", function() {\n\t\t\t// Restore original busy indicator delay for line item table\n\t\t\t//\toViewModel.setProperty(\"/lineItemTableDelay\", iOriginalLineItemTableBusyDelay);\n\t\t\t//});\n\t\t\t// Binding the view will set it to not busy - so the view is always busy if it is not bound\n\t\t\toViewModel.setProperty(\"/busy\", true);\n\t\t\t// Restore original busy indicator delay for the detail view\n\t\t\toViewModel.setProperty(\"/delay\", iOriginalViewBusyDelay);\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\tonCancel: function() {\n\t\t\t//This code was generated by the layout editor.\n\t\t\thistory.go(-1);\n\t\t\t\t// on Nav Back \n\t\t\tvar oHistory = sap.ui.core.routing.History.getInstance();\n\t\t\tif (oHistory.getPreviousHash())\n\t\t\t\twindow.history.go(-1);\n\t\t\telse\n\t\t\t\tthis._oRouter.myNavBack(\"master\", {});\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Rapport\n\t\t */\n\t\tonSave: function() {\n\t\t\t// This code was generated by the layout editor.\n\t\t\t// var oSignatureModel = this.getModel(\"Signature\");\n\n\t\t\t// \t\t\tvar oSignature = $('#signature');\n\t\t\t// if (oSignature) {\n\t\t\t// \tvar oSignatureBase30 = oSignature.jSignature('getData', 'base30');\n\t\t\t// \tif (oSignatureBase30) {\n\t\t\t// \t\tvar isSignatureProvided = oSignatureBase30[1].length > 1 ? true : false;\n\t\t\t// \t\tif (isSignatureProvided) {\n\t\t\t// \t\t\tvar sigImage = oSignature.jSignature(\"getData\", \"image\");\n\t\t\t// \t\t\tvar saveSignatureData = {\n\t\t\t// \t\t\t\t\"Aufnr\": aufnr\n\t\t\t// \t\t\t};\n\n\t\t\t// \t\t\tsaveSignatureData.SignatureMimetype = sigImage[0]; // 'image/png';\n\t\t\t// \t\t\tsaveSignatureData.SignatureImage = sigImage[1];\n\n\t\t\t// \t\t\t// Signature data in batch List\n\t\t\t// \t\t\t// batchChanges.push(model.createBatchOperation(\"/SignatureSet('\" + aufnr + \"')\", \"PUT\", saveSignatureData));\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// }\n\n\t\t},\n\t\tonSignatureReset: function() {\n\t\t\tvar oViewModel = this.getModel(\"rapportView\"); // Model Korrigieren\n\t\t\tvar initSignature = oViewModel.getProperty(\"/initSignature\");\n\t\t\tif (initSignature === true) {\n\t\t\t\t$(\"#signature\").jSignature(\"clear\");\n\t\t\t}\n\t\t},\n\t\t_createSignatureModel: function() {\n\t\t\treturn new JSONModel({\n\t\t\t\tisFilterBarVisible: false,\n\t\t\t\tfilterBarLabel: \"\",\n\t\t\t\tdelay: 0,\n\t\t\t\ttitle: this.getResourceBundle().getText(\"confirmationsTitleCount \", [0]),\n\t\t\t\tnoDataText: this.getResourceBundle().getText(\"confirmationsListNoDataText \")\n\t\t\t});\n\t\t}\n\t});\n});",
		"ch/portof/controller/Master.controller.js": "/*global history */\nsap.ui.define([\n\t\"ch/portof/controller/BaseController\",\n\t\"sap/ui/model/json/JSONModel\",\n\t\"sap/ui/model/Filter\",\n\t\"sap/ui/model/FilterOperator\",\n\t\"sap/m/GroupHeaderListItem\",\n\t\"sap/ui/Device\",\n\t\"ch/portof/model/formatter\"\n], function(BaseController, JSONModel, Filter, FilterOperator, GroupHeaderListItem, Device, formatter) {\n\t\"use strict\";\n\n\treturn BaseController.extend(\"ch.portof.controller.Master\", {\n\n\t\tformatter: formatter,\n\n\t\t/* =========================================================== */\n\t\t/* lifecycle methods                                           */\n\t\t/* =========================================================== */\n\n\t\t/**\n\t\t * Called when the master list controller is instantiated. It sets up the event handling for the master/detail communication and other lifecycle tasks.\n\t\t * @public\n\t\t */\n\t\tonInit: function() {\n\t\t\t// Control state model\n\t\t\tvar oList = this.byId(\"list\"),\n\t\t\t\toViewModel = this._createViewModel(),\n\t\t\t\t// Put down master list's original value for busy indicator delay,\n\t\t\t\t// so it can be restored later on. Busy handling on the master list is\n\t\t\t\t// taken care of by the master list itself.\n\t\t\t\tiOriginalBusyDelay = oList.getBusyIndicatorDelay();\n\n\t\t\tthis._oList = oList;\n\t\t\t// keeps the filter and search state\n\t\t\tthis._oListFilterState = {\n\t\t\t\taFilter: [],\n\t\t\t\taSearch: []\n\t\t\t};\n\n\t\t\tthis.setModel(oViewModel, \"masterView\");\n\t\t\t// Make sure, busy indication is showing immediately so there is no\n\t\t\t// break after the busy indication for loading the view's meta data is\n\t\t\t// ended (see promise 'oWhenMetadataIsLoaded' in AppController)\n\t\t\toList.attachEventOnce(\"updateFinished\", function() {\n\t\t\t\t// Restore original busy indicator delay for the list\n\t\t\t\toViewModel.setProperty(\"/delay\", iOriginalBusyDelay);\n\t\t\t});\n\n\t\t\tthis.getView().addEventDelegate({\n\t\t\t\tonBeforeFirstShow: function() {\n\t\t\t\t\tthis.getOwnerComponent().oListSelector.setBoundMasterList(oList);\n\t\t\t\t}.bind(this)\n\t\t\t});\n\n\t\t\tthis.getRouter().getRoute(\"master\").attachPatternMatched(this._onMasterMatched, this);\n\t\t\tthis.getRouter().attachBypassed(this.onBypassed, this);\n\t\t},\n\n\t\t/* =========================================================== */\n\t\t/* event handlers                                              */\n\t\t/* =========================================================== */\n\n\t\t/**\n\t\t * After list data is available, this handler method updates the\n\t\t * master list counter and hides the pull to refresh control, if\n\t\t * necessary.\n\t\t * @param {sap.ui.base.Event} oEvent the update finished event\n\t\t * @public\n\t\t */\n\t\tonUpdateFinished: function(oEvent) {\n\t\t\t// update the master list object counter after new data is loaded\n\t\t\tthis._updateListItemCount(oEvent.getParameter(\"total\"));\n\t\t\t// hide pull to refresh if necessary\n\t\t\tthis.byId(\"pullToRefresh\").hide();\n\t\t},\n\n\t\t/**\n\t\t * Event handler for the master search field. Applies current\n\t\t * filter value and triggers a new search. If the search field's\n\t\t * 'refresh' button has been pressed, no new search is triggered\n\t\t * and the list binding is refresh instead.\n\t\t * @param {sap.ui.base.Event} oEvent the search event\n\t\t * @public\n\t\t */\n\t\tonSearch: function(oEvent) {\n\t\t\tif (oEvent.getParameters().refreshButtonPressed) {\n\t\t\t\t// Search field's 'refresh' button has been pressed.\n\t\t\t\t// This is visible if you select any master list item.\n\t\t\t\t// In this case no new search is triggered, we only\n\t\t\t\t// refresh the list binding.\n\t\t\t\tthis.onRefresh();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar sQuery = oEvent.getParameter(\"query\");\n\n\t\t\tif (sQuery) {\n\t\t\t\tif (/^[a-zA-Z]+$/.test(sQuery)) {\n\t\t\t\t\tsQuery = sQuery.toUpperCase();\n\t\t\t\t\tthis._oListFilterState.aSearch = [new Filter(\"Name\", FilterOperator.Contains, sQuery)];\n\t\t\t\t} else {\n\t\t\t\t\tthis._oListFilterState.aSearch = [new Filter(\"Schiffsnummer\", FilterOperator.EQ, sQuery)];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._oListFilterState.aSearch = [];\n\t\t\t}\n\t\t\tthis._applyFilterSearch();\n\n\t\t},\n\n\t\t/**\n\t\t * Event handler for refresh event. Keeps filter, sortAnpassung schiffe\n\t\t * and group settings and refreshes the list binding.\n\t\t * @public\n\t\t */\n\t\tonRefresh: function() {\n\t\t\tthis._oList.getBinding(\"items\").refresh();\n\t\t},\n\n\t\t/**\n\t\t * Event handler for the list selection event\n\t\t * @param {sap.ui.base.Event} oEvent the list selectionChange event\n\t\t * @public\n\t\t */\n\t\tonSelectionChange: function(oEvent) {\n\t\t\t// get the list item, either from the listItem parameter or from the event's source itself (will depend on the device-dependent mode).\n\t\t\tthis._showDetail(oEvent.getParameter(\"listItem\") || oEvent.getSource());\n\t\t},\n\n\t\t/**\n\t\t * Event handler for the bypassed event, which is fired when no routing pattern matched.\n\t\t * If there was an object selected in the master list, that selection is removed.\n\t\t * @public\n\t\t */\n\t\tonBypassed: function() {\n\t\t\tthis._oList.removeSelections(true);\n\t\t},\n\n\t\t/**\n\t\t * Used to create GroupHeaders with non-capitalized caption.\n\t\t * These headers are inserted into the master list to\n\t\t * group the master list's items.\n\t\t * @param {Object} oGroup group whose text is to be displayed\n\t\t * @public\n\t\t * @returns {sap.m.GroupHeaderListItem} group header with non-capitalized caption.\n\t\t */\n\t\tcreateGroupHeader: function(oGroup) {\n\t\t\treturn new GroupHeaderListItem({\n\t\t\t\ttitle: oGroup.text,\n\t\t\t\tupperCase: false\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Event handler for navigating back.\n\t\t * We navigate back in the browser historz\n\t\t * @public\n\t\t */\n\t\tonNavBack: function() {\n\t\t\thistory.go(-1);\n\t\t},\n\n\t\t/* =========================================================== */\n\t\t/* begin: internal methods                                     */\n\t\t/* =========================================================== */\n\n\t\t_createViewModel: function() {\n\t\t\treturn new JSONModel({\n\t\t\t\tisFilterBarVisible: false,\n\t\t\t\tfilterBarLabel: \"\",\n\t\t\t\tdelay: 0,\n\t\t\t\ttitle: this.getResourceBundle().getText(\"masterTitleCount\", [0]),\n\t\t\t\tnoDataText: this.getResourceBundle().getText(\"masterListNoDataText\"),\n\t\t\t\tsortBy: \"Name\",\n\t\t\t\tgroupBy: \"None\"\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * If the master route was hit (empty hash) we have to set\n\t\t * the hash to to the first item in the list as soon as the\n\t\t * listLoading is done and the first item in the list is known\n\t\t * @private\n\t\t */\n\t\t_onMasterMatched: function() {\n\t\t\tthis.getOwnerComponent().oListSelector.oWhenListLoadingIsDone.then(\n\t\t\t\tfunction(mParams) {\n\t\t\t\t\tif (mParams.list.getMode() === \"None\") {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar sObjectId = mParams.firstListitem.getBindingContext().getProperty(\"Schiffsnummer\");\n\t\t\t\t\tthis.getRouter().navTo(\"object\", {\n\t\t\t\t\t\tobjectId: sObjectId\n\t\t\t\t\t}, true);\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction(mParams) {\n\t\t\t\t\tif (mParams.error) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.getRouter().getTargets().display(\"detailNoObjectsAvailable\");\n\t\t\t\t}.bind(this)\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Shows the selected item on the detail page\n\t\t * On phones a additional history entry is created\n\t\t * @param {sap.m.ObjectListItem} oItem selected Item\n\t\t * @private\n\t\t */\n\t\t_showDetail: function(oItem) {\n\t\t\tvar bReplace = !Device.system.phone;\n\t\t\tthis.getRouter().navTo(\"object\", {\n\t\t\t\tobjectId: oItem.getBindingContext().getProperty(\"Schiffsnummer\")\n\t\t\t}, bReplace);\n\t\t},\n\n\t\t/**\n\t\t * Sets the item count on the master list header\n\t\t * @param {integer} iTotalItems the total number of items in the list\n\t\t * @private\n\t\t */\n\t\t_updateListItemCount: function(iTotalItems) {\n\t\t\tvar sTitle;\n\t\t\t// only update the counter if the length is final\n\t\t\tif (this._oList.getBinding(\"items\").isLengthFinal()) {\n\t\t\t\tsTitle = this.getResourceBundle().getText(\"masterTitleCount\", [iTotalItems]);\n\t\t\t\tthis.getModel(\"masterView\").setProperty(\"/title\", sTitle);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Internal helper method to apply both filter and search state together on the list binding\n\t\t * @private\n\t\t */\n\t\t_applyFilterSearch: function() {\n\t\t\tvar aFilters = this._oListFilterState.aSearch.concat(this._oListFilterState.aFilter),\n\t\t\t\toViewModel = this.getModel(\"masterView\");\n\t\t\tthis._oList.getBinding(\"items\").filter(aFilters, \"Application\");\n\t\t\t// changes the noDataText of the list in case there are no filter results\n\t\t\tif (aFilters.length !== 0) {\n\t\t\t\toViewModel.setProperty(\"/noDataText\", this.getResourceBundle().getText(\"masterListNoDataWithFilterOrSearchText\"));\n\t\t\t} else if (this._oListFilterState.aSearch.length > 0) {\n\t\t\t\t// only reset the no data text to default when no new search was triggered\n\t\t\t\toViewModel.setProperty(\"/noDataText\", this.getResourceBundle().getText(\"masterListNoDataText\"));\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Internal helper method to apply both group and sort state together on the list binding\n\t\t * @param {sap.ui.model.Sorter[]} aSorters an array of sorters\n\t\t * @private\n\t\t */\n\t\t_applyGroupSort: function(aSorters) {\n\t\t\tthis._oList.getBinding(\"items\").sort(aSorters);\n\t\t},\n\n\t\t/**\n\t\t * Internal helper method that sets the filter bar visibility property and the label's caption to be shown\n\t\t * @param {string} sFilterBarText the selected filter value\n\t\t * @private\n\t\t */\n\t\t_updateFilterBar: function(sFilterBarText) {\n\t\t\tvar oViewModel = this.getModel(\"masterView\");\n\t\t\toViewModel.setProperty(\"/isFilterBarVisible\", (this._oListFilterState.aFilter.length > 0));\n\t\t\toViewModel.setProperty(\"/filterBarLabel\", this.getResourceBundle().getText(\"masterFilterBarText\", [sFilterBarText]));\n\t\t}\n\n\t});\n\n});",
		"ch/portof/controller/Detail.controller.js": "/*global location */\nsap.ui.define([\n\t\"ch/portof/controller/BaseController\",\n\t\"sap/ui/model/json/JSONModel\",\n\t\"ch/portof/model/formatter\"\n], function(BaseController, JSONModel, formatter) {\n\t\"use strict\";\n\treturn BaseController.extend(\"ch.portof.controller.Detail\", {\n\t\tformatter: formatter,\n\t\t/* =========================================================== */\n\t\t/* lifecycle methods                                           */\n\t\t/* =========================================================== */\n\t\tonInit: function() {\n\t\t\t// Model used to manipulate control states. The chosen values make sure,\n\t\t\t// detail page is busy indication immediately so there is no break in\n\t\t\t// between the busy indication for loading the view's meta data\n\t\t\tvar oViewModel = new JSONModel({\n\t\t\t\tbusy: false,\n\t\t\t\tdelay: 0,\n\t\t\t\tlineItemListTitle: this.getResourceBundle().getText(\"detailLineItemTableHeading\")\n\t\t\t});\n\t\t\tthis.getRouter().getRoute(\"object\").attachPatternMatched(this._onObjectMatched, this);\n\t\t\tthis.setModel(oViewModel, \"detailView\");\n\t\t\tthis.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this));\n\t\t\t/*\t\t\tvar oModelTest = this.getView().getModel();\n\t\t\t\t\tvar title = this.byId(\"debitorHeader1\").getProperty(\"title\");\n\t\t\t\t\tif (title) {\n\t\t\t\t\ttitle = title + \"1\";\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttitle = \"hui\";\n\t\t\t\t\t}\n\t\t\t\t\t console.log( oModelTest.getProperty(\"Name\") );\n\t\t\t\t\t\t\tthis.byId(\"debitorHeader1\").setProperty(\"title\", title );\n\t\t\t\t\t\tthis.byId(\"debitorHeader1\").setProperty(\"intro\", oModelTest.getProperty(\"Name1\"));*/\n\t\t\t//this.byId(\"debitorHeader1\").setProperty( \"titel\" , \"test\");\n\t\t\t//var testvar = this.getModel(\"detailView\").getProperty(\"{SchiffeSet/Name}\");\n\t\t\t//var testvar = this.getModel(\"SchiffeSet\").getProperty(\"Name\");\n\t\t\t//this.byId(\"debitorHeader1\").setProperty(\"title\", testvar); \n\t\t\t//var oModelNew = new sap.ui.model.odata.v2.ODataModel( this.getModel(\"detailView\").getProperty(\"/Debitoren\") );\n\t\t\t//oModelNew.getProperty(\"Name1\");\n\t\t\t//sap.ui.getCore().byId(\"debitorHeader1\").setProperty( \"titel\" , \"test\");\n\t\t\t//this.byId(\"debitorHeader1\").setProperty( \"title\" , oModelNew.getProperty(\"Name1\") );\n\t\t\t//this.byId(\"debitorHeader1\").setProperty( \"title\" , \"test\" );\n\t\t},\n\t\t/* =========================================================== */\n\t\t/* event handlers                                              */\n\t\t/* =========================================================== */\n\t\t/**\n\t\t * Event handler when the share by E-Mail button has been clicked\n\t\t * @public\n\t\t */\n\t\tonShareEmailPress: function() {\n\t\t\tvar oViewModel = this.getModel(\"detailView\");\n\t\t\tsap.m.URLHelper.triggerEmail(null, oViewModel.getProperty(\"/shareSendEmailSubject\"), oViewModel.getProperty(\n\t\t\t\t\"/shareSendEmailMessage\"));\n\t\t},\n\t\t/**\n\t\t * Updates the item count within the line item table's header\n\t\t * @param {object} oEvent an event containing the total number of items in the list\n\t\t * @private\n\t\t */\n\t\tonListUpdateFinished: function(oEvent) {\n\t\t\tvar sTitle, iTotalItems = oEvent.getParameter(\"total\"),\n\t\t\t\toViewModel = this.getModel(\"detailView\");\n\t\t\t// only update the counter if the length is final\n\t\t\tif (this.byId(\"lineItemsList\").getBinding(\"items\").isLengthFinal()) {\n\t\t\t\tif (iTotalItems) {\n\t\t\t\t\tsTitle = this.getResourceBundle().getText(\"detailLineItemTableHeadingCount\", [iTotalItems]);\n\t\t\t\t} else {\n\t\t\t\t\t//Display 'Line Items' instead of 'Line items (0)'\n\t\t\t\t\tsTitle = this.getResourceBundle().getText(\"detailLineItemTableHeading\");\n\t\t\t\t}\n\t\t\t\toViewModel.setProperty(\"/lineItemListTitle\", sTitle);\n\t\t\t}\n\t\t},\n\t\t/* =========================================================== */\n\t\t/* begin: internal methods                                     */\n\t\t/* =========================================================== */\n\t\t/**\n\t\t * Binds the view to the object path and expands the aggregated line items.\n\t\t * @function\n\t\t * @param {sap.ui.base.Event} oEvent pattern match event in route 'object'\n\t\t * @private\n\t\t */\n\t\t_onObjectMatched: function(oEvent) {\n\t\t\tvar sObjectId = oEvent.getParameter(\"arguments\").objectId;\n\t\t\tthis.getModel().metadataLoaded().then(function() {\n\t\t\t\tvar sObjectPath = this.getModel().createKey(\"SchiffeSet\", {\n\t\t\t\t\tSchiffsnummer: sObjectId\n\t\t\t\t});\n\t\t\t\tthis._bindView(\"/\" + sObjectPath);\n\t\t\t}.bind(this));\n\t\t},\n\t\t/**\n\t\t * Binds the view to the object path. Makes sure that detail view displays\n\t\t * a busy indicator while data for the corresponding element binding is loaded.\n\t\t * @function\n\t\t * @param {string} sObjectPath path to the object to be bound to the view.\n\t\t * @private\n\t\t */\n\t\t_bindView: function(sObjectPath) {\n\t\t\t// Set busy indicator during view binding\n\t\t\tvar oViewModel = this.getModel(\"detailView\");\n\t\t\t// If the view was not bound yet its not busy, only if the binding requests data it is set to busy again\n\t\t\toViewModel.setProperty(\"/busy\", false);\n\t\t\tthis.getView().bindElement({\n\t\t\t\tpath: sObjectPath,\n\t\t\t\tevents: {\n\t\t\t\t\tchange: this._onBindingChange.bind(this),\n\t\t\t\t\tdataRequested: function() {\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", true);\n\t\t\t\t\t},\n\t\t\t\t\tdataReceived: function() {\n\t\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t_onBindingChange: function() {\n\t\t\tvar oView = this.getView(),\n\t\t\t\toElementBinding = oView.getElementBinding();\n\t\t\t// No data for the binding\n\t\t\tif (!oElementBinding.getBoundContext()) {\n\t\t\t\tthis.getRouter().getTargets().display(\"detailObjectNotFound\");\n\t\t\t\t// if object could not be found, the selection in the master list\n\t\t\t\t// does not make sense anymore.\n\t\t\t\tthis.getOwnerComponent().oListSelector.clearMasterListSelection();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar sPath = oElementBinding.getPath(),\n\t\t\t\toResourceBundle = this.getResourceBundle(),\n\t\t\t\toObject = oView.getModel().getObject(sPath),\n\t\t\t\tsObjectId = oObject.Schiffsnummer,\n\t\t\t\tsObjectName = oObject.Name,\n\t\t\t\toViewModel = this.getModel(\"detailView\");\n\t\t\tthis.getOwnerComponent().oListSelector.selectAListItem(sPath);\n\t\t\toViewModel.setProperty(\"/shareSendEmailSubject\", oResourceBundle.getText(\"shareSendEmailObjectSubject\", [sObjectId]));\n\t\t\toViewModel.setProperty(\"/shareSendEmailMessage\", oResourceBundle.getText(\"shareSendEmailObjectMessage\", [\n\t\t\t\tsObjectName,\n\t\t\t\tsObjectId,\n\t\t\t\tlocation.href\n\t\t\t]));\n\t\t\t//var oModelNew = new sap.ui.model.odata.v2.ODataModel( this.getModel(\"detailView\").getProperty(\"/Debitoren\") );\n\t\t\t//oModelNew.getProperty(\"Name1\");\n\t\t\t//\tsap.ui.getCore().byId(\"debitorHeader1\").setProperty( \"titel\" , \"test\");\n\t\t\t//\tthis.byId(\"debitorHeader1\").setProperty( \"titel\" , \"test\");\n\t\t\t///var oModelTest = this.getView().getModel();\n\t\t\t///var sPath = this.getView().byId(\"__attribute3\").getBindingContext()[\"sPath\"];\n\t\t\t///oModelTest.read(sPath); //console.log( oModelTest.getProperty(\"Name\") );\n\t\t\t/*var title = this.byId(\"debitorHeader1\").getProperty(\"title\");\n\t\t\tif (title) {\n\t\t\ttitle = title + \"1\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttitle = \"hui\";\n\t\t\t}\n\t\t\t console.log( oModelTest.getProperty(\"Name\") );\n\t\t\t\t\tthis.byId(\"debitorHeader1\").setProperty(\"title\", title );\n\t\t\t\tthis.byId(\"debitorHeader1\").setProperty(\"intro\", oModelTest.getProperty(\"Name1\"));*/\n\t\t},\n\t\t_onMetadataLoaded: function() {\n\t\t\t// Store original busy indicator delay for the detail view\n\t\t\tvar iOriginalViewBusyDelay = this.getView().getBusyIndicatorDelay(),\n\t\t\t\toViewModel = this.getModel(\"detailView\"),\n\t\t\t\toLineItemTable = this.byId(\"lineItemsList\"),\n\t\t\t\tiOriginalLineItemTableBusyDelay = oLineItemTable.getBusyIndicatorDelay();\n\t\t\t// Make sure busy indicator is displayed immediately when\n\t\t\t// detail view is displayed for the first time\n\t\t\toViewModel.setProperty(\"/delay\", 0);\n\t\t\toViewModel.setProperty(\"/lineItemTableDelay\", 0);\n\t\t\toLineItemTable.attachEventOnce(\"updateFinished\", function() {\n\t\t\t\t// Restore original busy indicator delay for line item table\n\t\t\t\toViewModel.setProperty(\"/lineItemTableDelay\", iOriginalLineItemTableBusyDelay);\n\t\t\t});\n\t\t\t// Binding the view will set it to not busy - so the view is always busy if it is not bound\n\t\t\toViewModel.setProperty(\"/busy\", true);\n\t\t\t// Restore original busy indicator delay for the detail view\n\t\t\toViewModel.setProperty(\"/delay\", iOriginalViewBusyDelay);\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Detail\n\t\t */\n\t\ttestEvent: function() {\n\t\t\t//This code was generated by the layout editor.\n\t\t\tthis.byId(\"debitorHeader1\").setProperty(\"title\", \"afterInit\");\n\t\t},\n\t\t/**\n\t\t *@memberOf ch.portof.controller.Detail\n\t\t */\n\t\tnewRapport: function() {\n\t\t\t//This code was generated by the layout editor.\n\n\t\t\t//this.getRouter().navTo(\"rapport\");\n\t\t\t//\t\t\t\t\t\t\tthis.getRouter().getTargets().display(\"detailNoObjectsAvailable\");\n\n\t\t\t// this.getRouter().getTargets().display(\"rapportTarget\");\n\t\t\t//var bReplace = !Device.system.phone;\n\t\t\tthis.getRouter().navTo(\"rapportNewRoute\", {\n\t\t\t\tobjectId: this.getView().getBindingContext().getProperty(\"Schiffsnummer\")\n\t\t\t}, true);\n\t\t\t//this.getRouter().navTo(\"rapport\");\n\n\t\t}\n\t});\n});",
		"ch/portof/controller/ListSelector.js": "sap.ui.define([\n\t\t\"sap/ui/base/Object\"\n\t], function (BaseObject) {\n\t\t\"use strict\";\n\n\t\treturn BaseObject.extend(\"ch.portof.model.ListSelector\", {\n\n\t\t\t/**\n\t\t\t * Provides a convenience API for selecting list items. All the functions will wait until the initial load of the a List passed to the instance by the setBoundMasterList\n\t\t\t * function.\n\t\t\t * @class\n\t\t\t * @public\n\t\t\t * @alias ch.portof.model.ListSelector\n\t\t\t */\n\n\t\t\tconstructor : function () {\n\t\t\t\tthis._oWhenListHasBeenSet = new Promise(function (fnResolveListHasBeenSet) {\n\t\t\t\t\tthis._fnResolveListHasBeenSet = fnResolveListHasBeenSet;\n\t\t\t\t}.bind(this));\n\t\t\t\t// This promise needs to be created in the constructor, since it is allowed to\n\t\t\t\t// invoke selectItem functions before calling setBoundMasterList\n\t\t\t\tthis.oWhenListLoadingIsDone = new Promise(function (fnResolve, fnReject) {\n\t\t\t\t\t// Used to wait until the setBound masterList function is invoked\n\t\t\t\t\tthis._oWhenListHasBeenSet\n\t\t\t\t\t\t.then(function (oList) {\n\t\t\t\t\t\t\toList.getBinding(\"items\").attachEventOnce(\"dataReceived\",\n\t\t\t\t\t\t\t\tfunction (oData) {\n\t\t\t\t\t\t\t\t\tif (!oData.getParameter(\"data\")) {\n\t\t\t\t\t\t\t\t\t\tfnReject({\n\t\t\t\t\t\t\t\t\t\t\tlist : oList,\n\t\t\t\t\t\t\t\t\t\t\terror : true\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar oFirstListItem = oList.getItems()[0];\n\t\t\t\t\t\t\t\t\tif (oFirstListItem) {\n\t\t\t\t\t\t\t\t\t\t// Have to make sure that first list Item is selected\n\t\t\t\t\t\t\t\t\t\t// and a select event is triggered. Like that, the corresponding\n\t\t\t\t\t\t\t\t\t\t// detail page is loaded automatically\n\t\t\t\t\t\t\t\t\t\tfnResolve({\n\t\t\t\t\t\t\t\t\t\t\tlist : oList,\n\t\t\t\t\t\t\t\t\t\t\tfirstListitem : oFirstListItem\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// No items in the list\n\t\t\t\t\t\t\t\t\t\tfnReject({\n\t\t\t\t\t\t\t\t\t\t\tlist : oList,\n\t\t\t\t\t\t\t\t\t\t\terror : false\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t}.bind(this));\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * A bound list should be passed in here. Should be done, before the list has received its initial data from the server.\n\t\t\t * May only be invoked once per ListSelector instance.\n\t\t\t * @param {sap.m.List} oList The list all the select functions will be invoked on.\n\t\t\t * @public\n\t\t\t */\n\t\t\tsetBoundMasterList : function (oList) {\n\t\t\t\tthis._oList = oList;\n\t\t\t\tthis._fnResolveListHasBeenSet(oList);\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * Tries to select and scroll to a list item with a matching binding context. If there are no items matching the binding context or the ListMode is none,\n\t\t\t * no selection/scrolling will happen\n\t\t\t * @param {string} sBindingPath the binding path matching the binding path of a list item\n\t\t\t * @public\n\t\t\t */\n\t\t\tselectAListItem : function (sBindingPath) {\n\n\t\t\t\tthis.oWhenListLoadingIsDone.then(\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\tvar oList = this._oList,\n\t\t\t\t\t\t\toSelectedItem;\n\n\t\t\t\t\t\tif (oList.getMode() === \"None\") {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toSelectedItem = oList.getSelectedItem();\n\n\t\t\t\t\t\t// skip update if the current selection is already matching the object path\n\t\t\t\t\t\tif (oSelectedItem && oSelectedItem.getBindingContext().getPath() === sBindingPath) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toList.getItems().some(function (oItem) {\n\t\t\t\t\t\t\tif (oItem.getBindingContext() && oItem.getBindingContext().getPath() === sBindingPath) {\n\t\t\t\t\t\t\t\toList.setSelectedItem(oItem);\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\tjQuery.sap.log.warning(\"Could not select the list item with the path\" + sBindingPath + \" because the list encountered an error or had no items\");\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\n\n\t\t\t/* =========================================================== */\n\t\t\t/* Convenience Functions for List Selection Change Event       */\n\t\t\t/* =========================================================== */\n\n\t\t\t/**\n\t\t\t * Attaches a listener and listener function to the ListSelector's bound master list. By using\n\t\t\t * a promise, the listener is added, even if the list is not available when 'attachListSelectionChange'\n\t\t\t * is called.\n\t\t\t * @param {function} fnFunction the function to be executed when the list fires a selection change event\n\t\t\t * @param {function} oListener the listener object\n\t\t\t * @return {ch.portof.model.ListSelector} the list selector object for method chaining\n\t\t\t * @public\n\t\t\t */\n\t\t\tattachListSelectionChange : function (fnFunction, oListener) {\n\t\t\t\tthis._oWhenListHasBeenSet.then(function () {\n\t\t\t\t\tthis._oList.attachSelectionChange(fnFunction, oListener);\n\t\t\t\t}.bind(this));\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Detaches a listener and listener function from the ListSelector's bound master list. By using\n\t\t\t * a promise, the listener is removed, even if the list is not available when 'detachListSelectionChange'\n\t\t\t * is called.\n\t\t\t * @param {function} fnFunction the function to be executed when the list fires a selection change event\n\t\t\t * @param {function} oListener the listener object\n\t\t\t * @return {ch.portof.model.ListSelector} the list selector object for method chaining\n\t\t\t * @public\n\t\t\t */\n\t\t\tdetachListSelectionChange : function (fnFunction, oListener) {\n\t\t\t\tthis._oWhenListHasBeenSet.then(function () {\n\t\t\t\t\tthis._oList.detachSelectionChange(fnFunction, oListener);\n\t\t\t\t}.bind(this));\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Removes all selections from master list.\n\t\t\t * Does not trigger 'selectionChange' event on master list, though.\n\t\t\t * @public\n\t\t\t */\n\t\t\tclearMasterListSelection : function () {\n\t\t\t\t//use promise to make sure that 'this._oList' is available\n\t\t\t\tthis._oWhenListHasBeenSet.then(function () {\n\t\t\t\t\tthis._oList.removeSelections(true);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\n\t\t});\n\n\t}\n);",
		"ch/portof/controller/App.controller.js": "sap.ui.define([\n\t\t\"ch/portof/controller/BaseController\",\n\t\t\"sap/ui/model/json/JSONModel\"\n\t], function (BaseController, JSONModel) {\n\t\t\"use strict\";\n\n\t\treturn BaseController.extend(\"ch.portof.controller.App\", {\n\n\t\t\tonInit : function () {\n\t\t\t\tvar oViewModel,\n\t\t\t\t\tfnSetAppNotBusy,\n\t\t\t\t\toListSelector = this.getOwnerComponent().oListSelector,\n\t\t\t\t\tiOriginalBusyDelay = this.getView().getBusyIndicatorDelay();\n\n\t\t\t\toViewModel = new JSONModel({\n\t\t\t\t\tbusy : true,\n\t\t\t\t\tdelay : 0\n\t\t\t\t});\n\t\t\t\tthis.setModel(oViewModel, \"appView\");\n\n\t\t\t\tfnSetAppNotBusy = function() {\n\t\t\t\t\toViewModel.setProperty(\"/busy\", false);\n\t\t\t\t\toViewModel.setProperty(\"/delay\", iOriginalBusyDelay);\n\t\t\t\t};\n\n\t\t\t\tthis.getOwnerComponent().getModel().metadataLoaded()\n\t\t\t\t\t\t.then(fnSetAppNotBusy);\n\n\t\t\t\t// Makes sure that master view is hidden in split app\n\t\t\t\t// after a new list entry has been selected.\n\t\t\t\toListSelector.attachListSelectionChange(function () {\n\t\t\t\t\tthis.byId(\"idAppControl\").hideMaster();\n\t\t\t\t}, this);\n\n\t\t\t\t// apply content density mode to root view\n\t\t\t\tthis.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());\n\t\t\t}\n\n\t\t});\n\n\t}\n);",
		"ch/portof/controller/BaseController.js": "/*global history */\nsap.ui.define([\n\t\t\"sap/ui/core/mvc/Controller\",\n\t\t\"sap/ui/core/routing/History\"\n\t], function (Controller, History) {\n\t\t\"use strict\";\n\n\t\treturn Controller.extend(\"ch.portof.controller.BaseController\", {\n\t\t\t/**\n\t\t\t * Convenience method for accessing the router in every controller of the application.\n\t\t\t * @public\n\t\t\t * @returns {sap.ui.core.routing.Router} the router for this component\n\t\t\t */\n\t\t\tgetRouter : function () {\n\t\t\t\treturn this.getOwnerComponent().getRouter();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Convenience method for getting the view model by name in every controller of the application.\n\t\t\t * @public\n\t\t\t * @param {string} sName the model name\n\t\t\t * @returns {sap.ui.model.Model} the model instance\n\t\t\t */\n\t\t\tgetModel : function (sName) {\n\t\t\t\treturn this.getView().getModel(sName);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Convenience method for setting the view model in every controller of the application.\n\t\t\t * @public\n\t\t\t * @param {sap.ui.model.Model} oModel the model instance\n\t\t\t * @param {string} sName the model name\n\t\t\t * @returns {sap.ui.mvc.View} the view instance\n\t\t\t */\n\t\t\tsetModel : function (oModel, sName) {\n\t\t\t\treturn this.getView().setModel(oModel, sName);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Convenience method for getting the resource bundle.\n\t\t\t * @public\n\t\t\t * @returns {sap.ui.model.resource.ResourceModel} the resourceModel of the component\n\t\t\t */\n\t\t\tgetResourceBundle : function () {\n\t\t\t\treturn this.getOwnerComponent().getModel(\"i18n\").getResourceBundle();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event handler for navigating back.\n\t\t\t * It there is a history entry we go one step back in the browser history\n\t\t\t * If not, it will replace the current entry of the browser history with the master route.\n\t\t\t * @public\n\t\t\t */\n\t\t\tonNavBack : function() {\n\t\t\t\tvar sPreviousHash = History.getInstance().getPreviousHash();\n\n\t\t\t\t\tif (sPreviousHash !== undefined) {\n\t\t\t\t\thistory.go(-1);\n\t\t\t\t} else {\n\t\t\t\t\tthis.getRouter().navTo(\"master\", {}, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t}\n);",
		"ch/portof/libs/jSignature.min.js": "/*\r\n \r\njSignature v2 \"2012-11-01T22:48\" \"commit ID 1c15dfafecc75925c3b7d529356a558b59220edb\"\r\nCopyright (c) 2012 Willow Systems Corp http://willow-systems.com\r\nCopyright (c) 2010 Brinley Ang http://www.unbolt.net\r\nMIT License <http://www.opensource.org/licenses/mit-license.php> \r\n\r\n\r\nSimplify.js BSD \r\n(c) 2012, Vladimir Agafonkin\r\nmourner.github.com/simplify-js\r\n\r\n\r\nbase64 encoder\r\nMIT, GPL\r\nhttp://phpjs.org/functions/base64_encode\r\n+   original by: Tyler Akins (http://rumkin.com)\r\n+   improved by: Bayron Guevara\r\n+   improved by: Thunder.m\r\n+   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n+   bugfixed by: Pellentesque Malesuada\r\n+   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n+   improved by: Rafal Kukawski (http://kukawski.pl)\r\n\r\n\r\njSignature v2 jSignature's Undo Button and undo functionality plugin\r\n\r\n\r\njSignature v2 jSignature's custom \"base30\" format export and import plugins.\r\n\r\n\r\njSignature v2 SVG export plugin.\r\n\r\n*/\r\n(function(){function q(b){for(var j,s=b.css(\"color\"),g,b=b[0],c=!1;b&&!g&&!c;){try{j=$(b).css(\"background-color\")}catch(d){j=\"transparent\"}\"transparent\"!==j&&\"rgba(0, 0, 0, 0)\"!==j&&(g=j);c=b.body;b=b.parentNode}var b=/rgb[a]*\\((\\d+),\\s*(\\d+),\\s*(\\d+)/,c=/#([AaBbCcDdEeFf\\d]{2})([AaBbCcDdEeFf\\d]{2})([AaBbCcDdEeFf\\d]{2})/,a;j=void 0;(j=s.match(b))?a={r:parseInt(j[1],10),g:parseInt(j[2],10),b:parseInt(j[3],10)}:(j=s.match(c))&&(a={r:parseInt(j[1],16),g:parseInt(j[2],16),b:parseInt(j[3],16)});var f;g?\r\n(j=void 0,(j=g.match(b))?f={r:parseInt(j[1],10),g:parseInt(j[2],10),b:parseInt(j[3],10)}:(j=g.match(c))&&(f={r:parseInt(j[1],16),g:parseInt(j[2],16),b:parseInt(j[3],16)})):f=a?127<Math.max.apply(null,[a.r,a.g,a.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255}:{r:255,g:255,b:255};j=function(b){return\"rgb(\"+[b.r,b.g,b.b].join(\", \")+\")\"};a&&f?(b=Math.max.apply(null,[a.r,a.g,a.b]),a=Math.max.apply(null,[f.r,f.g,f.b]),a=Math.round(a+-0.75*(a-b)),a={r:a,g:a,b:a}):a?(a=Math.max.apply(null,[a.r,a.g,a.b]),b=1,127<a&&\r\n(b=-1),a=Math.round(a+96*b),a={r:a,g:a,b:a}):a={r:191,g:191,b:191};return{color:s,\"background-color\":f?j(f):g,\"decor-color\":j(a)}}function m(b,j){this.x=b;this.y=j;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var s=function(b){return Math.round(b/Math.abs(b))};this.resizeTo=function(b){if(0===this.x&&0===this.y)this._length=0;else if(0===\r\nthis.x)this._length=b,this.y=b*s(this.y);else if(0===this.y)this._length=b,this.x=b*s(this.x);else{var j=Math.abs(this.y/this.x),a=Math.sqrt(Math.pow(b,2)/(1+Math.pow(j,2))),j=j*a;this._length=b;this.x=a*s(this.x);this.y=j*s(this.y)}return this};this.angleTo=function(b){var j=this.getLength()*b.getLength();return 0===j?0:Math.acos(Math.min(Math.max((this.x*b.x+this.y*b.y)/j,-1),1))/Math.PI}}function k(b,j){this.x=b;this.y=j;this.getVectorToCoordinates=function(b,j){return new m(b-this.x,j-this.y)};\r\nthis.getVectorFromCoordinates=function(b,j){return this.getVectorToCoordinates(b,j).reverse()};this.getVectorToPoint=function(b){return new m(b.x-this.x,b.y-this.y)};this.getVectorFromPoint=function(b){return this.getVectorToPoint(b).reverse()}}function t(b,j,a,g,c){this.data=b;this.context=j;if(b.length)for(var d=b.length,f,l,i=0;i<d;i++){f=b[i];l=f.x.length;a.call(j,f);for(var e=1;e<l;e++)g.call(j,f,e);c.call(j,f)}this.changed=function(){};this.startStrokeFn=a;this.addToStrokeFn=g;this.endStrokeFn=\r\nc;this.inStroke=!1;this._stroke=this._lastPoint=null;this.startStroke=function(b){if(b&&\"number\"==typeof b.x&&\"number\"==typeof b.y){this._stroke={x:[b.x],y:[b.y]};this.data.push(this._stroke);this._lastPoint=b;this.inStroke=!0;var j=this._stroke,a=this.startStrokeFn,g=this.context;setTimeout(function(){a.call(g,j)},3);return b}return null};this.addToStroke=function(b){if(this.inStroke&&\"number\"===typeof b.x&&\"number\"===typeof b.y&&4<Math.abs(b.x-this._lastPoint.x)+Math.abs(b.y-this._lastPoint.y)){var j=\r\nthis._stroke.x.length;this._stroke.x.push(b.x);this._stroke.y.push(b.y);this._lastPoint=b;var a=this._stroke,g=this.addToStrokeFn,s=this.context;setTimeout(function(){g.call(s,a,j)},3);return b}return null};this.endStroke=function(){var b=this.inStroke;this.inStroke=!1;this._lastPoint=null;if(b){var j=this._stroke,a=this.endStrokeFn,g=this.context,s=this.changed;setTimeout(function(){a.call(g,j);s.call(g)},3);return!0}return null}}function r(b,j,a){var g=this.$parent=$(b),b=this.eventTokens={};this.events=\r\nnew v(this);var c=$.fn[e](\"globalEvents\"),d={width:\"ratio\",height:\"ratio\",sizeRatio:4,color:\"#000\",\"background-color\":\"#fff\",\"decor-color\":\"#eee\",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};$.extend(d,q(g));j&&$.extend(d,j);this.settings=d;for(var f in a)a.hasOwnProperty(f)&&a[f].call(this,f);this.events.publish(e+\".initializing\");this.$controlbarUpper=$('<div style=\"padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;\"></div>').appendTo(g);\r\nthis.isCanvasEmulator=!1;a=this.canvas=this.initializeCanvas(d);j=$(a);this.$controlbarLower=$('<div style=\"padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;\"></div>').appendTo(g);this.canvasContext=a.getContext(\"2d\");j.data(e+\".this\",this);g=(g=d.lineWidth)?g:Math.max(Math.round(a.width/400),2);d.lineWidth=g;this.lineCurveThreshold=3*d.lineWidth;d.cssclass&&\"\"!=$.trim(d.cssclass)&&j.addClass(d.cssclass);\r\nthis.fatFingerCompensation=0;var g=function(b){var j,a,g=function(g){g=g.changedTouches&&0<g.changedTouches.length?g.changedTouches[0]:g;return new k(Math.round(g.pageX+j),Math.round(g.pageY+a)+b.fatFingerCompensation)},d=new y(750,function(){b.dataEngine.endStroke()});this.drawEndHandler=function(j){try{j.preventDefault()}catch(a){}d.clear();b.dataEngine.endStroke()};this.drawStartHandler=function(c){c.preventDefault();var s=$(b.canvas).offset();j=-1*s.left;a=-1*s.top;b.dataEngine.startStroke(g(c));\r\nd.kick()};this.drawMoveHandler=function(j){j.preventDefault();b.dataEngine.inStroke&&(b.dataEngine.addToStroke(g(j)),d.kick())};return this}.call({},this),l=g.drawEndHandler,i=g.drawStartHandler,p=g.drawMoveHandler,h=this.canvas,j=$(h);this.isCanvasEmulator?(j.bind(\"mousemove.\"+e,p),j.bind(\"mouseup.\"+e,l),j.bind(\"mousedown.\"+e,i)):(h.ontouchstart=function(b){h.onmousedown=void 0;h.onmouseup=void 0;h.onmousemove=void 0;this.fatFingerCompensation=d.minFatFingerCompensation&&-3*d.lineWidth>d.minFatFingerCompensation?\r\n-3*d.lineWidth:d.minFatFingerCompensation;i(b);h.ontouchend=l;h.ontouchstart=i;h.ontouchmove=p},h.onmousedown=function(b){h.ontouchstart=void 0;h.ontouchend=void 0;h.ontouchmove=void 0;i(b);h.onmousedown=i;h.onmouseup=l;h.onmousemove=p});b[e+\".windowmouseup\"]=c.subscribe(e+\".windowmouseup\",g.drawEndHandler);this.events.publish(e+\".attachingEventHandlers\");var n=this,b=d.width.toString(10),w=e;if(\"ratio\"===b||\"%\"===b.split(\"\")[b.length-1])this.eventTokens[w+\".parentresized\"]=c.subscribe(w+\".parentresized\",\r\nfunction(b,j,a){return function(){var g=j.width();if(g!==a){for(var d in b)b.hasOwnProperty(d)&&(c.unsubscribe(b[d]),delete b[d]);var s=n.settings;n.$parent.children().remove();for(d in n)n.hasOwnProperty(d)&&delete n[d];d=s.data;var g=1*g/a,f=[],l,i,e,h,k,p;i=0;for(e=d.length;i<e;i++){p=d[i];l={x:[],y:[]};h=0;for(k=p.x.length;h<k;h++)l.x.push(p.x[h]*g),l.y.push(p.y[h]*g);f.push(l)}s.data=f;j[w](s)}}}(this.eventTokens,this.$parent,this.$parent.width(),1*this.canvas.width/this.canvas.height));this.resetCanvas(d.data);\r\nthis.events.publish(e+\".initialized\");return this}var e=\"jSignature\",y=function(b,j){var a;this.kick=function(){clearTimeout(a);a=setTimeout(j,b)};this.clear=function(){clearTimeout(a)};return this},v=function(b){this.topics={};this.context=b?b:this;this.publish=function(b,a,g,d){if(this.topics[b]){var c=this.topics[b],f=Array.prototype.slice.call(arguments,1),l=[],i,e,h,p;e=0;for(h=c.length;e<h;e++)p=c[e],i=p[0],p[1]&&(p[0]=function(){},l.push(e)),i.apply(this.context,f);e=0;for(h=l.length;e<h;e++)c.splice(l[e],\r\n1)}};this.subscribe=function(b,a,g){this.topics[b]?this.topics[b].push([a,g]):this.topics[b]=[[a,g]];return{topic:b,callback:a}};this.unsubscribe=function(b){if(this.topics[b.topic])for(var a=this.topics[b.topic],g=0,d=a.length;g<d;g++)a[g][0]===b.callback&&a.splice(g,1)}},z=function(b){var a=this.canvasContext,d=b.x[0],b=b.y[0],g=this.settings.lineWidth,c=a.fillStyle;a.fillStyle=a.strokeStyle;a.fillRect(d+g/-2,b+g/-2,g,g);a.fillStyle=c},u=function(b,a){var d=new k(b.x[a-1],b.y[a-1]),g=new k(b.x[a],\r\nb.y[a]),c=d.getVectorToPoint(g);if(1<a){var f=new k(b.x[a-2],b.y[a-2]),l=f.getVectorToPoint(d),i;if(l.getLength()>this.lineCurveThreshold){i=2<a?(new k(b.x[a-3],b.y[a-3])).getVectorToPoint(f):new m(0,0);var e=0.35*l.getLength(),h=l.angleTo(i.reverse()),p=c.angleTo(l.reverse());i=(new m(i.x+l.x,i.y+l.y)).resizeTo(Math.max(0.05,h)*e);var n=(new m(l.x+c.x,l.y+c.y)).reverse().resizeTo(Math.max(0.05,p)*e),l=this.canvasContext,e=f.x,p=f.y,h=d.x,w=d.y,A=f.x+i.x,f=f.y+i.y;i=d.x+n.x;n=d.y+n.y;l.beginPath();\r\nl.moveTo(e,p);l.bezierCurveTo(A,f,i,n,h,w);l.stroke()}}c.getLength()<=this.lineCurveThreshold&&(c=this.canvasContext,f=d.x,d=d.y,i=g.x,g=g.y,c.beginPath(),c.moveTo(f,d),c.lineTo(i,g),c.stroke())},x=function(b){var a=b.x.length-1;if(0<a){var d=new k(b.x[a],b.y[a]),g=new k(b.x[a-1],b.y[a-1]),c=g.getVectorToPoint(d);if(c.getLength()>this.lineCurveThreshold){if(1<a){var b=(new k(b.x[a-2],b.y[a-2])).getVectorToPoint(g),f=(new m(b.x+c.x,b.y+c.y)).resizeTo(c.getLength()/2),c=this.canvasContext,b=g.x,a=g.y,\r\nl=d.x,i=d.y,e=g.x+f.x,g=g.y+f.y,f=d.x,d=d.y;c.beginPath();c.moveTo(b,a);c.bezierCurveTo(e,g,f,d,l,i)}else c=this.canvasContext,b=g.x,g=g.y,a=d.x,d=d.y,c.beginPath(),c.moveTo(b,g),c.lineTo(a,d);c.stroke()}}};r.prototype.resetCanvas=function(b){var a=this.canvas,d=this.settings,c=this.canvasContext,f=this.isCanvasEmulator,l=a.width,i=a.height;c.clearRect(0,0,l+30,i+30);c.shadowColor=c.fillStyle=d[\"background-color\"];f&&c.fillRect(0,0,l+30,i+30);c.lineWidth=Math.ceil(parseInt(d.lineWidth,10));c.lineCap=\r\nc.lineJoin=\"round\";c.strokeStyle=d[\"decor-color\"];c.shadowOffsetX=0;c.shadowOffsetY=0;var h=Math.round(i/5),p=1.5*h,k=i-h,l=l-1.5*h,i=i-h;c.beginPath();c.moveTo(p,k);c.lineTo(l,i);c.stroke();c.strokeStyle=d.color;f||(c.shadowColor=c.strokeStyle,c.shadowOffsetX=0.5*c.lineWidth,c.shadowOffsetY=-0.6*c.lineWidth,c.shadowBlur=0);b||(b=[]);c=this.dataEngine=new t(b,this,z,u,x);d.data=b;$(a).data(e+\".data\",b).data(e+\".settings\",d);var n=this.$parent,w=this.events,A=e;c.changed=function(){w.publish(A+\".change\");\r\nn.trigger(\"change\")};c.changed();return!0};r.prototype.initializeCanvas=function(b){var a=document.createElement(\"canvas\"),c=$(a);b.width===b.height&&\"ratio\"===b.height&&(b.width=\"100%\");c.css(\"margin\",0).css(\"padding\",0).css(\"border\",\"none\").css(\"height\",\"ratio\"===b.height||!b.height?1:b.height.toString(10)).css(\"width\",\"ratio\"===b.width||!b.width?1:b.width.toString(10));c.appendTo(this.$parent);\"ratio\"===b.height?c.css(\"height\",Math.round(c.width()/b.sizeRatio)):\"ratio\"===b.width&&c.css(\"width\",\r\nMath.round(c.height()*b.sizeRatio));c.addClass(e);a.width=c.width();a.height=c.height();b=a;if(b.getContext)b=!1;else{var c=b.ownerDocument.parentWindow,d=c.FlashCanvas?b.ownerDocument.parentWindow.FlashCanvas:\"undefined\"===typeof FlashCanvas?void 0:FlashCanvas;if(d){b=d.initElement(b);d=1;c&&(c.screen&&c.screen.deviceXDPI&&c.screen.logicalXDPI)&&(d=1*c.screen.deviceXDPI/c.screen.logicalXDPI);if(1!==d)try{$(b).children(\"object\").get(0).resize(Math.ceil(b.width*d),Math.ceil(b.height*d)),b.getContext(\"2d\").scale(d,\r\nd)}catch(f){}b=!0}else throw Error(\"Canvas element does not support 2d context. jSignature cannot proceed.\");}this.isCanvasEmulator=b;a.onselectstart=function(b){b&&b.preventDefault&&b.preventDefault();b&&b.stopPropagation&&b.stopPropagation();return!1};return a};var p=window,h=function(b,a){var c=new Image,d=this;c.onload=function(){d.getContext(\"2d\").drawImage(c,0,0,c.width<d.width?c.width:d.width,c.height<d.height?c.height:d.height)};c.src=\"data:\"+a+\",\"+b},a=function(b){this.find(\"canvas.\"+e).add(this.filter(\"canvas.\"+\r\ne)).data(e+\".this\").resetCanvas(b);return this},f=function(b,a){if(void 0===a&&(\"string\"===typeof b&&\"data:\"===b.substr(0,5))&&(a=b.slice(5).split(\",\")[0],b=b.slice(6+a.length),a===b))return;var c=this.find(\"canvas.\"+e).add(this.filter(\"canvas.\"+e));if(n.hasOwnProperty(a))0!==c.length&&n[a].call(c[0],b,a,function(b){return function(){return b.resetCanvas.apply(b,arguments)}}(c.data(e+\".this\")));else throw Error(e+\" is unable to find import plugin with for format '\"+String(a)+\"'\");return this},d=new v,\r\nc=e,l,i=function(){d.publish(c+\".parentresized\")};$(p).bind(\"resize.\"+c,function(){l&&clearTimeout(l);l=setTimeout(i,500)}).bind(\"mouseup.\"+c,function(){d.publish(c+\".windowmouseup\")});var w={},A={\"default\":function(){return this.toDataURL()},\"native\":function(b){return b},image:function(){var b=this.toDataURL();if(\"string\"===typeof b&&4<b.length&&\"data:\"===b.slice(0,5)&&-1!==b.indexOf(\",\")){var a=b.indexOf(\",\");return[b.slice(5,a),b.substr(a+1)]}return[]}},n={\"native\":function(b,a,c){c(b)},image:h,\r\n\"image/png;base64\":h,\"image/jpeg;base64\":h,\"image/jpg;base64\":h},B={\"export\":A,\"import\":n,instance:w},C={init:function(b){return this.each(function(){var a,c=!1;for(a=this.parentNode;a&&!c;)c=a.body,a=a.parentNode;!c||new r(this,b,w)})},getSettings:function(){return this.find(\"canvas.\"+e).add(this.filter(\"canvas.\"+e)).data(e+\".this\").settings},clear:a,reset:a,addPlugin:function(b,a,c){B.hasOwnProperty(b)&&(B[b][a]=c);return this},listPlugins:function(b){var a=[];if(B.hasOwnProperty(b)){var b=B[b],\r\nc;for(c in b)b.hasOwnProperty(c)&&a.push(c)}return a},getData:function(b){var a=this.find(\"canvas.\"+e).add(this.filter(\"canvas.\"+e));void 0===b&&(b=\"default\");if(0!==a.length&&A.hasOwnProperty(b))return A[b].call(a.get(0),a.data(e+\".data\"))},importData:f,setData:f,globalEvents:function(){return d},events:function(){return this.find(\"canvas.\"+e).add(this.filter(\"canvas.\"+e)).data(e+\".this\").events}};$.fn[e]=function(b){if(!b||\"object\"===typeof b)return C.init.apply(this,arguments);if(\"string\"===typeof b&&\r\nC[b])return C[b].apply(this,Array.prototype.slice.call(arguments,1));$.error(\"Method \"+String(b)+\" does not exist on jQuery.\"+e)}})();\r\n(function(){$.fn.jSignature(\"addPlugin\",\"instance\",\"UndoButton\",function(q){this.events.subscribe(\"jSignature.attachingEventHandlers\",function(){if(this.settings[q]){var m=this.settings[q];\"function\"!==typeof m&&(m=function(){var e=$('<input type=\"button\" value=\"Undo last stroke\" style=\"position:absolute;display:none;margin:0 !important;top:auto\" />').appendTo(this.$controlbarLower),k=e.width();e.css(\"left\",Math.round((this.canvas.width-k)/2));k!==e.width()&&e.width(k);return e});var k=m.call(this),\r\nt=this;t.events.subscribe(\"jSignature.change\",function(){t.dataEngine.data.length?k.show():k.hide()});var r=this,e=(this.events.topics.hasOwnProperty(\"jSignature.undo\")?q:\"jSignature\")+\".undo\";k.bind(\"click\",function(){r.events.publish(e)});r.events.subscribe(e,function(){var e=r.dataEngine.data;e.length&&(e.pop(),r.resetCanvas(e))})}})})})();\r\n(function(){for(var q={},m={},k=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX\".split(\"\"),t=k.length/2,r=t-1;-1<r;r--)q[k[r]]=k[r+t],m[k[r+t]]=k[r];var e=function(e){for(var e=e.split(\"\"),h=e.length,a=1;a<h;a++)e[a]=q[e[a]];return e.join(\"\")},y=function(k){for(var h=[],a=0,f=1,d=k.length,c,l,i=0;i<d;i++)c=Math.round(k[i]),l=c-a,a=c,0>l&&0<f?(f=-1,h.push(\"Z\")):0<l&&0>f&&(f=1,h.push(\"Y\")),c=Math.abs(l),c>=t?h.push(e(c.toString(t))):h.push(c.toString(t));return h.join(\"\")},v=function(e){for(var h=\r\n[],e=e.split(\"\"),a=e.length,f,d=1,c=[],l=0,i=0;i<a;i++)f=e[i],f in q||\"Z\"===f||\"Y\"===f?(0!==c.length&&(c=parseInt(c.join(\"\"),t)*d+l,h.push(c),l=c),\"Z\"===f?(d=-1,c=[]):\"Y\"===f?(d=1,c=[]):c=[f]):c.push(m[f]);h.push(parseInt(c.join(\"\"),t)*d+l);return h},z=function(e){for(var h=[],a=e.length,f,d=0;d<a;d++)f=e[d],h.push(y(f.x)),h.push(y(f.y));return h.join(\"_\")},u=function(e){for(var h=[],e=e.split(\"_\"),a=e.length/2,f=0;f<a;f++)h.push({x:v(e[2*f]),y:v(e[2*f+1])});return h},k=function(e){return[\"image/jsignature;base30\",\r\nz(e)]},r=function(e,h,a){\"string\"===typeof e&&(\"image/jsignature;base30\"===e.substring(0,23).toLowerCase()&&(e=e.substring(24)),a(u(e)))};if(null==this.jQuery)throw Error(\"We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...\");var x=this.jQuery.fn.jSignature;x(\"addPlugin\",\"export\",\"base30\",k);x(\"addPlugin\",\"export\",\"image/jsignature;base30\",k);x(\"addPlugin\",\"import\",\"base30\",r);x(\"addPlugin\",\"import\",\"image/jsignature;base30\",r);this.jSignatureDebug&&(this.jSignatureDebug.base30=\r\n{remapTailChars:e,compressstrokeleg:y,uncompressstrokeleg:v,compressstrokes:z,uncompressstrokes:u,charmap:q})}).call(\"undefined\"!==typeof window?window:this);\r\n(function(){function q(a,f){this.x=a;this.y=f;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var d=function(a){return Math.round(a/Math.abs(a))};this.resizeTo=function(a){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=a,this.y=a*d(this.y);else if(0===this.y)this._length=a,this.x=a*d(this.x);else{var f=Math.abs(this.y/\r\nthis.x),e=Math.sqrt(Math.pow(a,2)/(1+Math.pow(f,2))),f=f*e;this._length=a;this.x=e*d(this.x);this.y=f*d(this.y)}return this};this.angleTo=function(a){var d=this.getLength()*a.getLength();return 0===d?0:Math.acos(Math.min(Math.max((this.x*a.x+this.y*a.y)/d,-1),1))/Math.PI}}function m(a,f){this.x=a;this.y=f;this.getVectorToCoordinates=function(a,c){return new q(a-this.x,c-this.y)};this.getVectorFromCoordinates=function(a,c){return this.getVectorToCoordinates(a,c).reverse()};this.getVectorToPoint=function(a){return new q(a.x-\r\nthis.x,a.y-this.y)};this.getVectorFromPoint=function(a){return this.getVectorToPoint(a).reverse()}}function k(a,f){var d=Math.pow(10,f);return Math.round(a*d)/d}function t(a,f,d){var f=f+1,c=new m(a.x[f-1],a.y[f-1]),e=new m(a.x[f],a.y[f]),e=c.getVectorToPoint(e),i=new m(a.x[f-2],a.y[f-2]),c=i.getVectorToPoint(c);return c.getLength()>d?(d=2<f?(new m(a.x[f-3],a.y[f-3])).getVectorToPoint(i):new q(0,0),a=0.35*c.getLength(),i=c.angleTo(d.reverse()),f=e.angleTo(c.reverse()),d=(new q(d.x+c.x,d.y+c.y)).resizeTo(Math.max(0.05,\r\ni)*a),e=(new q(c.x+e.x,c.y+e.y)).reverse().resizeTo(Math.max(0.05,f)*a),e=new q(c.x+e.x,c.y+e.y),[\"c\",k(d.x,2),k(d.y,2),k(e.x,2),k(e.y,2),k(c.x,2),k(c.y,2)]):[\"l\",k(c.x,2),k(c.y,2)]}function r(a,f){var d=a.x.length-1,c=new m(a.x[d],a.y[d]),e=new m(a.x[d-1],a.y[d-1]),c=e.getVectorToPoint(c);if(1<d&&c.getLength()>f){var d=(new m(a.x[d-2],a.y[d-2])).getVectorToPoint(e),e=c.angleTo(d.reverse()),i=0.35*c.getLength(),d=(new q(d.x+c.x,d.y+c.y)).resizeTo(Math.max(0.05,e)*i);return[\"c\",k(d.x,2),k(d.y,2),k(c.x,\r\n2),k(c.y,2),k(c.x,2),k(c.y,2)]}return[\"l\",k(c.x,2),k(c.y,2)]}function e(a,e,d){for(var e=[\"M\",k(a.x[0]-e,2),k(a.y[0]-d,2)],d=1,c=a.x.length-1;d<c;d++)e.push.apply(e,t(a,d,1));0<c?e.push.apply(e,r(a,d,1)):0===c&&e.push.apply(e,[\"l\",1,1]);return e.join(\" \")}function y(a){var f=['<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>','<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">'],d,c=a.length,l,i=[],h=[],k=l=d=0,n=0,p=[];if(0!==c){for(d=0;d<c;d++){k=\r\na[d];n=[];l={x:[],y:[]};for(var m=void 0,b=void 0,m=0,b=k.x.length;m<b;m++)n.push({x:k.x[m],y:k.y[m]});n=simplify(n,0.7,!0);m=0;for(b=n.length;m<b;m++)l.x.push(n[m].x),l.y.push(n[m].y);p.push(l);i=i.concat(l.x);h=h.concat(l.y)}a=Math.min.apply(null,i)-1;c=Math.max.apply(null,i)+1;i=Math.min.apply(null,h)-1;h=Math.max.apply(null,h)+1;k=0>a?0:a;n=0>i?0:i;d=c-a;l=h-i}f.push('<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"'+d.toString()+'\" height=\"'+l.toString()+'\">');d=0;for(c=p.length;d<\r\nc;d++)l=p[d],f.push('<path fill=\"none\" stroke=\"#000000\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"'+e(l,k,n)+'\"/>');f.push(\"</svg>\");return f.join(\"\")}function v(a){return[p,y(a)]}function z(a){return[h,x(y(a))]}var u=window;\"use strict\";(\"undefined\"!=typeof exports?exports:u).simplify=function(a,e,d){e=void 0!==e?e*e:1;if(!d){for(var c=a.length,l,i=a[0],h=[i],d=1;d<c;d++){l=a[d];var k=l.x-i.x,n=l.y-i.y;k*k+n*n>e&&(h.push(l),i=l)}a=(i!==l&&h.push(l),h)}l=a;var d=l.length,\r\nc=new (\"undefined\"!=typeof Uint8Array?Uint8Array:Array)(d),i=0,h=d-1,m,p,b=[],j=[],s=[];for(c[i]=c[h]=1;h;){n=0;for(k=i+1;k<h;k++){m=l[k];var g=l[i],r=l[h],q=g.x,t=g.y,g=r.x-q,u=r.y-t,v=void 0;if(0!==g||0!==u)v=((m.x-q)*g+(m.y-t)*u)/(g*g+u*u),1<v?(q=r.x,t=r.y):0<v&&(q+=g*v,t+=u*v);m=(g=m.x-q,u=m.y-t,g*g+u*u);m>n&&(p=k,n=m)}n>e&&(c[p]=1,b.push(i),j.push(p),b.push(p),j.push(h));i=b.pop();h=j.pop()}for(k=0;k<d;k++)c[k]&&s.push(l[k]);return a=s,a};if(\"function\"!==typeof x)var x=function(a){var e=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".split(\"\"),\r\nd,c,h,i,k=0,m=0,n=\"\",n=[];do d=a.charCodeAt(k++),c=a.charCodeAt(k++),h=a.charCodeAt(k++),i=d<<16|c<<8|h,d=i>>18&63,c=i>>12&63,h=i>>6&63,i&=63,n[m++]=e[d]+e[c]+e[h]+e[i];while(k<a.length);n=n.join(\"\");a=a.length%3;return(a?n.slice(0,a-3):n)+\"===\".slice(a||3)};var p=\"image/svg+xml\",h=\"image/svg+xml;base64\";if(\"undefined\"===typeof $)throw Error(\"We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...\");u=$.fn.jSignature;u(\"addPlugin\",\"export\",\"svg\",v);u(\"addPlugin\",\r\n\"export\",p,v);u(\"addPlugin\",\"export\",\"svgbase64\",z);u(\"addPlugin\",\"export\",h,z)})();",
		"ch/portof/libs/jSignature.UndoButton.js": "/** @license\r\njSignature v2 jSignature's Undo Button and undo functionality plugin\r\n\r\n*/\r\n/**\r\nCopyright (c) 2011 Willow Systems Corp http://willow-systems.com\r\nMIT License <http://www.opensource.org/licenses/mit-license.php>\r\n*/\r\n\r\n;(function(){\r\n\r\n\tvar apinamespace = 'jSignature'\r\n\r\n\tfunction attachHandlers(buttonRenderer, apinamespace, extensionName) {\r\n\t\tvar $undoButton = buttonRenderer.call(this)\r\n\r\n\t\t;(function(jSignatureInstance, $undoButton, apinamespace) {\r\n\t\t\tjSignatureInstance.events.subscribe(\r\n\t\t\t\tapinamespace + '.change'\r\n\t\t\t\t, function(){\r\n\t\t\t\t\tif (jSignatureInstance.dataEngine.data.length) {\r\n\t\t\t\t\t\t$undoButton.show()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$undoButton.hide()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t})( this, $undoButton, apinamespace )\r\n\r\n\t\t;(function(jSignatureInstance, $undoButton, apinamespace) {\r\n\r\n\t\t\tvar eventName = apinamespace + '.undo'\r\n\r\n\t\t\t$undoButton.bind('click', function(){\r\n\t\t\t\tjSignatureInstance.events.publish(eventName)\r\n\t\t\t})\r\n\r\n\t\t\t// This one creates new \"undo\" event listener to jSignature instance\r\n\t\t\t// It handles the actual undo-ing.\r\n\t\t\tjSignatureInstance.events.subscribe(\r\n\t\t\t\teventName\r\n\t\t\t\t, function(){\r\n\t\t\t\t\tvar data = jSignatureInstance.dataEngine.data\r\n\t\t\t\t\tif (data.length) {\r\n\t\t\t\t\t\tdata.pop()\r\n\t\t\t\t\t\tjSignatureInstance.resetCanvas(data)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t})( \r\n\t\t\tthis\r\n\t\t\t, $undoButton\r\n\t\t\t, this.events.topics.hasOwnProperty( apinamespace + '.undo' ) ? \r\n\t\t\t\t// oops, seems some other plugin or code has already claimed \"jSignature.undo\" event\r\n\t\t\t\t// we will use this extension's name for event name prefix\r\n\t\t\t\textensionName :\r\n\t\t\t\t// Great! we will use 'jSignature' for event name prefix.\r\n\t\t\t\tapinamespace\r\n\t\t)\r\n\t}\r\n\r\n\tfunction ExtensionInitializer(extensionName){\r\n\t\t// we are called very early in instance's life.\r\n\t\t// right after the settings are resolved and \r\n\t\t// jSignatureInstance.events is created \r\n\t\t// and right before first (\"jSignature.initializing\") event is called.\r\n\t\t// You don't really need to manupilate \r\n\t\t// jSignatureInstance directly, just attach\r\n\t\t// a bunch of events to jSignatureInstance.events\r\n\t\t// (look at the source of jSignatureClass to see when these fire)\r\n\t\t// and your special pieces of code will attach by themselves.\r\n\r\n\t\t// this function runs every time a new instance is set up.\r\n\t\t// this means every var you create will live only for one instance\r\n\t\t// unless you attach it to something outside, like \"window.\"\r\n\t\t// and pick it up later from there.\r\n\r\n\t\t// when globalEvents' events fire, 'this' is globalEvents object\r\n\t\t// when jSignatureInstance's events fire, 'this' is jSignatureInstance\r\n\r\n\t\t// Here,\r\n\t\t// this = is new jSignatureClass's instance.\r\n\r\n\t\t// The way you COULD approch setting this up is:\r\n\t\t// if you have multistep set up, attach event to \"jSignature.initializing\"\r\n\t\t// that attaches other events to be fired further lower the init stream.\r\n\t\t// Or, if you know for sure you rely on only one jSignatureInstance's event,\r\n\t\t// just attach to it directly\r\n\r\n\t\tvar apinamespace = 'jSignature'\r\n\r\n\t\tthis.events.subscribe(\r\n\t\t\t// name of the event\r\n\t\t\tapinamespace + '.attachingEventHandlers'\r\n\t\t\t// event handlers, can pass args too, but in majority of cases,\r\n\t\t\t// 'this' which is jSignatureClass object instance pointer is enough to get by.\r\n\t\t\t, function(){\r\n\r\n\t\t\t\t// hooking up \"undo\" button\tto lower edge of Canvas.\r\n\t\t\t\t// but only when options passed to jSignature('init', options)\r\n\t\t\t\t// contain \"undoButton\":renderingFunction pair.\r\n\t\t\t\t// or \"undoButton\":true (in which case default, internal rendering fn is used)\r\n\t\t\t\tif (this.settings[extensionName]) {\r\n\t\t\t\t\tvar oursettings = this.settings[extensionName]\r\n\t\t\t\t\tif (typeof oursettings !== 'function') {\r\n\t\t\t\t\t\t// we make it a function.\r\n\r\n\t\t\t\t\t\t// we allow people to override the button rendering code,\r\n\t\t\t\t\t\t// but when developler is OK with default look (and just passes \"truthy\" value)\r\n\t\t\t\t\t\t// this defines default look for the button:\r\n\t\t\t\t\t\t// centered against canvas, hanging on its lower side.\r\n\t\t\t\t\t\toursettings = function(){\r\n\t\t\t\t\t\t\t// this === jSignatureInstance \r\n\t\t\t\t\t\t\tvar undoButtonSytle = 'position:absolute;display:none;margin:0 !important;top:auto'\r\n\t\t\t\t\t\t\t, $undoButton = $('<input type=\"button\" value=\"Undo last stroke\" style=\"'+undoButtonSytle+'\" />')\r\n\t\t\t\t\t\t\t\t.appendTo(this.$controlbarLower)\r\n\r\n\t\t\t\t\t\t\t// this centers the button against the canvas.\r\n\t\t\t\t\t\t\tvar buttonWidth = $undoButton.width()\r\n\t\t\t\t\t\t\t$undoButton.css(\r\n\t\t\t\t\t\t\t\t'left'\r\n\t\t\t\t\t\t\t\t, Math.round(( this.canvas.width - buttonWidth ) / 2)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t// IE 7 grows the button. Correcting for that.\r\n\t\t\t\t\t\t\tif ( buttonWidth !== $undoButton.width() ) {\r\n\t\t\t\t\t\t\t\t$undoButton.width(buttonWidth)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn $undoButton\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tattachHandlers.call( \r\n\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t, oursettings\r\n\t\t\t\t\t\t, apinamespace\r\n\t\t\t\t\t\t, extensionName\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\tvar ExtensionAttacher = function(){\r\n\t\t$.fn[apinamespace](\r\n\t\t\t'addPlugin'\r\n\t\t\t,'instance' // type of plugin\r\n\t\t\t,'UndoButton' // extension name\r\n\t\t\t,ExtensionInitializer\r\n\t\t)\r\n\t}\r\n\t\r\n\r\n//  //Because plugins are minified together with jSignature, multiple defines per (minified) file blow up and dont make sense\r\n//\t//Need to revisit this later.\r\n\t\r\n//\tif ( typeof define === \"function\" && define.amd != null) {\r\n//\t\t// AMD-loader compatible resource declaration\r\n//\t\t// you need to call this one with jQuery as argument.\r\n//\t\tdefine(function(){return Initializer} )\r\n//\t} else {\r\n\t\tExtensionAttacher()\r\n//\t}\r\n\r\n})();",
		"ch/portof/libs/jSignature.js": "/** @preserve \r\njSignature v2 \"${buildDate}\" \"${commitID}\"\r\nCopyright (c) 2012 Willow Systems Corp http://willow-systems.com\r\nCopyright (c) 2010 Brinley Ang http://www.unbolt.net\r\nMIT License <http://www.opensource.org/licenses/mit-license.php> \r\n\r\n*/\r\n;(function() {\r\n\r\nvar apinamespace = 'jSignature'\r\n\r\n/**\r\nAllows one to delay certain eventual action by setting up a timer for it and allowing one to delay it\r\nby \"kick\"ing it. Sorta like \"kick the can down the road\"\r\n\r\n@public\r\n@class\r\n@param\r\n@returns {Type}\r\n*/\r\nvar KickTimerClass = function(time, callback) {\r\n\tvar timer\r\n\tthis.kick = function() {\r\n\t\tclearTimeout(timer)\r\n\t\ttimer = setTimeout(\r\n\t\t\tcallback\r\n\t\t\t, time\r\n\t\t)\t\t\r\n\t}\r\n\tthis.clear = function() {\r\n\t\tclearTimeout(timer)\r\n\t}\r\n\treturn this\r\n}\r\n\r\nvar PubSubClass = function(context){\r\n\t'use strict'\r\n\t/*  @preserve \r\n\t-----------------------------------------------------------------------------------------------\r\n\tJavaScript PubSub library\r\n\t2012 (c) Willow Systems Corp (www.willow-systems.com)\r\n\tbased on Peter Higgins (dante@dojotoolkit.org)\r\n\tLoosely based on Dojo publish/subscribe API, limited in scope. Rewritten blindly.\r\n\tOriginal is (c) Dojo Foundation 2004-2010. Released under either AFL or new BSD, see:\r\n\thttp://dojofoundation.org/license for more information.\r\n\t-----------------------------------------------------------------------------------------------\r\n\t*/\r\n\tthis.topics = {}\r\n\t// here we choose what will be \"this\" for the called events.\r\n\t// if context is defined, it's context. Else, 'this' is this instance of PubSub\r\n\tthis.context = context ? context : this\r\n\t/**\r\n\t * Allows caller to emit an event and pass arguments to event listeners.\r\n\t * @public\r\n\t * @function\r\n\t * @param topic {String} Name of the channel on which to voice this event\r\n\t * @param **arguments Any number of arguments you want to pass to the listeners of this event.\r\n\t */\r\n\tthis.publish = function(topic, arg1, arg2, etc) {\r\n\t\t'use strict'\r\n\t\tif (this.topics[topic]) {\r\n\t\t\tvar currentTopic = this.topics[topic]\r\n\t\t\t, args = Array.prototype.slice.call(arguments, 1)\r\n\t\t\t, toremove = []\r\n\t\t\t, fn\r\n\t\t\t, i, l\r\n\t\t\t, pair\r\n\r\n\t\t\tfor (i = 0, l = currentTopic.length; i < l; i++) {\r\n\t\t\t\tpair = currentTopic[i] // this is a [function, once_flag] array\r\n\t\t\t\tfn = pair[0] \r\n\t\t\t\tif (pair[1] /* 'run once' flag set */){\r\n\t\t\t\t  pair[0] = function(){}\r\n\t\t\t\t  toremove.push(i)\r\n\t\t\t\t}\r\n\t\t\t   \tfn.apply(this.context, args)\r\n\t\t\t}\r\n\t\t\tfor (i = 0, l = toremove.length; i < l; i++) {\r\n\t\t\t  currentTopic.splice(toremove[i], 1)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * Allows listener code to subscribe to channel and be called when data is available \r\n\t * @public\r\n\t * @function\r\n\t * @param topic {String} Name of the channel on which to voice this event\r\n\t * @param callback {Function} Executable (function pointer) that will be ran when event is voiced on this channel.\r\n\t * @param once {Boolean} (optional. False by default) Flag indicating if the function is to be triggered only once.\r\n\t * @returns {Object} A token object that cen be used for unsubscribing.  \r\n\t */\r\n\tthis.subscribe = function(topic, callback, once) {\r\n\t\t'use strict'\r\n\t\tif (!this.topics[topic]) {\r\n\t\t\tthis.topics[topic] = [[callback, once]];\r\n\t\t} else {\r\n\t\t\tthis.topics[topic].push([callback,once]);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t\"topic\": topic,\r\n\t\t\t\"callback\": callback\r\n\t\t};\r\n\t};\r\n\t/**\r\n\t * Allows listener code to unsubscribe from a channel \r\n\t * @public\r\n\t * @function\r\n\t * @param token {Object} A token object that was returned by `subscribe` method \r\n\t */\r\n\tthis.unsubscribe = function(token) {\r\n\t\tif (this.topics[token.topic]) {\r\n\t\t\tvar currentTopic = this.topics[token.topic]\r\n\t\t\t\r\n\t\t\tfor (var i = 0, l = currentTopic.length; i < l; i++) {\r\n\t\t\t\tif (currentTopic[i][0] === token.callback) {\r\n\t\t\t\t\tcurrentTopic.splice(i, 1)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/// Returns front, back and \"decor\" colors derived from element (as jQuery obj)\r\nfunction getColors($e){\r\n\tvar tmp\r\n\t, undef\r\n\t, frontcolor = $e.css('color')\r\n\t, backcolor\r\n\t, e = $e[0]\r\n\t\r\n\tvar toOfDOM = false\r\n\twhile(e && !backcolor && !toOfDOM){\r\n\t\ttry{\r\n\t\t\ttmp = $(e).css('background-color')\r\n\t\t} catch (ex) {\r\n\t\t\ttmp = 'transparent'\r\n\t\t}\r\n\t\tif (tmp !== 'transparent' && tmp !== 'rgba(0, 0, 0, 0)'){\r\n\t\t\tbackcolor = tmp\r\n\t\t}\r\n\t\ttoOfDOM = e.body\r\n\t\te = e.parentNode\r\n\t}\r\n\r\n\tvar rgbaregex = /rgb[a]*\\((\\d+),\\s*(\\d+),\\s*(\\d+)/ // modern browsers\r\n\t, hexregex = /#([AaBbCcDdEeFf\\d]{2})([AaBbCcDdEeFf\\d]{2})([AaBbCcDdEeFf\\d]{2})/ // IE 8 and less.\r\n\t, frontcolorcomponents\r\n\r\n\t// Decomposing Front color into R, G, B ints\r\n\ttmp = undef\r\n\ttmp = frontcolor.match(rgbaregex)\r\n\tif (tmp){\r\n\t\tfrontcolorcomponents = {'r':parseInt(tmp[1],10),'g':parseInt(tmp[2],10),'b':parseInt(tmp[3],10)}\r\n\t} else {\r\n\t\ttmp = frontcolor.match(hexregex)\r\n\t\tif (tmp) {\r\n\t\t\tfrontcolorcomponents = {'r':parseInt(tmp[1],16),'g':parseInt(tmp[2],16),'b':parseInt(tmp[3],16)}\r\n\t\t}\r\n\t}\r\n//\t\tif(!frontcolorcomponents){\r\n//\t\t\tfrontcolorcomponents = {'r':255,'g':255,'b':255}\r\n//\t\t}\r\n\r\n\tvar backcolorcomponents\r\n\t// Decomposing back color into R, G, B ints\r\n\tif(!backcolor){\r\n\t\t// HIghly unlikely since this means that no background styling was applied to any element from here to top of dom.\r\n\t\t// we'll pick up back color from front color\r\n\t\tif(frontcolorcomponents){\r\n\t\t\tif (Math.max.apply(null, [frontcolorcomponents.r, frontcolorcomponents.g, frontcolorcomponents.b]) > 127){\r\n\t\t\t\tbackcolorcomponents = {'r':0,'g':0,'b':0}\r\n\t\t\t} else {\r\n\t\t\t\tbackcolorcomponents = {'r':255,'g':255,'b':255}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// arg!!! front color is in format we don't understand (hsl, named colors)\r\n\t\t\t// Let's just go with white background.\r\n\t\t\tbackcolorcomponents = {'r':255,'g':255,'b':255}\r\n\t\t}\r\n\t} else {\r\n\t\ttmp = undef\r\n\t\ttmp = backcolor.match(rgbaregex)\r\n\t\tif (tmp){\r\n\t\t\tbackcolorcomponents = {'r':parseInt(tmp[1],10),'g':parseInt(tmp[2],10),'b':parseInt(tmp[3],10)}\r\n\t\t} else {\r\n\t\t\ttmp = backcolor.match(hexregex)\r\n\t\t\tif (tmp) {\r\n\t\t\t\tbackcolorcomponents = {'r':parseInt(tmp[1],16),'g':parseInt(tmp[2],16),'b':parseInt(tmp[3],16)}\r\n\t\t\t}\r\n\t\t}\r\n//\t\t\tif(!backcolorcomponents){\r\n//\t\t\t\tbackcolorcomponents = {'r':0,'g':0,'b':0}\r\n//\t\t\t}\r\n\t}\r\n\t\r\n\t// Deriving Decor color\r\n\t// THis is LAZY!!!! Better way would be to use HSL and adjust luminocity. However, that could be an overkill. \r\n\t\r\n\tvar toRGBfn = function(o){return 'rgb(' + [o.r, o.g, o.b].join(', ') + ')'} \r\n\t, decorcolorcomponents\r\n\t, frontcolorbrightness\r\n\t, adjusted\r\n\t\r\n\tif (frontcolorcomponents && backcolorcomponents){\r\n\t\tvar backcolorbrightness = Math.max.apply(null, [frontcolorcomponents.r, frontcolorcomponents.g, frontcolorcomponents.b])\r\n\t\t\r\n\t\tfrontcolorbrightness = Math.max.apply(null, [backcolorcomponents.r, backcolorcomponents.g, backcolorcomponents.b])\r\n\t\tadjusted = Math.round(frontcolorbrightness + (-1 * (frontcolorbrightness - backcolorbrightness) * 0.75)) // \"dimming\" the difference between pen and back.\r\n\t\tdecorcolorcomponents = {'r':adjusted,'g':adjusted,'b':adjusted} // always shade of gray\r\n\t} else if (frontcolorcomponents) {\r\n\t\tfrontcolorbrightness = Math.max.apply(null, [frontcolorcomponents.r, frontcolorcomponents.g, frontcolorcomponents.b])\r\n\t\tvar polarity = +1\r\n\t\tif (frontcolorbrightness > 127){\r\n\t\t\tpolarity = -1\r\n\t\t}\r\n\t\t// shifting by 25% (64 points on RGB scale)\r\n\t\tadjusted = Math.round(frontcolorbrightness + (polarity * 96)) // \"dimming\" the pen's color by 75% to get decor color.\r\n\t\tdecorcolorcomponents = {'r':adjusted,'g':adjusted,'b':adjusted} // always shade of gray\r\n\t} else {\r\n\t\tdecorcolorcomponents = {'r':191,'g':191,'b':191} // always shade of gray\r\n\t}\r\n\r\n\treturn {\r\n\t\t'color': frontcolor\r\n\t\t, 'background-color': backcolorcomponents? toRGBfn(backcolorcomponents) : backcolor\r\n\t\t, 'decor-color': toRGBfn(decorcolorcomponents)\r\n\t}\r\n}\r\n\r\nfunction Vector(x,y){\r\n\tthis.x = x\r\n\tthis.y = y\r\n\tthis.reverse = function(){\r\n\t\treturn new this.constructor( \r\n\t\t\tthis.x * -1\r\n\t\t\t, this.y * -1\r\n\t\t)\r\n\t}\r\n\tthis._length = null\r\n\tthis.getLength = function(){\r\n\t\tif (!this._length){\r\n\t\t\tthis._length = Math.sqrt( Math.pow(this.x, 2) + Math.pow(this.y, 2) )\r\n\t\t}\r\n\t\treturn this._length\r\n\t}\r\n\t\r\n\tvar polarity = function (e){\r\n\t\treturn Math.round(e / Math.abs(e))\r\n\t}\r\n\tthis.resizeTo = function(length){\r\n\t\t// proportionally changes x,y such that the hypotenuse (vector length) is = new length\r\n\t\tif (this.x === 0 && this.y === 0){\r\n\t\t\tthis._length = 0\r\n\t\t} else if (this.x === 0){\r\n\t\t\tthis._length = length\r\n\t\t\tthis.y = length * polarity(this.y)\r\n\t\t} else if(this.y === 0){\r\n\t\t\tthis._length = length\r\n\t\t\tthis.x = length * polarity(this.x)\r\n\t\t} else {\r\n\t\t\tvar proportion = Math.abs(this.y / this.x)\r\n\t\t\t\t, x = Math.sqrt(Math.pow(length, 2) / (1 + Math.pow(proportion, 2)))\r\n\t\t\t\t, y = proportion * x\r\n\t\t\tthis._length = length\r\n\t\t\tthis.x = x * polarity(this.x)\r\n\t\t\tthis.y = y * polarity(this.y)\r\n\t\t}\r\n\t\treturn this\r\n\t}\r\n\t\r\n\t/**\r\n\t * Calculates the angle between 'this' vector and another.\r\n\t * @public\r\n\t * @function\r\n\t * @returns {Number} The angle between the two vectors as measured in PI. \r\n\t */\r\n\tthis.angleTo = function(vectorB) {\r\n\t\tvar divisor = this.getLength() * vectorB.getLength()\r\n\t\tif (divisor === 0) {\r\n\t\t\treturn 0\r\n\t\t} else {\r\n\t\t\t// JavaScript floating point math is screwed up.\r\n\t\t\t// because of it, the core of the formula can, on occasion, have values\r\n\t\t\t// over 1.0 and below -1.0.\r\n\t\t\treturn Math.acos(\r\n\t\t\t\tMath.min( \r\n\t\t\t\t\tMath.max( \r\n\t\t\t\t\t\t( this.x * vectorB.x + this.y * vectorB.y ) / divisor\r\n\t\t\t\t\t\t, -1.0\r\n\t\t\t\t\t)\r\n\t\t\t\t\t, 1.0\r\n\t\t\t\t)\r\n\t\t\t) / Math.PI\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction Point(x,y){\r\n\tthis.x = x\r\n\tthis.y = y\r\n\t\r\n\tthis.getVectorToCoordinates = function (x, y) {\r\n\t\treturn new Vector(x - this.x, y - this.y)\r\n\t}\r\n\tthis.getVectorFromCoordinates = function (x, y) {\r\n\t\treturn this.getVectorToCoordinates(x, y).reverse()\r\n\t}\r\n\tthis.getVectorToPoint = function (point) {\r\n\t\treturn new Vector(point.x - this.x, point.y - this.y)\r\n\t}\r\n\tthis.getVectorFromPoint = function (point) {\r\n\t\treturn this.getVectorToPoint(point).reverse()\r\n\t}\r\n}\r\n\r\n/*\r\n * About data structure:\r\n * We don't store / deal with \"pictures\" this signature capture code captures \"vectors\"\r\n * \r\n * We don't store bitmaps. We store \"strokes\" as arrays of arrays. (Actually, arrays of objects containing arrays of coordinates.\r\n * \r\n * Stroke = mousedown + mousemoved * n (+ mouseup but we don't record that as that was the \"end / lack of movement\" indicator)\r\n * \r\n * Vectors = not classical vectors where numbers indicated shift relative last position. Our vectors are actually coordinates against top left of canvas.\r\n * \t\t\twe could calc the classical vectors, but keeping the the actual coordinates allows us (through Math.max / min) \r\n * \t\t\tto calc the size of resulting drawing very quickly. If we want classical vectors later, we can always get them in backend code.\r\n * \r\n * So, the data structure:\r\n * \r\n * var data = [\r\n * \t{ // stroke starts\r\n * \t\tx : [101, 98, 57, 43] // x points\r\n * \t\t, y : [1, 23, 65, 87] // y points\r\n * \t} // stroke ends\r\n * \t, { // stroke starts\r\n * \t\tx : [55, 56, 57, 58] // x points\r\n * \t\t, y : [101, 97, 54, 4] // y points\r\n * \t} // stroke ends\r\n * \t, { // stroke consisting of just a dot\r\n * \t\tx : [53] // x points\r\n * \t\t, y : [151] // y points\r\n * \t} // stroke ends\r\n * ]\r\n * \r\n * we don't care or store stroke width (it's canvas-size-relative), color, shadow values. These can be added / changed on whim post-capture.\r\n * \r\n */\r\nfunction DataEngine(storageObject, context, startStrokeFn, addToStrokeFn, endStrokeFn){\r\n\tthis.data = storageObject // we expect this to be an instance of Array\r\n\tthis.context = context\r\n\r\n\tif (storageObject.length){\r\n\t\t// we have data to render\r\n\t\tvar numofstrokes = storageObject.length\r\n\t\t, stroke\r\n\t\t, numofpoints\r\n\t\t\r\n\t\tfor (var i = 0; i < numofstrokes; i++){\r\n\t\t\tstroke = storageObject[i]\r\n\t\t\tnumofpoints = stroke.x.length\r\n\t\t\tstartStrokeFn.call(context, stroke)\r\n\t\t\tfor(var j = 1; j < numofpoints; j++){\r\n\t\t\t\taddToStrokeFn.call(context, stroke, j)\r\n\t\t\t}\r\n\t\t\tendStrokeFn.call(context, stroke)\r\n\t\t}\r\n\t}\r\n\r\n\tthis.changed = function(){}\r\n\t\r\n\tthis.startStrokeFn = startStrokeFn\r\n\tthis.addToStrokeFn = addToStrokeFn\r\n\tthis.endStrokeFn = endStrokeFn\r\n\r\n\tthis.inStroke = false\r\n\t\r\n\tthis._lastPoint = null\r\n\tthis._stroke = null\r\n\tthis.startStroke = function(point){\r\n\t\tif(point && typeof(point.x) == \"number\" && typeof(point.y) == \"number\"){\r\n\t\t\tthis._stroke = {'x':[point.x], 'y':[point.y]}\r\n\t\t\tthis.data.push(this._stroke)\r\n\t\t\tthis._lastPoint = point\r\n\t\t\tthis.inStroke = true\r\n\t\t\t// 'this' does not work same inside setTimeout(\r\n\t\t\tvar stroke = this._stroke \r\n\t\t\t, fn = this.startStrokeFn\r\n\t\t\t, context = this.context\r\n\t\t\tsetTimeout(\r\n\t\t\t\t// some IE's don't support passing args per setTimeout API. Have to create closure every time instead.\r\n\t\t\t\tfunction() {fn.call(context, stroke)}\r\n\t\t\t\t, 3\r\n\t\t\t)\r\n\t\t\treturn point\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\t// that \"5\" at the very end of this if is important to explain.\r\n\t// we do NOT render links between two captured points (in the middle of the stroke) if the distance is shorter than that number.\r\n\t// not only do we NOT render it, we also do NOT capture (add) these intermediate points to storage.\r\n\t// when clustering of these is too tight, it produces noise on the line, which, because of smoothing, makes lines too curvy.\r\n\t// maybe, later, we can expose this as a configurable setting of some sort.\r\n\tthis.addToStroke = function(point){\r\n\t\tif (this.inStroke && \r\n\t\t\ttypeof(point.x) === \"number\" && \r\n\t\t\ttypeof(point.y) === \"number\" &&\r\n\t\t\t// calculates absolute shift in diagonal pixels away from original point\r\n\t\t\t(Math.abs(point.x - this._lastPoint.x) + Math.abs(point.y - this._lastPoint.y)) > 4\r\n\t\t){\r\n\t\t\tvar positionInStroke = this._stroke.x.length\r\n\t\t\tthis._stroke.x.push(point.x)\r\n\t\t\tthis._stroke.y.push(point.y)\r\n\t\t\tthis._lastPoint = point\r\n\t\t\t\r\n\t\t\tvar stroke = this._stroke\r\n\t\t\t, fn = this.addToStrokeFn\r\n\t\t\t, context = this.context\r\n\t\t\tsetTimeout(\r\n\t\t\t\t// some IE's don't support passing args per setTimeout API. Have to create closure every time instead.\r\n\t\t\t\tfunction() {fn.call(context, stroke, positionInStroke)}\r\n\t\t\t\t, 3\r\n\t\t\t)\r\n\t\t\treturn point\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\tthis.endStroke = function(){\r\n\t\tvar c = this.inStroke\r\n\t\tthis.inStroke = false\r\n\t\tthis._lastPoint = null\r\n\t\tif (c){\r\n\t\t\tvar stroke = this._stroke\r\n\t\t\t, fn = this.endStrokeFn // 'this' does not work same inside setTimeout(\r\n\t\t\t, context = this.context\r\n\t\t\t, changedfn = this.changed\r\n\t\t\tsetTimeout(\r\n\t\t\t\t// some IE's don't support passing args per setTimeout API. Have to create closure every time instead.\r\n\t\t\t\tfunction(){\r\n\t\t\t\t\tfn.call(context, stroke)\r\n\t\t\t\t\tchangedfn.call(context)\r\n\t\t\t\t}\r\n\t\t\t\t, 3\r\n\t\t\t)\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar basicDot = function(ctx, x, y, size){\r\n\tvar fillStyle = ctx.fillStyle\r\n\tctx.fillStyle = ctx.strokeStyle\r\n\tctx.fillRect(x + size / -2 , y + size / -2, size, size)\r\n\tctx.fillStyle = fillStyle\r\n}\r\n, basicLine = function(ctx, startx, starty, endx, endy){\r\n\tctx.beginPath()\r\n\tctx.moveTo(startx, starty)\r\n\tctx.lineTo(endx, endy)\r\n\tctx.stroke()\r\n}\r\n, basicCurve = function(ctx, startx, starty, endx, endy, cp1x, cp1y, cp2x, cp2y){\r\n\tctx.beginPath()\r\n\tctx.moveTo(startx, starty)\r\n\tctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, endx, endy)\r\n\tctx.stroke()\r\n}\r\n, strokeStartCallback = function(stroke) {\r\n\t// this = jSignatureClass instance\r\n\tbasicDot(this.canvasContext, stroke.x[0], stroke.y[0], this.settings.lineWidth)\r\n}\r\n, strokeAddCallback = function(stroke, positionInStroke){\r\n\t// this = jSignatureClass instance\r\n\r\n\t// Because we are funky this way, here we draw TWO curves.\r\n\t// 1. POSSIBLY \"this line\" - spanning from point right before us, to this latest point.\r\n\t// 2. POSSIBLY \"prior curve\" - spanning from \"latest point\" to the one before it.\r\n\t\r\n\t// Why you ask?\r\n\t// long lines (ones with many pixels between them) do not look good when they are part of a large curvy stroke.\r\n\t// You know, the jaggedy crocodile spine instead of a pretty, smooth curve. Yuck!\r\n\t// We want to approximate pretty curves in-place of those ugly lines.\r\n\t// To approximate a very nice curve we need to know the direction of line before and after.\r\n\t// Hence, on long lines we actually wait for another point beyond it to come back from\r\n\t// mousemoved before we draw this curve.\r\n\t\r\n\t// So for \"prior curve\" to be calc'ed we need 4 points \r\n\t// \tA, B, C, D (we are on D now, A is 3 points in the past.)\r\n\t// and 3 lines:\r\n\t//  pre-line (from points A to B), \r\n\t//  this line (from points B to C), (we call it \"this\" because if it was not yet, it's the only one we can draw for sure.) \r\n\t//  post-line (from points C to D) (even through D point is 'current' we don't know how we can draw it yet)\r\n\t//\r\n\t// Well, actually, we don't need to *know* the point A, just the vector A->B\r\n\tvar Cpoint = new Point(stroke.x[positionInStroke-1], stroke.y[positionInStroke-1])\r\n\t\t, Dpoint = new Point(stroke.x[positionInStroke], stroke.y[positionInStroke])\r\n\t\t, CDvector = Cpoint.getVectorToPoint(Dpoint)\r\n\t\t\r\n\t// Again, we have a chance here to draw TWO things:\r\n\t//  BC Curve (only if it's long, because if it was short, it was drawn by previous callback) and \r\n\t//  CD Line (only if it's short)\r\n\t\r\n\t// So, let's start with BC curve.\r\n\t// if there is only 2 points in stroke array, we don't have \"history\" long enough to have point B, let alone point A.\r\n\t// Falling through to drawing line CD is proper, as that's the only line we have points for.\r\n\tif(positionInStroke > 1) {\r\n\t\t// we are here when there are at least 3 points in stroke array.\r\n\t\tvar Bpoint = new Point(stroke.x[positionInStroke-2], stroke.y[positionInStroke-2])\r\n\t\t, BCvector = Bpoint.getVectorToPoint(Cpoint)\r\n\t\t, ABvector\r\n\t\tif(BCvector.getLength() > this.lineCurveThreshold){\r\n\t\t\t// Yey! Pretty curves, here we come!\r\n\t\t\tif(positionInStroke > 2) {\r\n\t\t\t\t// we are here when at least 4 points in stroke array.\r\n\t\t\t\tABvector = (new Point(stroke.x[positionInStroke-3], stroke.y[positionInStroke-3])).getVectorToPoint(Bpoint)\r\n\t\t\t} else {\r\n\t\t\t\tABvector = new Vector(0,0)\r\n\t\t\t}\r\n\r\n\t\t\tvar minlenfraction = 0.05\r\n\t\t\t, maxlen = BCvector.getLength() * 0.35\r\n\t\t\t, ABCangle = BCvector.angleTo(ABvector.reverse())\r\n\t\t\t, BCDangle = CDvector.angleTo(BCvector.reverse())\r\n\t\t\t, BCP1vector = new Vector(ABvector.x + BCvector.x, ABvector.y + BCvector.y).resizeTo(\r\n\t\t\t\tMath.max(minlenfraction, ABCangle) * maxlen\r\n\t\t\t)\r\n\t\t\t, CCP2vector = (new Vector(BCvector.x + CDvector.x, BCvector.y + CDvector.y)).reverse().resizeTo(\r\n\t\t\t\tMath.max(minlenfraction, BCDangle) * maxlen\r\n\t\t\t)\r\n\t\t\t\r\n\t\t\tbasicCurve(\r\n\t\t\t\tthis.canvasContext\r\n\t\t\t\t, Bpoint.x\r\n\t\t\t\t, Bpoint.y\r\n\t\t\t\t, Cpoint.x\r\n\t\t\t\t, Cpoint.y\r\n\t\t\t\t, Bpoint.x + BCP1vector.x\r\n\t\t\t\t, Bpoint.y + BCP1vector.y\r\n\t\t\t\t, Cpoint.x + CCP2vector.x\r\n\t\t\t\t, Cpoint.y + CCP2vector.y\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\tif(CDvector.getLength() <= this.lineCurveThreshold){\r\n\t\tbasicLine(\r\n\t\t\tthis.canvasContext\r\n\t\t\t, Cpoint.x\r\n\t\t\t, Cpoint.y\r\n\t\t\t, Dpoint.x\r\n\t\t\t, Dpoint.y\r\n\t\t)\r\n\t}\r\n}\r\n, strokeEndCallback = function(stroke){\r\n\t// this = jSignatureClass instance\r\n\r\n\t// Here we tidy up things left unfinished in last strokeAddCallback run.\r\n\t\r\n\t// What's POTENTIALLY left unfinished there is the curve between the last points\r\n\t// in the stroke, if the len of that line is more than lineCurveThreshold\r\n\t// If the last line was shorter than lineCurveThreshold, it was drawn there, and there\r\n\t// is nothing for us here to do.\r\n\t// We can also be called when there is only one point in the stroke (meaning, the \r\n\t// stroke was just a dot), in which case, again, there is nothing for us to do.\r\n\t\t\t\t\r\n\t// So for \"this curve\" to be calc'ed we need 3 points \r\n\t// \tA, B, C\r\n\t// and 2 lines:\r\n\t//  pre-line (from points A to B), \r\n\t//  this line (from points B to C) \r\n\t// Well, actually, we don't need to *know* the point A, just the vector A->B\r\n\t// so, we really need points B, C and AB vector.\r\n\tvar positionInStroke = stroke.x.length - 1\r\n\t\r\n\tif (positionInStroke > 0){\r\n\t\t// there are at least 2 points in the stroke.we are in business.\r\n\t\tvar Cpoint = new Point(stroke.x[positionInStroke], stroke.y[positionInStroke])\r\n\t\t\t, Bpoint = new Point(stroke.x[positionInStroke-1], stroke.y[positionInStroke-1])\r\n\t\t\t, BCvector = Bpoint.getVectorToPoint(Cpoint)\r\n\t\t\t, ABvector\r\n\t\tif (BCvector.getLength() > this.lineCurveThreshold){\r\n\t\t\t// yep. This one was left undrawn in prior callback. Have to draw it now.\r\n\t\t\tif (positionInStroke > 1){\r\n\t\t\t\t// we have at least 3 elems in stroke\r\n\t\t\t\tABvector = (new Point(stroke.x[positionInStroke-2], stroke.y[positionInStroke-2])).getVectorToPoint(Bpoint)\r\n\t\t\t\tvar BCP1vector = new Vector(ABvector.x + BCvector.x, ABvector.y + BCvector.y).resizeTo(BCvector.getLength() / 2)\r\n\t\t\t\tbasicCurve(\r\n\t\t\t\t\tthis.canvasContext\r\n\t\t\t\t\t, Bpoint.x\r\n\t\t\t\t\t, Bpoint.y\r\n\t\t\t\t\t, Cpoint.x\r\n\t\t\t\t\t, Cpoint.y\r\n\t\t\t\t\t, Bpoint.x + BCP1vector.x\r\n\t\t\t\t\t, Bpoint.y + BCP1vector.y\r\n\t\t\t\t\t, Cpoint.x\r\n\t\t\t\t\t, Cpoint.y\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\t// Since there is no AB leg, there is no curve to draw. This line is still \"long\" but no curve.\r\n\t\t\t\tbasicLine(\r\n\t\t\t\t\tthis.canvasContext\r\n\t\t\t\t\t, Bpoint.x\r\n\t\t\t\t\t, Bpoint.y\r\n\t\t\t\t\t, Cpoint.x\r\n\t\t\t\t\t, Cpoint.y\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n/*\r\nvar getDataStats = function(){\r\n\tvar strokecnt = strokes.length\r\n\t\t, stroke\r\n\t\t, pointid\r\n\t\t, pointcnt\r\n\t\t, x, y\r\n\t\t, maxX = Number.NEGATIVE_INFINITY\r\n\t\t, maxY = Number.NEGATIVE_INFINITY\r\n\t\t, minX = Number.POSITIVE_INFINITY\r\n\t\t, minY = Number.POSITIVE_INFINITY\r\n\tfor(strokeid = 0; strokeid < strokecnt; strokeid++){\r\n\t\tstroke = strokes[strokeid]\r\n\t\tpointcnt = stroke.length\r\n\t\tfor(pointid = 0; pointid < pointcnt; pointid++){\r\n\t\t\tx = stroke.x[pointid]\r\n\t\t\ty = stroke.y[pointid]\r\n\t\t\tif (x > maxX){\r\n\t\t\t\tmaxX = x\r\n\t\t\t} else if (x < minX) {\r\n\t\t\t\tminX = x\r\n\t\t\t}\r\n\t\t\tif (y > maxY){\r\n\t\t\t\tmaxY = y\r\n\t\t\t} else if (y < minY) {\r\n\t\t\t\tminY = y\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn {'maxX': maxX, 'minX': minX, 'maxY': maxY, 'minY': minY}\r\n}\r\n*/\r\n\r\nfunction conditionallyLinkCanvasResizeToWindowResize(jSignatureInstance, settingsWidth, apinamespace, globalEvents){\r\n\t'use strict'\r\n\tif ( settingsWidth === 'ratio' || settingsWidth.split('')[settingsWidth.length - 1] === '%' ) {\r\n\t\t\r\n\t\tthis.eventTokens[apinamespace + '.parentresized'] = globalEvents.subscribe(\r\n\t\t\tapinamespace + '.parentresized'\r\n\t\t\t, (function(eventTokens, $parent, originalParentWidth, sizeRatio){\r\n\t\t\t\t'use strict'\r\n\r\n\t\t\t\treturn function(){\r\n\t\t\t\t\t'use strict'\r\n\r\n\t\t\t\t\tvar w = $parent.width()\r\n\t\t\t\t\tif (w !== originalParentWidth) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t// UNsubscribing this particular instance of signature pad only.\r\n\t\t\t\t\t\t// there is a separate `eventTokens` per each instance of signature pad \r\n\t\t\t\t\t\tfor (var key in eventTokens){\r\n\t\t\t\t\t\t\tif (eventTokens.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\t\tglobalEvents.unsubscribe(eventTokens[key])\r\n\t\t\t\t\t\t\t\tdelete eventTokens[key]\r\n                            }\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar settings = jSignatureInstance.settings\r\n\t\t\t\t\t\tjSignatureInstance.$parent.children().remove()\r\n\t\t\t\t\t\tfor (var key in jSignatureInstance){\r\n\t\t\t\t\t\t\tif (jSignatureInstance.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\t\tdelete jSignatureInstance[key]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// scale data to new signature pad size\r\n\t\t\t\t\t\tsettings.data = (function(data, scale){\r\n\t\t\t\t\t\t\tvar newData = []\r\n\t\t\t\t\t\t\tvar o, i, l, j, m, stroke\r\n\t\t\t\t\t\t\tfor ( i = 0, l = data.length; i < l; i++) {\r\n                            \tstroke = data[i]\r\n                            \t\r\n                            \to = {'x':[],'y':[]}\r\n                            \t\r\n                            \tfor ( j = 0, m = stroke.x.length; j < m; j++) {\r\n                                \to.x.push(stroke.x[j] * scale)\r\n                                \to.y.push(stroke.y[j] * scale)\r\n                                }\r\n                            \r\n                            \tnewData.push(o)\r\n                            }\r\n\t\t\t\t\t\t\treturn newData\r\n\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\tsettings.data\r\n\t\t\t\t\t\t\t, w * 1.0 / originalParentWidth\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$parent[apinamespace](settings)\r\n\t\t\t        }\r\n\t\t\t\t}\r\n\t\t\t})(\r\n\t\t\t\tthis.eventTokens\r\n\t\t\t\t, this.$parent\r\n\t\t\t\t, this.$parent.width()\r\n\t\t\t\t, this.canvas.width * 1.0 / this.canvas.height\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nfunction jSignatureClass(parent, options, instanceExtensions) {\r\n\r\n\tvar $parent = this.$parent = $(parent)\r\n\t, eventTokens = this.eventTokens = {}\r\n\t, events = this.events = new PubSubClass(this)\r\n\t, globalEvents = $.fn[apinamespace]('globalEvents')\r\n\t, settings = {\r\n\t\t'width' : 'ratio'\r\n\t\t,'height' : 'ratio'\r\n\t\t,'sizeRatio': 4 // only used when height = 'ratio'\r\n\t\t,'color' : '#000'\r\n\t\t,'background-color': '#fff'\r\n\t\t,'decor-color': '#eee'\r\n\t\t,'lineWidth' : 0\r\n\t\t,'minFatFingerCompensation' : -10\r\n\t\t,'showUndoButton': false\r\n\t\t,'data': []\r\n\t}\r\n\t\r\n\t$.extend(settings, getColors($parent))\r\n\tif (options) {\r\n\t\t$.extend(settings, options)\r\n\t}\r\n\tthis.settings = settings\r\n\r\n\tfor (var extensionName in instanceExtensions){\r\n\t\tif (instanceExtensions.hasOwnProperty(extensionName)) {\r\n\t\t\tinstanceExtensions[extensionName].call(this, extensionName)\r\n\t\t}\r\n\t}\r\n\r\n\tthis.events.publish(apinamespace+'.initializing')\r\n\r\n\t// these, when enabled, will hover above the sig area. Hence we append them to DOM before canvas.\r\n\tthis.$controlbarUpper = (function(){\r\n\t\tvar controlbarstyle = 'padding:0 !important;margin:0 !important;'+\r\n\t\t\t'width: 100% !important; height: 0 !important;'+\r\n\t\t\t'margin-top:-1em !important;margin-bottom:1em !important;'\r\n\t\treturn $('<div style=\"'+controlbarstyle+'\"></div>').appendTo($parent)\r\n\t})();\r\n\r\n\tthis.isCanvasEmulator = false // will be flipped by initializer when needed.\r\n\tvar canvas = this.canvas = this.initializeCanvas(settings)\r\n\t, $canvas = $(canvas)\r\n\r\n\tthis.$controlbarLower = (function(){\r\n\t\tvar controlbarstyle = 'padding:0 !important;margin:0 !important;'+\r\n\t\t\t'width: 100% !important; height: 0 !important;'+\r\n\t\t\t'margin-top:-1.5em !important;margin-bottom:1.5em !important;'\r\n\t\treturn $('<div style=\"'+controlbarstyle+'\"></div>').appendTo($parent)\r\n\t})();\r\n\r\n\tthis.canvasContext = canvas.getContext(\"2d\")\r\n\r\n\t// Most of our exposed API will be looking for this:\r\n\t$canvas.data(apinamespace + '.this', this)\r\n\r\n\tsettings.lineWidth = (function(defaultLineWidth, canvasWidth){\r\n\t\tif (!defaultLineWidth){\r\n\t\t\treturn Math.max(\r\n\t\t\t\tMath.round(canvasWidth / 400) /*+1 pixel for every extra 300px of width.*/\r\n\t\t\t\t, 2 /* minimum line width */\r\n\t\t\t) \r\n\t\t} else {\r\n\t\t\treturn defaultLineWidth\r\n\t\t}\r\n\t})(settings.lineWidth, canvas.width);\r\n\r\n\tthis.lineCurveThreshold = settings.lineWidth * 3\r\n\r\n\t// Add custom class if defined\r\n\tif(settings.cssclass && $.trim(settings.cssclass) != \"\") {\r\n\t\t$canvas.addClass(settings.cssclass)\r\n\t}\r\n\r\n\t// used for shifting the drawing point up on touch devices, so one can see the drawing above the finger.\r\n\tthis.fatFingerCompensation = 0\r\n\r\n\tvar movementHandlers = (function(jSignatureInstance) {\r\n\r\n\t\t//================================\r\n\t\t// mouse down, move, up handlers:\r\n\r\n\t\t// shifts - adjustment values in viewport pixels drived from position of canvas on the page\r\n\t\tvar shiftX\r\n\t\t, shiftY\r\n\t\t, setStartValues = function(){\r\n\t\t\tvar tos = $(jSignatureInstance.canvas).offset()\r\n\t\t\tshiftX = tos.left * -1\r\n\t\t\tshiftY = tos.top * -1\r\n\t\t}\r\n\t\t, getPointFromEvent = function(e) {\r\n\t\t\tvar firstEvent = (e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches[0] : e)\r\n\t\t\t// All devices i tried report correct coordinates in pageX,Y\r\n\t\t\t// Android Chrome 2.3.x, 3.1, 3.2., Opera Mobile,  safari iOS 4.x,\r\n\t\t\t// Windows: Chrome, FF, IE9, Safari\r\n\t\t\t// None of that scroll shift calc vs screenXY other sigs do is needed.\r\n\t\t\t// ... oh, yeah, the \"fatFinger..\" is for tablets so that people see what they draw.\r\n\t\t\treturn new Point(\r\n\t\t\t\tMath.round(firstEvent.pageX + shiftX)\r\n\t\t\t\t, Math.round(firstEvent.pageY + shiftY) + jSignatureInstance.fatFingerCompensation\r\n\t\t\t)\r\n\t\t}\r\n\t\t, timer = new KickTimerClass(\r\n\t\t\t750\r\n\t\t\t, function() { jSignatureInstance.dataEngine.endStroke() }\r\n\t\t)\r\n\r\n\t\tthis.drawEndHandler = function(e) {\r\n\t\t\ttry { e.preventDefault() } catch (ex) {}\r\n\t\t\ttimer.clear()\r\n\t\t\tjSignatureInstance.dataEngine.endStroke()\r\n\t\t}\r\n\t\tthis.drawStartHandler = function(e) {\r\n\t\t\te.preventDefault()\r\n\t\t\t// for performance we cache the offsets\r\n\t\t\t// we recalc these only at the beginning the stroke\t\t\t\r\n\t\t\tsetStartValues()\r\n\t\t\tjSignatureInstance.dataEngine.startStroke( getPointFromEvent(e) )\r\n\t\t\ttimer.kick()\r\n\t\t}\r\n\t\tthis.drawMoveHandler = function(e) {\r\n\t\t\te.preventDefault()\r\n\t\t\tif (!jSignatureInstance.dataEngine.inStroke){\r\n\t\t\t\treturn\r\n\t\t\t} \r\n\t\t\tjSignatureInstance.dataEngine.addToStroke( getPointFromEvent(e) )\r\n\t\t\ttimer.kick()\r\n\t\t}\r\n\r\n\t\treturn this\r\n\r\n\t}).call( {}, this )\r\n\r\n\t//\r\n\t//================================\r\n\r\n\t;(function(drawEndHandler, drawStartHandler, drawMoveHandler) {\r\n\t\tvar canvas = this.canvas\r\n\t\t, $canvas = $(canvas)\r\n\t\t, undef\r\n\t\tif (this.isCanvasEmulator){\r\n\t\t\t$canvas.bind('mousemove.'+apinamespace, drawMoveHandler)\r\n\t\t\t$canvas.bind('mouseup.'+apinamespace, drawEndHandler)\r\n\t\t\t$canvas.bind('mousedown.'+apinamespace, drawStartHandler)\r\n\t\t} else {\r\n\t\t\tcanvas.ontouchstart = function(e) {\r\n\t\t\t\tcanvas.onmousedown = undef\r\n\t\t\t\tcanvas.onmouseup = undef\r\n\t\t\t\tcanvas.onmousemove = undef\r\n\r\n\t\t\t\tthis.fatFingerCompensation = (\r\n\t\t\t\t\tsettings.minFatFingerCompensation && \r\n\t\t\t\t\tsettings.lineWidth * -3 > settings.minFatFingerCompensation\r\n\t\t\t\t) ? settings.lineWidth * -3 : settings.minFatFingerCompensation\r\n\r\n\t\t\t\tdrawStartHandler(e)\r\n\r\n\t\t\t\tcanvas.ontouchend = drawEndHandler\r\n\t\t\t\tcanvas.ontouchstart = drawStartHandler\r\n\t\t\t\tcanvas.ontouchmove = drawMoveHandler\r\n\t\t\t}\r\n\t\t\tcanvas.onmousedown = function(e) {\r\n\t\t\t\tcanvas.ontouchstart = undef\r\n\t\t\t\tcanvas.ontouchend = undef\r\n\t\t\t\tcanvas.ontouchmove = undef\r\n\r\n\t\t\t\tdrawStartHandler(e)\r\n\r\n\t\t\t\tcanvas.onmousedown = drawStartHandler\r\n\t\t\t\tcanvas.onmouseup = drawEndHandler\r\n\t\t\t\tcanvas.onmousemove = drawMoveHandler\r\n\t\t\t}\r\n\t\t}\r\n\t}).call( \r\n\t\tthis\r\n\t\t, movementHandlers.drawEndHandler\r\n\t\t, movementHandlers.drawStartHandler\r\n\t\t, movementHandlers.drawMoveHandler\r\n\t)\r\n\r\n\t//=========================================\r\n\t// various event handlers\r\n\r\n\t// on mouseout + mouseup canvas did not know that mouseUP fired. Continued to draw despite mouse UP.\r\n\t// it is bettr than\r\n\t// $canvas.bind('mouseout', drawEndHandler)\r\n\t// because we don't want to break the stroke where user accidentally gets ouside and wants to get back in quickly.\r\n\teventTokens[apinamespace + '.windowmouseup'] = globalEvents.subscribe(\r\n\t\tapinamespace + '.windowmouseup'\r\n\t\t, movementHandlers.drawEndHandler\r\n\t)\r\n\r\n\tthis.events.publish(apinamespace+'.attachingEventHandlers')\r\n\r\n\t// If we have proportional width, we sign up to events broadcasting \"window resized\" and checking if\r\n\t// parent's width changed. If so, we (1) extract settings + data from current signature pad,\r\n\t// (2) remove signature pad from parent, and (3) reinit new signature pad at new size with same settings, (rescaled) data.\r\n\tconditionallyLinkCanvasResizeToWindowResize.call(\r\n\t\tthis\r\n\t\t, this\r\n\t\t, settings.width.toString(10)\r\n\t\t, apinamespace, globalEvents\r\n\t)\r\n\t\r\n\t// end of event handlers.\r\n\t// ===============================\r\n\r\n\tthis.resetCanvas(settings.data)\r\n\r\n\t// resetCanvas renders the data on the screen and fires ONE \"change\" event\r\n\t// if there is data. If you have controls that rely on \"change\" firing\r\n\t// attach them to something that runs before this.resetCanvas, like\r\n\t// apinamespace+'.attachingEventHandlers' that fires a bit higher.\r\n\tthis.events.publish(apinamespace+'.initialized')\r\n\r\n\treturn this\r\n} // end of initBase\r\n\r\n//=========================================================================\r\n// jSignatureClass's methods and supporting fn's\r\n\r\njSignatureClass.prototype.resetCanvas = function(data){\r\n\tvar canvas = this.canvas\r\n\t, settings = this.settings\r\n\t, ctx = this.canvasContext\r\n\t, isCanvasEmulator = this.isCanvasEmulator\r\n\r\n\t, cw = canvas.width\r\n\t, ch = canvas.height\r\n\t\r\n\t// preparing colors, drawing area\r\n\r\n\tctx.clearRect(0, 0, cw + 30, ch + 30)\r\n\r\n\tctx.shadowColor = ctx.fillStyle = settings['background-color']\r\n\tif (isCanvasEmulator){\r\n\t\t// FLashCanvas fills with Black by default, covering up the parent div's background\r\n\t\t// hence we refill \r\n\t\tctx.fillRect(0,0,cw + 30, ch + 30)\r\n\t}\r\n\r\n\tctx.lineWidth = Math.ceil(parseInt(settings.lineWidth, 10))\r\n\tctx.lineCap = ctx.lineJoin = \"round\"\r\n\t\r\n\t// signature line\r\n\tctx.strokeStyle = settings['decor-color']\r\n\tctx.shadowOffsetX = 0\r\n\tctx.shadowOffsetY = 0\r\n\tvar lineoffset = Math.round( ch / 5 )\r\n\tbasicLine(ctx, lineoffset * 1.5, ch - lineoffset, cw - (lineoffset * 1.5), ch - lineoffset)\r\n\tctx.strokeStyle = settings.color\r\n\r\n\tif (!isCanvasEmulator){\r\n\t\tctx.shadowColor = ctx.strokeStyle\r\n\t\tctx.shadowOffsetX = ctx.lineWidth * 0.5\r\n\t\tctx.shadowOffsetY = ctx.lineWidth * -0.6\r\n\t\tctx.shadowBlur = 0\t\t\t\t\t\r\n\t}\r\n\t\r\n\t// setting up new dataEngine\r\n\r\n\tif (!data) { data = [] }\r\n\t\r\n\tvar dataEngine = this.dataEngine = new DataEngine(\r\n\t\tdata\r\n\t\t, this\r\n\t\t, strokeStartCallback\r\n\t\t, strokeAddCallback\r\n\t\t, strokeEndCallback\r\n\t)\r\n\r\n\tsettings.data = data  // onwindowresize handler uses it, i think.\r\n\t$(canvas).data(apinamespace+'.data', data)\r\n\t\t.data(apinamespace+'.settings', settings)\r\n\r\n\t// we fire \"change\" event on every change in data.\r\n\t// setting this up:\r\n\tdataEngine.changed = (function(target, events, apinamespace) {\r\n\t\t'use strict'\r\n\t\treturn function() {\r\n\t\t\tevents.publish(apinamespace+'.change')\r\n\t\t\ttarget.trigger('change') \r\n\t\t}\r\n\t})(this.$parent, this.events, apinamespace)\r\n\t// let's trigger change on all data reloads\r\n\tdataEngine.changed()\r\n\r\n\t// import filters will be passing this back as indication of \"we rendered\"\r\n\treturn true\r\n}\r\n\r\nfunction initializeCanvasEmulator(canvas){\r\n\tif (canvas.getContext){\r\n\t\treturn false\r\n\t} else {\r\n\t\t// for cases when jSignature, FlashCanvas is inserted\r\n\t\t// from one window into another (child iframe)\r\n\t\t// 'window' and 'FlashCanvas' may be stuck behind\r\n\t\t// in that other parent window.\r\n\t\t// we need to find it\r\n\t\tvar window = canvas.ownerDocument.parentWindow\r\n\t\tvar FC = window.FlashCanvas ?\r\n\t\t\tcanvas.ownerDocument.parentWindow.FlashCanvas :\r\n\t\t\t(\r\n\t\t\t\ttypeof FlashCanvas === \"undefined\" ?\r\n\t\t\t\tundefined :\r\n\t\t\t\tFlashCanvas\r\n\t\t\t)\r\n\r\n\t\tif (FC) {\r\n\t\t\tcanvas = FC.initElement(canvas)\r\n\t\t\t\r\n\t\t\tvar zoom = 1\r\n\t\t\t// FlashCanvas uses flash which has this annoying habit of NOT scaling with page zoom. \r\n\t\t\t// It matches pixel-to-pixel to screen instead.\r\n\t\t\t// Since we are targeting ONLY IE 7, 8 with FlashCanvas, we will test the zoom only the IE8, IE7 way\r\n\t\t\tif (window && window.screen && window.screen.deviceXDPI && window.screen.logicalXDPI){\r\n\t\t\t\tzoom = window.screen.deviceXDPI * 1.0 / window.screen.logicalXDPI\r\n\t\t\t}\r\n\t\t\tif (zoom !== 1){\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// We effectively abuse the brokenness of FlashCanvas and force the flash rendering surface to\r\n\t\t\t\t\t// occupy larger pixel dimensions than the wrapping, scaled up DIV and Canvas elems.\r\n\t\t\t\t\t$(canvas).children('object').get(0).resize(Math.ceil(canvas.width * zoom), Math.ceil(canvas.height * zoom))\r\n\t\t\t\t\t// And by applying \"scale\" transformation we can talk \"browser pixels\" to FlashCanvas\r\n\t\t\t\t\t// and have it translate the \"browser pixels\" to \"screen pixels\"\r\n\t\t\t\t\tcanvas.getContext('2d').scale(zoom, zoom)\r\n\t\t\t\t\t// Note to self: don't reuse Canvas element. Repeated \"scale\" are cumulative.\r\n\t\t\t\t} catch (ex) {}\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Canvas element does not support 2d context. jSignature cannot proceed.\")\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\njSignatureClass.prototype.initializeCanvas = function(settings) {\r\n\t// ===========\r\n\t// Init + Sizing code\r\n\r\n\tvar canvas = document.createElement('canvas')\r\n\t, $canvas = $(canvas)\r\n\r\n\t// We cannot work with circular dependency\r\n\tif (settings.width === settings.height && settings.height === 'ratio') {\r\n    \tsettings.width = '100%'\r\n    }\r\n\r\n\t$canvas.css(\r\n\t\t'margin'\r\n\t\t, 0\r\n\t).css(\r\n\t\t'padding'\r\n\t\t, 0\r\n\t).css(\r\n\t\t'border'\r\n\t\t, 'none'\r\n\t).css(\r\n\t\t'height'\r\n\t\t, settings.height === 'ratio' || !settings.height ? 1 : settings.height.toString(10)\r\n\t).css(\r\n\t\t'width'\r\n\t\t, settings.width === 'ratio' || !settings.width ? 1 : settings.width.toString(10)\r\n\t)\r\n\r\n\t$canvas.appendTo(this.$parent)\r\n\r\n\t// we could not do this until canvas is rendered (appended to DOM)\r\n\tif (settings.height === 'ratio') {\r\n\t\t$canvas.css(\r\n\t\t\t'height'\r\n\t\t\t, Math.round( $canvas.width() / settings.sizeRatio )\r\n\t\t)\r\n    } else if (settings.width === 'ratio') {\r\n\t\t$canvas.css(\r\n\t\t\t'width'\r\n\t\t\t, Math.round( $canvas.height() * settings.sizeRatio )\r\n\t\t)\r\n    }\r\n\r\n\t$canvas.addClass(apinamespace)\r\n\r\n\t// canvas's drawing area resolution is independent from canvas's size.\r\n\t// pixels are just scaled up or down when internal resolution does not\r\n\t// match external size. So...\r\n\r\n\tcanvas.width = $canvas.width()\r\n\tcanvas.height = $canvas.height()\r\n\t\r\n\t// Special case Sizing code\r\n\r\n\tthis.isCanvasEmulator = initializeCanvasEmulator(canvas)\r\n\r\n\t// End of Sizing Code\r\n\t// ===========\r\n\r\n\t// normally select preventer would be short, but\r\n\t// Canvas emulator on IE does NOT provide value for Event. Hence this convoluted line.\r\n\tcanvas.onselectstart = function(e){if(e && e.preventDefault){e.preventDefault()}; if(e && e.stopPropagation){e.stopPropagation()}; return false;}\r\n\r\n\treturn canvas\r\n}\r\n\r\n\r\nvar GlobalJSignatureObjectInitializer = function(window){\r\n\r\n\tvar globalEvents = new PubSubClass()\r\n\t\r\n\t// common \"window resized\" event listener.\r\n\t// jSignature instances will subscribe to this chanel.\r\n\t// to resize themselves when needed.\r\n\t;(function(globalEvents, apinamespace, $, window){\r\n\t\t'use strict'\r\n\r\n\t\tvar resizetimer\r\n\t\t, runner = function(){\r\n\t\t\tglobalEvents.publish(\r\n\t\t\t\tapinamespace + '.parentresized'\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\t// jSignature knows how to resize its content when its parent is resized\r\n\t\t// window resize is the only way we can catch resize events though...\r\n\t\t$(window).bind('resize.'+apinamespace, function(){\r\n\t\t\tif (resizetimer) {\r\n                clearTimeout(resizetimer)\r\n\t\t\t}\r\n\t\t\tresizetimer = setTimeout( \r\n\t\t\t\trunner\r\n\t\t\t\t, 500\r\n\t\t\t)\r\n\t\t})\r\n\t\t// when mouse exists canvas element and \"up\"s outside, we cannot catch it with\r\n\t\t// callbacks attached to canvas. This catches it outside.\r\n\t\t.bind('mouseup.'+apinamespace, function(e){\r\n\t\t\tglobalEvents.publish(\r\n\t\t\t\tapinamespace + '.windowmouseup'\r\n\t\t\t)\r\n\t\t})\r\n\r\n\t})(globalEvents, apinamespace, $, window)\r\n\r\n\tvar jSignatureInstanceExtensions = {\r\n\t\t/*\r\n\t\t'exampleExtension':function(extensionName){\r\n\t\t\t// we are called very early in instance's life.\r\n\t\t\t// right after the settings are resolved and \r\n\t\t\t// jSignatureInstance.events is created \r\n\t\t\t// and right before first (\"jSignature.initializing\") event is called.\r\n\t\t\t// You don't really need to manupilate \r\n\t\t\t// jSignatureInstance directly, just attach\r\n\t\t\t// a bunch of events to jSignatureInstance.events\r\n\t\t\t// (look at the source of jSignatureClass to see when these fire)\r\n\t\t\t// and your special pieces of code will attach by themselves.\r\n\r\n\t\t\t// this function runs every time a new instance is set up.\r\n\t\t\t// this means every var you create will live only for one instance\r\n\t\t\t// unless you attach it to something outside, like \"window.\"\r\n\t\t\t// and pick it up later from there.\r\n\r\n\t\t\t// when globalEvents' events fire, 'this' is globalEvents object\r\n\t\t\t// when jSignatureInstance's events fire, 'this' is jSignatureInstance\r\n\r\n\t\t\t// Here,\r\n\t\t\t// this = is new jSignatureClass's instance.\r\n\r\n\t\t\t// The way you COULD approch setting this up is:\r\n\t\t\t// if you have multistep set up, attach event to \"jSignature.initializing\"\r\n\t\t\t// that attaches other events to be fired further lower the init stream.\r\n\t\t\t// Or, if you know for sure you rely on only one jSignatureInstance's event,\r\n\t\t\t// just attach to it directly\r\n\r\n\t\t\tthis.events.subscribe(\r\n\t\t\t\t// name of the event\r\n\t\t\t\tapinamespace + '.initializing'\r\n\t\t\t\t// event handlers, can pass args too, but in majority of cases,\r\n\t\t\t\t// 'this' which is jSignatureClass object instance pointer is enough to get by.\r\n\t\t\t\t, function(){\r\n\t\t\t\t\tif (this.settings.hasOwnProperty('non-existent setting category?')) {\r\n\t\t\t\t\t\tconsole.log(extensionName + ' is here')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\tvar exportplugins = {\r\n\t\t'default':function(data){return this.toDataURL()}\r\n\t\t, 'native':function(data){return data}\r\n\t\t, 'image':function(data){\r\n\t\t\t/*this = canvas elem */\r\n\t\t\tvar imagestring = this.toDataURL()\r\n\t\t\t\r\n\t\t\tif (typeof imagestring === 'string' && \r\n\t\t\t\timagestring.length > 4 && \r\n\t\t\t\timagestring.slice(0,5) === 'data:' &&\r\n\t\t\t\timagestring.indexOf(',') !== -1){\r\n\t\t\t\t\r\n\t\t\t\tvar splitterpos = imagestring.indexOf(',')\r\n\r\n\t\t\t\treturn [\r\n\t\t\t        imagestring.slice(5, splitterpos)\r\n\t\t\t        , imagestring.substr(splitterpos + 1)\r\n\t\t        ]\r\n\t\t\t}\r\n\t\t\treturn []\r\n\t\t}\r\n\t}\r\n\r\n\t// will be part of \"importplugins\"\r\n\tfunction _renderImageOnCanvas( data, formattype, rerendercallable ) {\r\n\t\t'use strict'\r\n\t\t// #1. Do NOT rely on this. No worky on IE \r\n\t\t//   (url max len + lack of base64 decoder + possibly other issues)\r\n\t\t// #2. This does NOT affect what is captured as \"signature\" as far as vector data is \r\n\t\t// concerned. This is treated same as \"signature line\" - i.e. completely ignored\r\n\t\t// the only time you see imported image data exported is if you export as image.\r\n\r\n\t\t// we do NOT call rerendercallable here (unlike in other import plugins)\r\n\t\t// because importing image does absolutely nothing to the underlying vector data storage\r\n\t\t// This could be a way to \"import\" old signatures stored as images\r\n\t\t// This could also be a way to import extra decor into signature area.\r\n\t\t\r\n\t\tvar img = new Image()\r\n\t\t// this = Canvas DOM elem. Not jQuery object. Not Canvas's parent div.\r\n\t\t, c = this\r\n\r\n\t\timg.onload = function() {\r\n\t\t\tvar ctx = c.getContext(\"2d\").drawImage( \r\n\t\t\t\timg, 0, 0\r\n\t\t\t\t, ( img.width < c.width) ? img.width : c.width\r\n\t\t\t\t, ( img.height < c.height) ? img.height : c.height\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\timg.src = 'data:' + formattype + ',' + data\r\n\t}\r\n\r\n\tvar importplugins = {\r\n\t\t'native':function(data, formattype, rerendercallable){\r\n\t\t\t// we expect data as Array of objects of arrays here - whatever 'default' EXPORT plugin spits out.\r\n\t\t\t// returning Truthy to indicate we are good, all updated.\r\n\t\t\trerendercallable( data )\r\n\t\t}\r\n\t\t, 'image': _renderImageOnCanvas\r\n\t\t, 'image/png;base64': _renderImageOnCanvas\r\n\t\t, 'image/jpeg;base64': _renderImageOnCanvas\r\n\t\t, 'image/jpg;base64': _renderImageOnCanvas\r\n\t}\r\n\r\n\tfunction _clearDrawingArea( data ) {\r\n\t\tthis.find('canvas.'+apinamespace)\r\n\t\t\t.add(this.filter('canvas.'+apinamespace))\r\n\t\t\t.data(apinamespace+'.this').resetCanvas( data )\r\n\t\treturn this\r\n\t}\r\n\r\n\tfunction _setDrawingData( data, formattype ) {\r\n\t\tvar undef\r\n\r\n\t\tif (formattype === undef && typeof data === 'string' && data.substr(0,5) === 'data:') {\r\n\t\t\tformattype = data.slice(5).split(',')[0]\r\n\t\t\t// 5 chars of \"data:\" + mimetype len + 1 \",\" char = all skipped.\r\n\t\t\tdata = data.slice(6 + formattype.length) \r\n\t\t\tif (formattype === data) return\r\n\t\t}\r\n\r\n\t\tvar $canvas = this.find('canvas.'+apinamespace).add(this.filter('canvas.'+apinamespace))\r\n\r\n\t\tif (!importplugins.hasOwnProperty(formattype)){\r\n\t\t\tthrow new Error(apinamespace + \" is unable to find import plugin with for format '\"+ String(formattype) +\"'\")\r\n\t\t} else if ($canvas.length !== 0){\r\n\t\t\timportplugins[formattype].call(\r\n\t\t\t\t$canvas[0]\r\n\t\t\t\t, data\r\n\t\t\t\t, formattype\r\n\t\t\t\t, (function(jSignatureInstance){ \r\n\t\t\t\t\treturn function(){ return jSignatureInstance.resetCanvas.apply(jSignatureInstance, arguments) }\r\n\t\t\t\t})($canvas.data(apinamespace+'.this'))\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\treturn this\r\n\t}\r\n\r\n\tvar elementIsOrphan = function(e){\r\n\t\tvar topOfDOM = false\r\n\t\te = e.parentNode\r\n\t\twhile (e && !topOfDOM){\r\n\t\t\ttopOfDOM = e.body\r\n\t\t\te = e.parentNode\r\n\t\t}\r\n\t\treturn !topOfDOM\r\n\t}\r\n\r\n\t//These are exposed as methods under $obj.jSignature('methodname', *args)\r\n\tvar plugins = {'export':exportplugins, 'import':importplugins, 'instance': jSignatureInstanceExtensions}\r\n\t, methods = {\r\n\t\t'init' : function( options ) {\r\n\t\t\treturn this.each( function() {\r\n\t\t\t\tif (!elementIsOrphan(this)) {\r\n\t\t\t\t\tnew jSignatureClass(this, options, jSignatureInstanceExtensions)\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t, 'getSettings' : function() {\r\n\t\t\treturn this.find('canvas.'+apinamespace)\r\n\t\t\t\t.add(this.filter('canvas.'+apinamespace))\r\n\t\t\t\t.data(apinamespace+'.this').settings\r\n\t\t}\r\n\t\t// around since v1\r\n\t\t, 'clear' : _clearDrawingArea\r\n\t\t// was mistakenly introduced instead of 'clear' in v2\r\n\t\t, 'reset' : _clearDrawingArea\r\n\t\t, 'addPlugin' : function(pluginType, pluginName, callable){\r\n\t\t\tif (plugins.hasOwnProperty(pluginType)){\r\n\t\t\t\tplugins[pluginType][pluginName] = callable\r\n\t\t\t}\r\n\t\t\treturn this\r\n\t\t}\r\n\t\t, 'listPlugins' : function(pluginType){\r\n\t\t\tvar answer = []\r\n\t\t\tif (plugins.hasOwnProperty(pluginType)){\r\n\t\t\t\tvar o = plugins[pluginType]\r\n\t\t\t\tfor (var k in o){\r\n\t\t\t\t\tif (o.hasOwnProperty(k)){\r\n\t\t\t\t\t\tanswer.push(k)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn answer\r\n\t\t}\r\n\t\t, 'getData' : function( formattype ) {\r\n\t\t\tvar undef, $canvas=this.find('canvas.'+apinamespace).add(this.filter('canvas.'+apinamespace))\r\n\t\t\tif (formattype === undef) formattype = 'default'\r\n\t\t\tif ($canvas.length !== 0 && exportplugins.hasOwnProperty(formattype)){\t\t\t\t\r\n\t\t\t\treturn exportplugins[formattype].call(\r\n\t\t\t\t\t$canvas.get(0) // canvas dom elem\r\n\t\t\t\t\t, $canvas.data(apinamespace+'.data') // raw signature data as array of objects of arrays\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t\t// around since v1. Took only one arg - data-url-formatted string with (likely png of) signature image\r\n\t\t, 'importData' : _setDrawingData\r\n\t\t// was mistakenly introduced instead of 'importData' in v2\r\n\t\t, 'setData' : _setDrawingData\r\n\t\t// this is one and same instance for all jSignature.\r\n\t\t, 'globalEvents' : function(){return globalEvents}\r\n\t\t// there will be a separate one for each jSignature instance.\r\n\t\t, 'events' : function() {\r\n\t\t\treturn this.find('canvas.'+apinamespace)\r\n\t\t\t\t\t.add(this.filter('canvas.'+apinamespace))\r\n\t\t\t\t\t.data(apinamespace+'.this').events\r\n\t\t}\r\n\t} // end of methods declaration.\r\n\t\r\n\t$.fn[apinamespace] = function(method) {\r\n\t\t'use strict'\r\n\t\tif ( !method || typeof method === 'object' ) {\r\n\t\t\treturn methods.init.apply( this, arguments )\r\n\t\t} else if ( typeof method === 'string' && methods[method] ) {\r\n\t\t\treturn methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ))\r\n\t\t} else {\r\n\t\t\t$.error( 'Method ' +  String(method) + ' does not exist on jQuery.' + apinamespace )\r\n\t\t}\r\n\t}\r\n\r\n} // end of GlobalJSignatureObjectInitializer\r\n\r\nGlobalJSignatureObjectInitializer(window)\r\n\r\n})();",
		"ch/portof/libs/jSignature.CompressorBase30.js": "/** @preserve\r\njSignature v2 jSignature's custom \"base30\" format export and import plugins.\r\n\r\n*/\r\n/**\r\nCopyright (c) 2011 Willow Systems Corp http://willow-systems.com\r\nMIT License <http://www.opensource.org/licenses/mit-license.php>\r\n*/\r\n\r\n;(function(){\r\n\r\n\tvar chunkSeparator = '_' \r\n\t, charmap = {} // {'1':'g','2':'h','3':'i','4':'j','5':'k','6':'l','7':'m','8':'n','9':'o','a':'p','b':'q','c':'r','d':'s','e':'t','f':'u','0':'v'}\r\n\t, charmap_reverse = {} // will be filled by 'uncompress*\" function\r\n\t// need to split below for IE7 (possibly others), which does not understand string[position] it seems (returns undefined)\r\n\t, allchars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX'.split('') \r\n\t, bitness = allchars.length / 2\r\n\t, minus = 'Z'\r\n\t, plus = 'Y'\r\n\t\r\n\tfor(var i = bitness-1; i > -1; i--){\r\n\t\tcharmap[allchars[i]] = allchars[i+bitness]\r\n\t\tcharmap_reverse[allchars[i+bitness]] = allchars[i]\r\n\t} \r\n\tvar remapTailChars = function(number){\r\n\t\t// for any given number as string, returning string with trailing chars remapped something like so:\r\n\t\t// '345' -> '3de'\r\n\t\tvar chars = number.split('') \r\n\t\t, l = chars.length\r\n\t\t// we are skipping first char. standard hex number char = delimiter\r\n\t\tfor (var i = 1; i < l; i++ ){\r\n\t\t\tchars[i] = charmap[chars[i]]\r\n\t\t}\r\n\t\treturn chars.join('')\r\n\t}\r\n\t, compressstrokeleg = function(data){\r\n\t\t// we convert half-stroke (only 'x' series or only 'y' series of numbers)\r\n\t\t// data is like this:\r\n\t\t// [517,516,514,513,513,513,514,516,519,524,529,537,541,543,544,544,539,536]\r\n\t\t// that is converted into this:\r\n\t\t// \"5agm12100p1235584210m53\"\r\n\t\t// each number in the chain is converted such:\r\n\t\t// - find diff from previous number\r\n\t\t// - first significant digit is kept as digit char. digit char = start of new number.\r\n\t\t// - consecutive numbers are mapped to letters, where 1 to 9 are A to I, 0 is O\r\n\t\t// Sign changes are denoted by \"P\" - plus, \"M\" for minus.\r\n\t\tvar answer = []\r\n\t\t, lastwhole = 0\r\n\t\t, last = 0\r\n\t\t, lastpolarity = 1\r\n\t\t, l = data.length\r\n\t\t, nwhole, n, absn\r\n\t\t\r\n\t\tfor(var i = 0; i < l; i++){\r\n\t\t\t// we start with whole coordinates for each point\r\n\t\t\t// coords are converted into series of vectors:\r\n\t\t\t// [512, 514, 520]\r\n\t\t\t// [512, +2, +6]\r\n\t\t\tnwhole = Math.round(data[i])\r\n\t\t\tn = nwhole - lastwhole\t\t\t\r\n\t\t\tlastwhole = nwhole\r\n\r\n\t\t\t// inserting sign change when needed.\r\n\t\t\tif (n < 0 && lastpolarity > 0) {\r\n\t\t\t\tlastpolarity = -1\r\n\t\t\t\tanswer.push(minus)\r\n\t\t\t}\r\n\t\t\telse if (n > 0 && lastpolarity < 0) {\r\n\t\t\t\tlastpolarity = 1\r\n\t\t\t\tanswer.push(plus)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// since we have dealt with sign. let's absolute the value.\r\n\t\t\tabsn = Math.abs(n)\r\n\t\t\t// adding number to list  We convert these to Hex before storing on the string.\r\n\t\t\tif (absn >= bitness) {\r\n\t\t\t\tanswer.push(remapTailChars(absn.toString(bitness)))\r\n\t\t\t} else {\r\n\t\t\t\tanswer.push(absn.toString(bitness))\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn answer.join('')\r\n\t}\r\n\t, uncompressstrokeleg = function(datastring){\r\n\t\t// we convert half-stroke (only 'x' series or only 'y' series of numbers)\r\n\t\t// datastring like this:\r\n\t\t// \"5agm12100p1235584210m53\"\r\n\t\t// is converted into this:\r\n\t\t// [517,516,514,513,513,513,514,516,519,524,529,537,541,543,544,544,539,536]\r\n\t\t// each number in the chain is converted such:\r\n\t\t// - digit char = start of new whole number. Alpha chars except \"p\",\"m\" are numbers in hiding.\r\n\t\t//   These consecutive digist expressed as alphas mapped back to digit char.\r\n\t\t//   resurrected number is the diff between this point and prior coord.\r\n\t\t// - running polaritiy is attached to the number.\r\n\t\t// - we undiff (signed number + prior coord) the number.\r\n\t\t// - if char 'm','p', flip running polarity \r\n\t\tvar answer = []\r\n\t\t, chars = datastring.split('')\r\n\t\t, l = chars.length\r\n\t\t, ch\r\n\t\t, polarity = 1\r\n\t\t, partial = []\r\n\t\t, preprewhole = 0\r\n\t\t, prewhole\r\n\t\tfor(var i = 0; i < l; i++){\r\n\t\t\tch = chars[i]\r\n\t\t\tif (ch in charmap || ch === minus || ch === plus){\r\n\t\t\t\t// this is new number - start of a new whole number.\r\n\t\t\t\t// before we can deal with it, we need to flush out what we already \r\n\t\t\t\t// parsed out from string, but keep in limbo, waiting for this sign\r\n\t\t\t\t// that prior number is done.\r\n\t\t\t\t// we deal with 3 numbers here:\r\n\t\t\t\t// 1. start of this number - a diff from previous number to \r\n\t\t\t\t//    whole, new number, which we cannot do anything with cause\r\n\t\t\t\t//    we don't know its ending yet.\r\n\t\t\t\t// 2. number that we now realize have just finished parsing = prewhole\r\n\t\t\t\t// 3. number we keep around that came before prewhole = preprewhole\r\n\r\n\t\t\t\tif (partial.length !== 0) {\r\n\t\t\t\t\t// yep, we have some number parts in there.\r\n\t\t\t\t\tprewhole = parseInt( partial.join(''), bitness) * polarity + preprewhole\r\n\t\t\t\t\tanswer.push( prewhole )\r\n\t\t\t\t\tpreprewhole = prewhole\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (ch === minus){\r\n\t\t\t\t\tpolarity = -1\r\n\t\t\t\t\tpartial = []\r\n\t\t\t\t} else if (ch === plus){\r\n\t\t\t\t\tpolarity = 1\r\n\t\t\t\t\tpartial = []\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// now, let's start collecting parts for the new number:\r\n\t\t\t\t\tpartial = [ch]\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t} else /* alphas replacing digits */ {\r\n\t\t\t\t// more parts for the new number\r\n\t\t\t\tpartial.push(charmap_reverse[ch])\r\n\t\t\t}\r\n\t\t}\r\n\t\t// we always will have something stuck in partial\r\n\t\t// because we don't have closing delimiter\r\n\t\tanswer.push( parseInt( partial.join(''), bitness ) * polarity + preprewhole )\r\n\t\t\r\n\t\treturn answer\r\n\t}\r\n\t, compressstrokes = function(data){\r\n\t\tvar answer = []\r\n\t\t, l = data.length\r\n\t\t, stroke\r\n\t\tfor(var i = 0; i < l; i++){\r\n\t\t\tstroke = data[i] \r\n\t\t\tanswer.push(compressstrokeleg(stroke.x))\r\n\t\t\tanswer.push(compressstrokeleg(stroke.y))\r\n\t\t}\r\n\t\treturn answer.join(chunkSeparator)\r\n\t}\r\n\t, uncompressstrokes = function(datastring){\r\n\t\tvar data = []\r\n\t\t, chunks = datastring.split(chunkSeparator)\r\n\t\t, l = chunks.length / 2\r\n\t\tfor (var i = 0; i < l; i++){\r\n\t\t\tdata.push({\r\n\t\t\t\t'x':uncompressstrokeleg(chunks[i*2])\r\n\t\t\t\t, 'y':uncompressstrokeleg(chunks[i*2+1])\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn data\r\n\t}\r\n\t, acceptedformat = 'image/jsignature;base30'\r\n\t, pluginCompressor = function(data){\r\n\t\treturn [acceptedformat , compressstrokes(data)]\r\n\t}\r\n\t, pluginDecompressor = function(data, formattype, importcallable){\r\n\t\tif (typeof data !== 'string') return\r\n\t\tif (data.substring(0, acceptedformat.length).toLowerCase() === acceptedformat) {\r\n\t\t\tdata = data.substring(acceptedformat.length + 1) // chopping off \",\" there\r\n\t\t}\r\n\t\timportcallable( uncompressstrokes(data) )\r\n\t}\r\n\t, Initializer = function($){\r\n\t\tvar mothership = $.fn['jSignature']\r\n\t\tmothership(\r\n\t\t\t'addPlugin'\r\n\t\t\t,'export'\r\n\t\t\t,'base30' // alias\r\n\t\t\t,pluginCompressor\r\n\t\t)\r\n\t\tmothership(\r\n\t\t\t'addPlugin'\r\n\t\t\t,'export'\r\n\t\t\t,acceptedformat // full name\r\n\t\t\t,pluginCompressor\r\n\t\t)\r\n\t\tmothership(\r\n\t\t\t'addPlugin'\r\n\t\t\t,'import'\r\n\t\t\t,'base30' // alias\r\n\t\t\t,pluginDecompressor\r\n\t\t)\r\n\t\tmothership(\r\n\t\t\t'addPlugin'\r\n\t\t\t,'import'\r\n\t\t\t,acceptedformat // full name\r\n\t\t\t,pluginDecompressor\r\n\t\t)\r\n\t}\r\n\t\r\n\r\n//  //Because plugins are minified together with jSignature, multiple defines per (minified) file blow up and dont make sense\r\n//\t//Need to revisit this later.\r\n\t\r\n//\tif ( typeof define === \"function\" && define.amd != null) {\r\n//\t\t// AMD-loader compatible resource declaration\r\n//\t\t// you need to call this one with jQuery as argument.\r\n//\t\tdefine(function(){return Initializer} )\r\n//\t} else {\r\n\t\t// global-polluting outcome.\r\n\t\tif(this.jQuery == null) {throw new Error(\"We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...\")}\r\n\t\tInitializer(this.jQuery)\r\n//\t}\r\n\r\n\tif (this.jSignatureDebug) {\r\n\t\tthis.jSignatureDebug['base30'] = {\r\n\t\t\t'remapTailChars':remapTailChars\r\n\t\t\t, 'compressstrokeleg':compressstrokeleg\r\n\t\t\t, 'uncompressstrokeleg':uncompressstrokeleg\r\n\t\t\t, 'compressstrokes':compressstrokes\r\n\t\t\t, 'uncompressstrokes':uncompressstrokes\r\n\t\t\t, 'charmap': charmap\r\n\t\t}\r\n\t}\r\n\r\n}).call(typeof window !== 'undefined'? window : this);",
		"ch/portof/libs/jSignature.CompressorSVG.js": "/** @license\r\njSignature v2 SVG export plugin.\r\n\r\n*/\r\n/**\r\nCopyright (c) 2012 Willow Systems Corp http://willow-systems.com\r\nMIT License <http://www.opensource.org/licenses/mit-license.php>\r\n*/\r\n\r\n;(function(){\r\n\t'use strict'\r\n\t\t\r\n/** @preserve\r\nSimplify.js BSD \r\n(c) 2012, Vladimir Agafonkin\r\nmourner.github.com/simplify-js\r\n\r\n*/\r\n\t;(function(a,b){function c(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d}function d(a,b,c){var d=b.x,e=b.y,f=c.x-d,g=c.y-e,h;if(f!==0||g!==0)h=((a.x-d)*f+(a.y-e)*g)/(f*f+g*g),h>1?(d=c.x,e=c.y):h>0&&(d+=f*h,e+=g*h);return f=a.x-d,g=a.y-e,f*f+g*g}function e(a,b){var d,e=a.length,f,g=a[0],h=[g];for(d=1;d<e;d++)f=a[d],c(f,g)>b&&(h.push(f),g=f);return g!==f&&h.push(f),h}function f(a,c){var e=a.length,f=typeof Uint8Array!=b+\"\"?Uint8Array:Array,g=new f(e),h=0,i=e-1,j,k,l,m,n=[],o=[],p=[];g[h]=g[i]=1;while(i){k=0;for(j=h+1;j<i;j++)l=d(a[j],a[h],a[i]),l>k&&(m=j,k=l);k>c&&(g[m]=1,n.push(h),o.push(m),n.push(m),o.push(i)),h=n.pop(),i=o.pop()}for(j=0;j<e;j++)g[j]&&p.push(a[j]);return p}\"use strict\";var g=typeof exports!=b+\"\"?exports:a;g.simplify=function(a,c,d){var g=c!==b?c*c:1;return d||(a=e(a,g)),a=f(a,g),a}})(window);\r\n\r\n\r\n\t/**\r\n\tVector class. Allows us to simplify representation and manipulation of coordinate-pair\r\n\trepresenting shift against (0, 0)\r\n\r\n\t@public\r\n\t@class\r\n\t@param\r\n\t@returns {Type}\r\n\t*/\r\n\tfunction Vector(x,y){\r\n\t\tthis.x = x\r\n\t\tthis.y = y\r\n\t\tthis.reverse = function(){\r\n\t\t\treturn new this.constructor( \r\n\t\t\t\tthis.x * -1\r\n\t\t\t\t, this.y * -1\r\n\t\t\t)\r\n\t\t}\r\n\t\tthis._length = null\r\n\t\tthis.getLength = function(){\r\n\t\t\tif (!this._length){\r\n\t\t\t\tthis._length = Math.sqrt( Math.pow(this.x, 2) + Math.pow(this.y, 2) )\r\n\t\t\t}\r\n\t\t\treturn this._length\r\n\t\t}\r\n\t\t\r\n\t\tvar polarity = function (e){\r\n\t\t\treturn Math.round(e / Math.abs(e))\r\n\t\t}\r\n\t\tthis.resizeTo = function(length){\r\n\t\t\t// proportionally changes x,y such that the hypotenuse (vector length) is = new length\r\n\t\t\tif (this.x === 0 && this.y === 0){\r\n\t\t\t\tthis._length = 0\r\n\t\t\t} else if (this.x === 0){\r\n\t\t\t\tthis._length = length\r\n\t\t\t\tthis.y = length * polarity(this.y)\r\n\t\t\t} else if(this.y === 0){\r\n\t\t\t\tthis._length = length\r\n\t\t\t\tthis.x = length * polarity(this.x)\r\n\t\t\t} else {\r\n\t\t\t\tvar proportion = Math.abs(this.y / this.x)\r\n\t\t\t\t\t, x = Math.sqrt(Math.pow(length, 2) / (1 + Math.pow(proportion, 2)))\r\n\t\t\t\t\t, y = proportion * x\r\n\t\t\t\tthis._length = length\r\n\t\t\t\tthis.x = x * polarity(this.x)\r\n\t\t\t\tthis.y = y * polarity(this.y)\r\n\t\t\t}\r\n\t\t\treturn this\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Calculates the angle between 'this' vector and another.\r\n\t\t * @public\r\n\t\t * @function\r\n\t\t * @returns {Number} The angle between the two vectors as measured in PI. \r\n\t\t */\r\n\t\tthis.angleTo = function(vectorB) {\r\n\t\t\tvar divisor = this.getLength() * vectorB.getLength()\r\n\t\t\tif (divisor === 0) {\r\n\t\t\t\treturn 0\r\n\t\t\t} else {\r\n\t\t\t\t// JavaScript floating point math is screwed up.\r\n\t\t\t\t// because of it, the core of the formula can, on occasion, have values\r\n\t\t\t\t// over 1.0 and below -1.0.\r\n\t\t\t\treturn Math.acos(\r\n\t\t\t\t\tMath.min( \r\n\t\t\t\t\t\tMath.max( \r\n\t\t\t\t\t\t\t( this.x * vectorB.x + this.y * vectorB.y ) / divisor\r\n\t\t\t\t\t\t\t, -1.0\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t, 1.0\r\n\t\t\t\t\t)\r\n\t\t\t\t) / Math.PI\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction Point(x,y){\r\n\t\tthis.x = x\r\n\t\tthis.y = y\r\n\t\t\r\n\t\tthis.getVectorToCoordinates = function (x, y) {\r\n\t\t\treturn new Vector(x - this.x, y - this.y)\r\n\t\t}\r\n\t\tthis.getVectorFromCoordinates = function (x, y) {\r\n\t\t\treturn this.getVectorToCoordinates(x, y).reverse()\r\n\t\t}\r\n\t\tthis.getVectorToPoint = function (point) {\r\n\t\t\treturn new Vector(point.x - this.x, point.y - this.y)\r\n\t\t}\r\n\t\tthis.getVectorFromPoint = function (point) {\r\n\t\t\treturn this.getVectorToPoint(point).reverse()\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\tAllows one to round a number to arbitrary precision.\r\n\tMath.round() rounds to whole only.\r\n\tNumber.toFixed(precision) returns a string.\r\n\tI need float to float, but with arbitrary precision, hence:\r\n\r\n\t@public\r\n\t@function\r\n\t@param number {Number}\r\n\t@param position {Number} number of digits right of decimal point to keep. If negative, rounding to the left of decimal.\r\n\t@returns {Type}\r\n\t*/\r\n\tfunction round (number, position){\r\n\t\tvar tmp = Math.pow(10, position)\r\n\t\treturn Math.round( number * tmp ) / tmp\r\n\t}\r\n\r\n\t//\t/**\r\n\t//\t * This is a simple, points-to-lines (not curves) renderer. \r\n\t//\t * Keeping it around so we can activate it from time to time and see\r\n\t//\t * if smoothing logic is off much.\r\n\t//\t * @public\r\n\t//\t * @function\r\n\t//\t * @returns {String} Like so \"l 1 2 3 5' with stroke as long line chain. \r\n\t//\t */\r\n\t//\tfunction compressstroke(stroke, shiftx, shifty){\r\n\t//\t\t// we combine strokes data into string like this:\r\n\t//\t\t// 'M 53 7 l 1 2 3 4 -5 -6 5 -6'\r\n\t//\t\t// see SVG documentation for Path element's 'd' argument.\r\n\t//\t\tvar lastx = stroke.x[0]\r\n\t//\t\t, lasty = stroke.y[0]\r\n\t//\t\t, i\r\n\t//\t\t, l = stroke.x.length\r\n\t//\t\t, answer = ['M', lastx - shiftx, lasty - shifty, 'l']\r\n\t//\t\t\r\n\t//\t\tif (l === 1){\r\n\t//\t\t\t// meaning this was just a DOT, not a stroke.\r\n\t//\t\t\t// instead of creating a circle, we just create a short line\r\n\t//\t\t\tanswer.concat(1, -1)\r\n\t//\t\t} else {\r\n\t//\t\t\tfor(i = 1; i < l; i++){\r\n\t//\t\t\t\tanswer = answer.concat(stroke.x[i] - lastx, stroke.y[i] - lasty)\r\n\t//\t\t\t\tlastx = stroke.x[i]\r\n\t//\t\t\t\tlasty = stroke.y[i]\r\n\t//\t\t\t}\r\n\t//\t\t}\r\n\t//\t\treturn answer.join(' ')\r\n\t//\t} \r\n\r\n\tfunction segmentToCurve(stroke, positionInStroke, lineCurveThreshold){\r\n\t\t'use strict'\r\n\t\t// long lines (ones with many pixels between them) do not look good when they are part of a large curvy stroke.\r\n\t\t// You know, the jaggedy crocodile spine instead of a pretty, smooth curve. Yuck!\r\n\t\t// We want to approximate pretty curves in-place of those ugly lines.\r\n\t\t// To approximate a very nice curve we need to know the direction of line before and after.\r\n\t\t// Hence, on long lines we actually wait for another point beyond it to come back from\r\n\t\t// mousemoved before we draw this curve.\r\n\t\t\r\n\t\t// So for \"prior curve\" to be calc'ed we need 4 points \r\n\t\t// \tA, B, C, D (we are on D now, A is 3 points in the past.)\r\n\t\t// and 3 lines:\r\n\t\t//  pre-line (from points A to B), \r\n\t\t//  this line (from points B to C), (we call it \"this\" because if it was not yet, it's the only one we can draw for sure.) \r\n\t\t//  post-line (from points C to D) (even through D point is 'current' we don't know how we can draw it yet)\r\n\t\t//\r\n\t\t// Well, actually, we don't need to *know* the point A, just the vector A->B\r\n\r\n\t\t// Again, we can only derive curve between points positionInStroke-1 and positionInStroke\r\n\t\t// Thus, since we can only draw a line if we know one point ahead of it, we need to shift our focus one point ahead.\r\n\t\tpositionInStroke += 1\r\n\t\t// Let's hope the code that calls us knows we do that and does not call us with positionInStroke = index of last point.\r\n\t\t\r\n\t\tvar Cpoint = new Point(stroke.x[positionInStroke-1], stroke.y[positionInStroke-1])\r\n\t\t\t, Dpoint = new Point(stroke.x[positionInStroke], stroke.y[positionInStroke])\r\n\t\t\t, CDvector = Cpoint.getVectorToPoint(Dpoint)\r\n\t\t// Again, we have a chance here to draw only PREVIOUS line segment - BC\r\n\t\t\r\n\t\t// So, let's start with BC curve.\r\n\t\t// if there is only 2 points in stroke array (C, D), we don't have \"history\" long enough to have point B, let alone point A.\r\n\t\t// so positionInStroke should start with 2, ie\r\n\t\t// we are here when there are at least 3 points in stroke array.\r\n\t\tvar Bpoint = new Point(stroke.x[positionInStroke-2], stroke.y[positionInStroke-2])\r\n\t\t, BCvector = Bpoint.getVectorToPoint(Cpoint)\r\n\t\t, ABvector\r\n\t\t, rounding = 2\r\n\t\t\r\n\t\tif ( BCvector.getLength() > lineCurveThreshold ){\r\n\t\t\t// Yey! Pretty curves, here we come!\r\n\t\t\tif(positionInStroke > 2) {\r\n\t\t\t\tABvector = (new Point(stroke.x[positionInStroke-3], stroke.y[positionInStroke-3])).getVectorToPoint(Bpoint)\r\n\t\t\t} else {\r\n\t\t\t\tABvector = new Vector(0,0)\r\n\t\t\t}\r\n\t\t\tvar minlenfraction = 0.05\r\n\t\t\t, maxlen = BCvector.getLength() * 0.35\r\n\t\t\t, ABCangle = BCvector.angleTo(ABvector.reverse())\r\n\t\t\t, BCDangle = CDvector.angleTo(BCvector.reverse())\r\n\t\t\t, BtoCP1vector = new Vector(ABvector.x + BCvector.x, ABvector.y + BCvector.y).resizeTo(\r\n\t\t\t\tMath.max(minlenfraction, ABCangle) * maxlen\r\n\t\t\t)\r\n\t\t\t, CtoCP2vector = (new Vector(BCvector.x + CDvector.x, BCvector.y + CDvector.y)).reverse().resizeTo(\r\n\t\t\t\tMath.max(minlenfraction, BCDangle) * maxlen\r\n\t\t\t)\r\n\t\t\t, BtoCP2vector = new Vector(BCvector.x + CtoCP2vector.x, BCvector.y + CtoCP2vector.y)\r\n\t\t\t\r\n\t\t\t// returing curve for BC segment\r\n\t\t\t// all coords are vectors against Bpoint\r\n\t\t\treturn [\r\n\t\t\t\t'c' // bezier curve\r\n\t\t\t\t, round( BtoCP1vector.x, rounding )\r\n\t\t\t\t, round( BtoCP1vector.y, rounding )\r\n\t\t\t\t, round( BtoCP2vector.x, rounding )\r\n\t\t\t\t, round( BtoCP2vector.y, rounding )\r\n\t\t\t\t, round( BCvector.x, rounding )\r\n\t\t\t\t, round( BCvector.y, rounding )\r\n\t\t\t]\r\n\t\t} else {\r\n\t\t\treturn [\r\n\t\t\t\t'l' // line\r\n\t\t\t\t, round( BCvector.x, rounding )\r\n\t\t\t\t, round( BCvector.y, rounding )\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n\r\n\tfunction lastSegmentToCurve(stroke, lineCurveThreshold){\r\n\t\t'use strict'\r\n\t\t// Here we tidy up things left unfinished\r\n\t\t\r\n\t\t// What's left unfinished there is the curve between the last points\r\n\t\t// in the stroke\r\n\t\t// We can also be called when there is only one point in the stroke (meaning, the \r\n\t\t// stroke was just a dot), in which case there is nothing for us to do.\r\n\r\n\t\t// So for \"this curve\" to be calc'ed we need 3 points \r\n\t\t// \tA, B, C\r\n\t\t// and 2 lines:\r\n\t\t//  pre-line (from points A to B), \r\n\t\t//  this line (from points B to C) \r\n\t\t// Well, actually, we don't need to *know* the point A, just the vector A->B\r\n\t\t// so, we really need points B, C and AB vector.\r\n\t\tvar positionInStroke = stroke.x.length - 1\r\n\t\t\r\n\t\t// there must be at least 2 points in the stroke.for us to work. Hope calling code checks for that.\r\n\t\tvar Cpoint = new Point(stroke.x[positionInStroke], stroke.y[positionInStroke])\r\n\t\t, Bpoint = new Point(stroke.x[positionInStroke-1], stroke.y[positionInStroke-1])\r\n\t\t, BCvector = Bpoint.getVectorToPoint(Cpoint)\r\n\t\t, rounding = 2\r\n\t\t\r\n\t\tif (positionInStroke > 1 && BCvector.getLength() > lineCurveThreshold){\r\n\t\t\t// we have at least 3 elems in stroke\r\n\t\t\tvar ABvector = (new Point(stroke.x[positionInStroke-2], stroke.y[positionInStroke-2])).getVectorToPoint(Bpoint)\r\n\t\t\t, ABCangle = BCvector.angleTo(ABvector.reverse())\r\n\t\t\t, minlenfraction = 0.05\r\n\t\t\t, maxlen = BCvector.getLength() * 0.35\r\n\t\t\t, BtoCP1vector = new Vector(ABvector.x + BCvector.x, ABvector.y + BCvector.y).resizeTo(\r\n\t\t\t\tMath.max(minlenfraction, ABCangle) * maxlen\r\n\t\t\t)\r\n\t\t\t\r\n\t\t\treturn [\r\n\t\t\t\t'c' // bezier curve\r\n\t\t\t\t, round( BtoCP1vector.x, rounding )\r\n\t\t\t\t, round( BtoCP1vector.y, rounding )\r\n\t\t\t\t, round( BCvector.x, rounding ) // CP2 is same as Cpoint\r\n\t\t\t\t, round( BCvector.y, rounding ) // CP2 is same as Cpoint\r\n\t\t\t\t, round( BCvector.x, rounding )\r\n\t\t\t\t, round( BCvector.y, rounding )\r\n\t\t\t]\r\n\t\t} else {\r\n\t\t\t// Since there is no AB leg, there is no curve to draw. This is just line\r\n\t\t\treturn [\r\n\t\t\t\t'l' // simple line\r\n\t\t\t\t, round( BCvector.x, rounding )\r\n\t\t\t\t, round( BCvector.y, rounding )\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n\r\n\tfunction addstroke(stroke, shiftx, shifty){\r\n\t\t'use strict'\r\n\t\t// we combine strokes data into string like this:\r\n\t\t// 'M 53 7 l 1 2 c 3 4 -5 -6 5 -6'\r\n\t\t// see SVG documentation for Path element's 'd' argument.\r\n\t\tvar lines = [\r\n\t\t\t'M' // move to\r\n\t\t\t, round( (stroke.x[0] - shiftx), 2)\r\n\t\t\t, round( (stroke.y[0] - shifty), 2)\r\n\t\t]\r\n\t\t// processing all points but first and last. \r\n\t\t, i = 1 // index zero item in there is STARTING point. we already extracted it.\r\n\t\t, l = stroke.x.length - 1 // this is a trick. We are leaving last point coordinates for separate processing.\r\n\t\t, lineCurveThreshold = 1\r\n\t\t\r\n\t\tfor(; i < l; i++){\r\n\t\t\tlines.push.apply(lines, segmentToCurve(stroke, i, lineCurveThreshold))\r\n\t\t}\r\n\t\tif (l > 0 /* effectively more than 1, since we \"-1\" above */){\r\n\t\t\tlines.push.apply(lines, lastSegmentToCurve(stroke, i, lineCurveThreshold))\r\n\t\t} else if (l === 0){\r\n\t\t\t// meaning we only have ONE point in the stroke (and otherwise refer to the stroke as \"dot\")\r\n\t\t\tlines.push.apply(lines, ['l' , 1, 1])\r\n\t\t}\r\n\t\treturn lines.join(' ')\r\n\t}\r\n\r\n\tfunction simplifystroke(stroke){\r\n\t\tvar d = []\r\n\t\t, newstroke = {'x':[], 'y':[]}\r\n\t\t, i, l\r\n\t\t\r\n\t\tfor (i = 0, l = stroke.x.length; i < l; i++){\r\n\t\t\td.push({'x':stroke.x[i], 'y':stroke.y[i]})\r\n\t\t}\r\n\t\td = simplify(d, 0.7, true)\r\n\t\tfor (i = 0, l = d.length; i < l; i++){\r\n\t\t\tnewstroke.x.push(d[i].x)\r\n\t\t\tnewstroke.y.push(d[i].y)\r\n\t\t}\t\t\r\n\t\treturn newstroke\r\n\t}\r\n\r\n\tfunction compressstrokes(data){\r\n\t\t'use strict'\r\n\t\tvar answer = [\r\n\t\t\t'<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>'\r\n\t\t\t, '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">'\r\n\t    ]\r\n\t\t, i , l = data.length\r\n\t\t, stroke\r\n\t\t, xlimits = []\r\n\t\t, ylimits = []\r\n\t\t, sizex = 0\r\n\t\t, sizey = 0\r\n\t\t, shiftx = 0\r\n\t\t, shifty = 0\r\n\t\t, minx, maxx, miny, maxy, padding = 1\r\n\t\t, simplifieddata = []\r\n\t\t\r\n\t\tif(l !== 0){\r\n\t\t\tfor(i = 0; i < l; i++){\r\n\t\t\t\tstroke = simplifystroke( data[i] )\r\n\t\t\t\tsimplifieddata.push(stroke)\r\n\t\t\t\txlimits = xlimits.concat(stroke.x)\r\n\t\t\t\tylimits = ylimits.concat(stroke.y)\r\n\t\t\t}\r\n\t\t\t \r\n\t\t\tminx = Math.min.apply(null, xlimits) - padding\r\n\t\t\tmaxx = Math.max.apply(null, xlimits) + padding\r\n\t\t\tminy = Math.min.apply(null, ylimits) - padding\r\n\t\t\tmaxy = Math.max.apply(null, ylimits) + padding\r\n\t\t\tshiftx = minx < 0? 0 : minx\r\n\t\t\tshifty = miny < 0? 0 : miny\r\n\t\t\tsizex = maxx - minx\r\n\t\t\tsizey = maxy - miny\r\n\t\t}\r\n\t\t\r\n\t\tanswer.push(\r\n\t\t\t'<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"'+ \r\n\t\t\tsizex.toString() +\r\n\t\t\t'\" height=\"'+ \r\n\t\t\tsizey.toString() +\r\n\t\t\t'\">'\r\n\t\t)\r\n\t\t\r\n\t//\t\t// This is a nice idea: use style declaration on top, and mark the lines with 'class=\"f\"'\r\n\t//\t\t// thus saving space in svg... \r\n\t//\t\t// alas, many SVG renderers don't understand \"class\" and render the strokes in default \"fill = black, no stroke\" style. Ugh!!!\r\n\t//\t\t// TODO: Rewrite ImageMagic / GraphicsMagic, InkScape, http://svg.codeplex.com/ to support style + class. until then, we hardcode the stroke style within the path. \r\n\t//\t\tanswer.push(\r\n\t//\t\t\t'<style type=\"text/css\"><![CDATA[.f {fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}]]></style>'\r\n\t//\t\t)\r\n\r\n\t//\t\t// This set is accompaniment to \"simple line renderer\" - compressstroke\r\n\t//\t\tanswer.push(\r\n\t//\t\t\t'<style type=\"text/css\"><![CDATA[.t {fill:none;stroke:#FF0000;stroke-width:2}]]></style>'\r\n\t//\t\t)\r\n\t//\t\tfor(i = 0; i < l; i++){\r\n\t//\t\t\tstroke = data[i]\r\n\t//\t\t\t// This one is accompaniment to \"simple line renderer\"\r\n\t//\t\t\tanswer.push('<path class=\"t\" d=\"'+ compressstroke(stroke, shiftx, shifty) +'\"/>')\r\n\t//\t\t}\r\n\r\n\t\tfor(i = 0, l = simplifieddata.length; i < l; i++){\r\n\t\t\tstroke = simplifieddata[i]\r\n\t\t\tanswer.push('<path fill=\"none\" stroke=\"#000000\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"'+ addstroke(stroke, shiftx, shifty) + '\"/>')\r\n\t\t}\r\n\t\tanswer.push('</svg>')\r\n\t\treturn answer.join('')\r\n\t}\r\n\r\n\tif (typeof btoa !== 'function')\r\n\t{\r\n\t\tvar btoa = function(data) {\r\n/** @preserve\r\nbase64 encoder\r\nMIT, GPL\r\nhttp://phpjs.org/functions/base64_encode\r\n+   original by: Tyler Akins (http://rumkin.com)\r\n+   improved by: Bayron Guevara\r\n+   improved by: Thunder.m\r\n+   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n+   bugfixed by: Pellentesque Malesuada\r\n+   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\r\n+   improved by: Rafal Kukawski (http://kukawski.pl)\r\n\r\n*/\r\n\t\t    var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"\r\n\t\t    , b64a = b64.split('')\r\n\t\t    , o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\r\n\t        ac = 0,\r\n\t        enc = \"\",\r\n\t        tmp_arr = [];\r\n\t\t \r\n\t\t    do { // pack three octets into four hexets\r\n\t\t        o1 = data.charCodeAt(i++);\r\n\t\t        o2 = data.charCodeAt(i++);\r\n\t\t        o3 = data.charCodeAt(i++);\r\n\t\t \r\n\t\t        bits = o1 << 16 | o2 << 8 | o3;\r\n\t\t \r\n\t\t        h1 = bits >> 18 & 0x3f;\r\n\t\t        h2 = bits >> 12 & 0x3f;\r\n\t\t        h3 = bits >> 6 & 0x3f;\r\n\t\t        h4 = bits & 0x3f;\r\n\t\t \r\n\t\t        // use hexets to index into b64, and append result to encoded string\r\n\t\t        tmp_arr[ac++] = b64a[h1] + b64a[h2] + b64a[h3] + b64a[h4];\r\n\t\t    } while (i < data.length);\r\n\r\n\t\t    enc = tmp_arr.join('');\r\n\t\t    var r = data.length % 3;\r\n\t\t    return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);\r\n\r\n\t\t    // end of base64 encoder MIT, GPL\r\n\t\t}\r\n\t}\r\n\r\n\tvar unencodedmime = 'image/svg+xml'\r\n\tfunction getUnencodedSVG(data){\r\n\t\treturn [unencodedmime , compressstrokes(data)]\r\n\t}\r\n\r\n\tvar base64encodedmime = 'image/svg+xml;base64'\r\n\tfunction getBase64encodedSVG(data){\r\n\t\treturn [base64encodedmime , btoa( compressstrokes(data) )] \r\n\t} \r\n\r\n\tfunction Initializer($){\r\n\t\tvar mothership = $.fn['jSignature']\r\n\t\tmothership(\r\n\t\t\t'addPlugin'\r\n\t\t\t,'export'\r\n\t\t\t,'svg' // alias\r\n\t\t\t,getUnencodedSVG\r\n\t\t)\r\n\t\tmothership(\r\n\t\t\t'addPlugin'\r\n\t\t\t,'export'\r\n\t\t\t,unencodedmime // full name\r\n\t\t\t,getUnencodedSVG\r\n\t\t)\r\n\t\tmothership(\r\n\t\t\t'addPlugin'\r\n\t\t\t,'export'\r\n\t\t\t,'svgbase64' // alias\r\n\t\t\t,getBase64encodedSVG\r\n\t\t)\r\n\t\tmothership(\r\n\t\t\t'addPlugin'\r\n\t\t\t,'export'\r\n\t\t\t,base64encodedmime // full name\r\n\t\t\t,getBase64encodedSVG\r\n\t\t)\r\n\t}\r\n\r\n\t//  //Because plugins are minified together with jSignature, multiple defines per (minified) file blow up and dont make sense\r\n\t//\t//Need to revisit this later.\r\n\t\t\r\n\tif(typeof $ === 'undefined') {throw new Error(\"We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...\")}\r\n\tInitializer($)\r\n\r\n})();"
	}
});